(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{347:function(t,s,e){"use strict";e.r(s);var a=e(15),n=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"handler"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#handler"}},[t._v("#")]),t._v(" Handler")]),t._v(" "),s("p",[t._v("Handler is a callback function that returns "),s("code",[t._v("Response")]),t._v(". Used in HTTP method handler.")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("KingWorld")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// This is handler")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"KingWorld"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("By default, handler will accepts two parameters: "),s("code",[t._v("request")]),t._v(" and "),s("code",[t._v("store")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Simplified Handler")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Handler")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ParsedRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" store"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'store'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" Response\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" handler"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Handler "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    request"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Request\n    query"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ParsedUrlQuery\n    params"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Record"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    headers"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Record"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    body"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" Object"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    responseHeaders"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Record"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("unknown")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    store"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Record"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("unknown")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"handler-request"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#handler-request"}},[t._v("#")]),t._v(" Handler Request")]),t._v(" "),s("p",[t._v("Handler's request consists of")]),t._v(" "),s("ul",[s("li",[t._v("request ["),s("code",[t._v("Request")]),t._v("]\n"),s("ul",[s("li",[t._v("Native fetch Request")])])]),t._v(" "),s("li",[t._v("query ["),s("code",[t._v("ParsedUrlQuery")]),t._v("]\n"),s("ul",[s("li",[t._v("Parsed Query Parameters as "),s("code",[t._v("Record<string, string>")])]),t._v(" "),s("li",[t._v("Default: "),s("code",[t._v("{}")])]),t._v(" "),s("li",[t._v("Example:\n"),s("ul",[s("li",[t._v("path: "),s("code",[t._v("/hi?name=fubuki&game=KingWorld")])]),t._v(" "),s("li",[t._v("query: "),s("code",[t._v('{ "name": "fubuki", "game": "KingWorld" }')])])])])])]),t._v(" "),s("li",[t._v("params ["),s("code",[t._v("Record<string, string>")]),t._v("]\n"),s("ul",[s("li",[t._v("Path paramters as object")]),t._v(" "),s("li",[t._v("Default: "),s("code",[t._v("{}")])]),t._v(" "),s("li",[t._v("Example:\n"),s("ul",[s("li",[t._v("Code: "),s("code",[t._v('app.get("/id/:name/:game")')])]),t._v(" "),s("li",[t._v("path: "),s("code",[t._v("/id/kurokami/KingWorld")])]),t._v(" "),s("li",[t._v("params: "),s("code",[t._v('{ "name": "kurokami", "game": "KingWorld" }')])])])])])]),t._v(" "),s("li",[t._v("headers ["),s("code",[t._v("Record<string, string>")]),t._v("]\n"),s("ul",[s("li",[t._v("Function which returns request's headers")])])]),t._v(" "),s("li",[t._v("body ["),s("code",[t._v("Promise<string | Object>")]),t._v("]\n"),s("ul",[s("li",[t._v("Function which returns request's body")]),t._v(" "),s("li",[t._v("By default will return either "),s("code",[t._v("string")]),t._v(" or "),s("code",[t._v("Object")]),t._v(" "),s("ul",[s("li",[t._v("Will return Object if request's header contains "),s("code",[t._v("Content-Type: application/json")]),t._v(", and is deserializable")]),t._v(" "),s("li",[t._v("Otherwise, will return string")])])])])]),t._v(" "),s("li",[t._v("responseHeaders ["),s("code",[t._v("Record<string, unknown>")]),t._v("]\n"),s("ul",[s("li",[t._v("Mutable object reference, will attached to response's header")]),t._v(" "),s("li",[t._v("For example, adding "),s("code",[t._v("CORS")]),t._v(" to response as a plugin")])])]),t._v(" "),s("li",[t._v("status ["),s("code",[t._v("(statusCode: number) => void")]),t._v("]\n"),s("ul",[s("li",[t._v("Function to set response status code explictly")])])])])])}),[],!1,null,null,null);s.default=n.exports}}]);