var cQ=Object.create;var{defineProperty:Q6,getPrototypeOf:iQ,getOwnPropertyNames:lQ}=Object;var oQ=Object.prototype.hasOwnProperty;var W6=($,X,Z)=>{Z=$!=null?cQ(iQ($)):{};const Q=X||!$||!$.__esModule?Q6(Z,"default",{value:$,enumerable:!0}):Z;for(let W of lQ($))if(!oQ.call(Q,W))Q6(Q,W,{get:()=>$[W],enumerable:!0});return Q};var nQ=($,X)=>()=>(X||$((X={exports:{}}).exports,X),X.exports);var f2=($,X)=>{for(var Z in X)Q6($,Z,{get:X[Z],enumerable:!0,configurable:!0,set:(Q)=>X[Z]=()=>Q})};var i8=nQ((uR,_Q)=>{var _q=function($){var X=$.indexOf("%");if(X===-1)return $;var Z=$.length,Q="",W=0,Y=0,J=X,z=OQ;while(X>-1&&X<Z){var B=LQ($[X+1],4),G=LQ($[X+2],0),q=B|G,D=V4[q];if(z=V4[256+z+D],Y=Y<<6|q&V4[364+D],z===OQ)Q+=$.slice(W,J),Q+=Y<=65535?String.fromCharCode(Y):String.fromCharCode(55232+(Y>>10),56320+(Y&1023)),Y=0,W=X+3,X=J=$.indexOf("%",W);else if(z===Lq)return null;else{if(X+=3,X<Z&&$.charCodeAt(X)===37)continue;return null}}return Q+$.slice(W)},LQ=function($,X){var Z=Sq[$];return Z===void 0?255:Z<<X},OQ=12,Lq=0,V4=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7],Sq={"0":0,"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};_Q.exports=_q});var Y$=($,X)=>{const Z=X?.length?{}:null;if(Z)for(let Q of X)Z[Q.part.charCodeAt(0)]=Q;return{part:$,store:null,inert:Z,params:null,wildcardStore:null}},l4=($,X)=>({...$,part:X}),o4=($)=>({name:$,store:null,inert:null}),L8=class ${root={};history=[];static regex={static:/:.+?(?=\/|$)/,params:/:.+?(?=\/|$)/g,optionalParams:/:.+?\?(?=\/|$)/g};add(X,Z,Q,{ignoreError:W=!1,ignoreHistory:Y=!1}={}){if(typeof Z!=="string")throw new TypeError("Route path must be a string");if(Z==="")Z="/";else if(Z[0]!=="/")Z=`/${Z}`;const J=Z[Z.length-1]==="*",z=Z.match($.regex.optionalParams);if(z){const F=Z.replaceAll("?","");this.add(X,F,Q,{ignoreError:W});for(let M=0;M<z.length;M++){let O=Z.replace("/"+z[M],"");this.add(X,O,Q,{ignoreError:!0})}return Q}if(z)Z=Z.replaceAll("?","");if(this.history.find(([F,M,O])=>F===X&&M===Z))return Q;if(J||z&&Z.charCodeAt(Z.length-1)===63)Z=Z.slice(0,-1);if(!Y)this.history.push([X,Z,Q]);const B=Z.split($.regex.static),G=Z.match($.regex.params)||[];if(B[B.length-1]==="")B.pop();let q;if(!this.root[X])q=this.root[X]=Y$("/");else q=this.root[X];let D=0;for(let F=0;F<B.length;++F){let M=B[F];if(F>0){const O=G[D++].slice(1);if(q.params===null)q.params=o4(O);else if(q.params.name!==O)if(W)return Q;else throw new Error(`Cannot create route "${Z}" with parameter "${O}" because a route already exists with a different parameter name ("${q.params.name}") in the same location`);const C=q.params;if(C.inert===null){q=C.inert=Y$(M);continue}q=C.inert}for(let O=0;;){if(O===M.length){if(O<q.part.length){const C=l4(q,q.part.slice(O));Object.assign(q,Y$(M,[C]))}break}if(O===q.part.length){if(q.inert===null)q.inert={};const C=q.inert[M.charCodeAt(O)];if(C){q=C,M=M.slice(O),O=0;continue}const S=Y$(M.slice(O));q.inert[M.charCodeAt(O)]=S,q=S;break}if(M[O]!==q.part[O]){const C=l4(q,q.part.slice(O)),S=Y$(M.slice(O));Object.assign(q,Y$(q.part.slice(0,O),[C,S])),q=S;break}++O}}if(D<G.length){const M=G[D].slice(1);if(q.params===null)q.params=o4(M);else if(q.params.name!==M)if(W)return Q;else throw new Error(`Cannot create route "${Z}" with parameter "${M}" because a route already exists with a different parameter name ("${q.params.name}") in the same location`);if(q.params.store===null)q.params.store=Q;return q.params.store}if(J){if(q.wildcardStore===null)q.wildcardStore=Q;return q.wildcardStore}if(q.store===null)q.store=Q;return q.store}find(X,Z){const Q=this.root[X];if(!Q)return null;return Y6(Z,Z.length,Q,0)}},Y6=($,X,Z,Q)=>{const W=Z.part,Y=W.length,J=Q+Y;if(Y>1){if(J>X)return null;if(Y<15){for(let z=1,B=Q+1;z<Y;++z,++B)if(W.charCodeAt(z)!==$.charCodeAt(B))return null}else if($.slice(Q,J)!==W)return null}if(J===X){if(Z.store!==null)return{store:Z.store,params:{}};if(Z.wildcardStore!==null)return{store:Z.wildcardStore,params:{"*":""}};return null}if(Z.inert!==null){const z=Z.inert[$.charCodeAt(J)];if(z!==void 0){const B=Y6($,X,z,J);if(B!==null)return B}}if(Z.params!==null){const{store:z,name:B,inert:G}=Z.params,q=$.indexOf("/",J);if(q!==J){if(q===-1||q>=X){if(z!==null){const D={};return D[B]=$.substring(J,X),{store:z,params:D}}}else if(G!==null){const D=Y6($,X,G,q);if(D!==null)return D.params[B]=$.substring(J,q),D}}}if(Z.wildcardStore!==null)return{store:Z.wildcardStore,params:{"*":$.substring(J,X)}};return null};var J$=($)=>{const X=typeof $==="object"?$.fn.toString():typeof $==="string"?$.toString():$,Z=X.indexOf(")");if(X.charCodeAt(Z+2)===61&&X.charCodeAt(Z+5)!==123)return!0;return X.includes("return")},tQ=($)=>{if($.startsWith("async"))$=$.slice(6);let X=-1;if($.charCodeAt(0)===40){if(X=$.indexOf(") => "),X!==-1)return[$.slice(1,X),$.slice(X+5),{isArrowReturn:$.charCodeAt(X+5)!==123}]}if($.startsWith("function")){X=$.indexOf("(");const W=$.indexOf(")");return[$.slice(X+1,W),$.slice(W+2),{isArrowReturn:!1}]}const Z=$.indexOf("(");if(Z!==-1){const W=$.indexOf("\n",2),Y=$.slice(0,W),J=Y.lastIndexOf(")")+1,z=$.slice(W+1);return[Y.slice(Z,J),"{"+z,{isArrowReturn:!1}]}const Q=$.split("\n",2);return[Q[0],Q[1],{isArrowReturn:!1}]},sQ=($)=>{const X=$.indexOf("{");if(X===-1)return[-1,0];let Z=X+1,Q=1;for(;Z<$.length;Z++){const W=$.charCodeAt(Z);if(W===123)Q++;else if(W===125)Q--;if(Q===0)break}if(Q!==0)return[0,$.length];return[X,Z+1]},rQ=($)=>{const X=$.lastIndexOf("}");if(X===-1)return[-1,0];let Z=X-1,Q=1;for(;Z>=0;Z--){const W=$.charCodeAt(Z);if(W===125)Q++;else if(W===123)Q--;if(Q===0)break}if(Q!==0)return[-1,0];return[Z,X+1]},n4=($)=>{let X=!1;if($.charCodeAt(0)===40)$=$.slice(1,-1);if($.charCodeAt(0)===123)X=!0,$=$.slice(2,-2);while(!0){const[Q,W]=sQ($);if(Q===-1)break;$=$.slice(0,Q-2)+$.slice(W+1)}const Z=$.replace(/:/g,"").trim();if(X)return"{ "+Z+" }";return Z},aQ=($,X)=>{const Z=n4($);if(Z.charCodeAt(0)===123){if(!X.query&&Z.includes("query"))X.query=!0;if(!X.headers&&Z.includes("headers"))X.headers=!0;if(!X.body&&Z.includes("body"))X.body=!0;if(!X.cookie&&Z.includes("cookie"))X.cookie=!0;if(!X.set&&Z.includes("set"))X.set=!0;if(!X.server&&Z.includes("server"))X.server=!0}return Z},eQ=($,X,Z)=>{const Q=X.indexOf($+"\n",Z),W=X.indexOf($+"\t",Z),Y=X.indexOf($+",",Z),J=X.indexOf($+";",Z),z=X.indexOf($+" ",Z);return[Q,W,Y,J,z].filter((B)=>B>0).sort((B,G)=>B-G)[0]||-1};var t4=($,X,Z=0)=>{if(Z>5)return[];const Q=[];let W=X;while(!0){let Y=eQ(" = "+$,W);if(Y===-1){const B=W.indexOf(" = "+$);if(B+3+$.length!==W.length)break;Y=B}const J=W.slice(0,Y);let z=J.slice(J.lastIndexOf(" ")+1);if(z==="}"){const[B,G]=rQ(J);Q.push(W.slice(B,G)),W=W.slice(Y+3+$.length);continue}while(z.charCodeAt(0)===44)z=z.slice(1);while(z.charCodeAt(0)===9)z=z.slice(1);if(!z.includes("("))Q.push(z);W=W.slice(Y+3+$.length)}for(let Y of Q){if(Y.charCodeAt(0)===123)continue;const J=t4(Y,X);if(J.length>0)Q.push(...J)}return Q},$W=($)=>{if(!$)return;if($.charCodeAt(0)!==123)return $;if($=$.slice(2,-2),!$.includes(",")){if($.includes("..."))return $.slice($.indexOf("...")+3);return}const Z=$.indexOf("...");if(Z===-1)return;return $.slice(Z+3).trimEnd()},XW=($,X,Z)=>{const Q=(W,Y)=>$.includes(Y+"."+W)||$.includes(Y+'["'+W+'"]')||$.includes(Y+"['"+W+"']");for(let W of X){if(!W)continue;if(W.charCodeAt(0)===123){if(W=n4(W),!Z.query&&W.includes("query"))Z.query=!0;if(!Z.headers&&W.includes("headers"))Z.headers=!0;if(!Z.body&&W.includes("body"))Z.body=!0;if(!Z.cookie&&W.includes("cookie"))Z.cookie=!0;if(!Z.set&&W.includes("set"))Z.set=!0;if(!Z.query&&W.includes("server"))Z.server=!0;continue}if(!Z.query&&Q("query",W))Z.query=!0;if($.includes("return "+W)||$.includes("return "+W+".query"))Z.query=!0;if(!Z.headers&&Q("headers",W))Z.headers=!0;if(!Z.body&&Q("body",W))Z.body=!0;if(!Z.cookie&&Q("cookie",W))Z.cookie=!0;if(!Z.set&&Q("set",W))Z.set=!0;if(!Z.server&&Q("server",W))Z.server=!0;if(Z.query&&Z.headers&&Z.body&&Z.cookie&&Z.set&&Z.server)break}return X};var ZW=($,X,Z)=>{try{const Q=new RegExp(`(?:\\w)\\((?:.*)?${$}`,"gs");Q.test(X);const W=X.charCodeAt(Q.lastIndex);if(W===41||W===44)return Z.query=!0,Z.headers=!0,Z.body=!0,Z.cookie=!0,Z.set=!0,Z.server=!0,!0;return!1}catch(Q){return console.log("[Sucrose] unexpected isContextPassToFunction error, please report the following to the developer:"),console.log("---"),console.log($),console.log("---"),!0}},_8=($,X={query:!1,headers:!1,body:!1,cookie:!1,set:!1,server:!1})=>{const Z=[];if($.handler&&typeof $.handler==="function")Z.push($.handler);if($.request?.length)Z.push(...$.request);if($.beforeHandle?.length)Z.push(...$.beforeHandle);if($.parse?.length)Z.push(...$.parse);if($.error?.length)Z.push(...$.error);if($.transform?.length)Z.push(...$.transform);if($.afterHandle?.length)Z.push(...$.afterHandle);if($.mapResponse?.length)Z.push(...$.mapResponse);if($.afterResponse?.length)Z.push(...$.afterResponse);for(let Q of Z){if(!Q)continue;const W="fn"in Q?Q.fn:Q,[Y,J,{isArrowReturn:z}]=tQ(W.toString());console.log(Y);const B=aQ(Y,X),G=$W(B);if(G){const q=t4(G,J);q.splice(0,-1,G);for(let D of q)if(ZW(G,J,X))break;if(XW(J,q,X),!X.query&&J.includes("return "+G+".query"))X.query=!0}if(X.query&&X.headers&&X.body&&X.cookie&&X.set&&X.server)break}return X};function S8($){return v0($)&&Symbol.asyncIterator in $}function F8($){return v0($)&&Symbol.iterator in $}function H0($){return v0($)&&(Object.getPrototypeOf($)===Object.prototype||Object.getPrototypeOf($)===null)}function j8($){return $ instanceof Promise}function G1($){return $ instanceof Date&&Number.isFinite($.getTime())}function V1($){return ArrayBuffer.isView($)}function z$($){return $ instanceof globalThis.Uint8Array}function l($,X){return X in $}function v0($){return $!==null&&typeof $==="object"}function d($){return Array.isArray($)&&!ArrayBuffer.isView($)}function F0($){return $===void 0}function q2($){return $===null}function n1($){return typeof $==="boolean"}function g($){return typeof $==="number"}function C8($){return Number.isInteger($)}function p0($){return typeof $==="bigint"}function i($){return typeof $==="string"}function K8($){return typeof $==="function"}function Y1($){return typeof $==="symbol"}function H1($){return p0($)||n1($)||q2($)||g($)||i($)||Y1($)||F0($)}var R0;(function($){$.ExactOptionalPropertyTypes=!1,$.AllowArrayObject=!1,$.AllowNaN=!1,$.AllowNullVoid=!1;function X(J,z){return $.ExactOptionalPropertyTypes?z in J:J[z]!==void 0}$.IsExactOptionalProperty=X;function Z(J){const z=v0(J);return $.AllowArrayObject?z:z&&!d(J)}$.IsObjectLike=Z;function Q(J){return Z(J)&&!(J instanceof Date)&&!(J instanceof Uint8Array)}$.IsRecordLike=Q;function W(J){return $.AllowNaN?g(J):Number.isFinite(J)}$.IsNumberLike=W;function Y(J){const z=F0(J);return $.AllowNullVoid?z||J===null:z}$.IsVoidLike=Y})(R0||(R0={}));var A0={};f2(A0,{Set:()=>zW,Has:()=>JW,Get:()=>MW,Entries:()=>QW,Delete:()=>YW,Clear:()=>WW});function QW(){return new Map(M$)}function WW(){return M$.clear()}function YW($){return M$.delete($)}function JW($){return M$.has($)}function zW($,X){M$.set($,X)}function MW($){return M$.get($)}var M$=new Map;var V0={};f2(V0,{Set:()=>GW,Has:()=>UW,Get:()=>HW,Entries:()=>qW,Delete:()=>wW,Clear:()=>BW});function qW(){return new Map(q$)}function BW(){return q$.clear()}function wW($){return q$.delete($)}function UW($){return q$.has($)}function GW($,X){q$.set($,X)}function HW($){return q$.get($)}var q$=new Map;var S0=Symbol.for("TypeBox.Transform"),t1=Symbol.for("TypeBox.Readonly"),o0=Symbol.for("TypeBox.Optional"),A1=Symbol.for("TypeBox.Hint"),A=Symbol.for("TypeBox.Kind");function F$($={}){return{...$,[A]:$[A]??"Unsafe"}}class m extends Error{constructor($){super($)}}class J6 extends m{constructor($){super(`Duplicate type kind '${$}' detected`)}}class z6 extends m{constructor($){super(`Duplicate string format '${$}' detected`)}}var s1;(function($){function X(Q,W){if(V0.Has(Q))throw new J6(Q);return V0.Set(Q,W),(Y={})=>F$({...Y,[A]:Q})}$.Type=X;function Z(Q,W){if(A0.Has(Q))throw new z6(Q);return A0.Set(Q,W),Q}$.Format=Z})(s1||(s1={}));function e($){return{[A]:"MappedResult",properties:$}}var z1={};f2(z1,{IsUndefined:()=>j0,IsUint8Array:()=>y2,IsSymbol:()=>G6,IsString:()=>D0,IsRegExp:()=>U6,IsObject:()=>N0,IsNumber:()=>d1,IsNull:()=>w6,IsIterator:()=>B6,IsFunction:()=>q6,IsDate:()=>C$,IsBoolean:()=>b2,IsBigInt:()=>j$,IsAsyncIterator:()=>M6,IsArray:()=>J1});function M6($){return N0($)&&!J1($)&&!y2($)&&Symbol.asyncIterator in $}function J1($){return Array.isArray($)}function j$($){return typeof $==="bigint"}function b2($){return typeof $==="boolean"}function C$($){return $ instanceof globalThis.Date}function q6($){return typeof $==="function"}function B6($){return N0($)&&!J1($)&&!y2($)&&Symbol.iterator in $}function w6($){return $===null}function d1($){return typeof $==="number"}function N0($){return typeof $==="object"&&$!==null}function U6($){return $ instanceof globalThis.RegExp}function D0($){return typeof $==="string"}function G6($){return typeof $==="symbol"}function y2($){return $ instanceof globalThis.Uint8Array}function j0($){return $===void 0}var AW=function($){return $.map((X)=>b8(X))},NW=function($){return new Date($.getTime())},DW=function($){return new Uint8Array($)},PW=function($){return new RegExp($.source,$.flags)},OW=function($){const X={};for(let Z of Object.getOwnPropertyNames($))X[Z]=b8($[Z]);for(let Z of Object.getOwnPropertySymbols($))X[Z]=b8($[Z]);return X},b8=function($){return J1($)?AW($):C$($)?NW($):y2($)?DW($):U6($)?PW($):N0($)?OW($):$};function s4($){return b8($)}function K0($){return $.map((X)=>j(X))}function j($,X={}){return{...s4($),...X}}var LW=function($,X){const{[X]:Z,...Q}=$;return Q};function b0($,X){return X.reduce((Z,Q)=>LW(Z,Q),$)}function K$($,X={}){return{...X,[A]:"Array",type:"array",items:j($)}}function b$($,X={}){return{...X,[A]:"AsyncIterator",type:"AsyncIterator",items:j($)}}function R$($,X,Z){return{...Z,[A]:"Constructor",type:"Constructor",parameters:K0($),returns:j(X)}}function B2($,X,Z){return{...Z,[A]:"Function",type:"Function",parameters:K0($),returns:j(X)}}function z0($={}){return{...$,[A]:"Never",not:{}}}function r4($){return N0($)&&$[t1]==="Readonly"}function r1($){return N0($)&&$[o0]==="Optional"}function _W($){return $0($,"Any")}function w2($){return $0($,"Array")}function V$($){return $0($,"AsyncIterator")}function H6($){return $0($,"BigInt")}function A6($){return $0($,"Boolean")}function E$($){return $0($,"Constructor")}function SW($){return $0($,"Date")}function I$($){return $0($,"Function")}function d2($){return $0($,"Integer")}function E0($){return $0($,"Intersect")}function x$($){return $0($,"Iterator")}function $0($,X){return N0($)&&A in $&&$[A]===X}function U2($){return $0($,"Literal")}function N1($){return $0($,"MappedKey")}function _0($){return $0($,"MappedResult")}function B$($){return $0($,"Never")}function FW($){return $0($,"Not")}function jW($){return $0($,"Null")}function v2($){return $0($,"Number")}function T0($){return $0($,"Object")}function p2($){return $0($,"Promise")}function N6($){return $0($,"Record")}function D6($){return $0($,"Ref")}function P6($){return $0($,"RegExp")}function k$($){return $0($,"String")}function CW($){return $0($,"Symbol")}function D1($){return $0($,"TemplateLiteral")}function KW($){return $0($,"This")}function w$($){return N0($)&&S0 in $}function v1($){return $0($,"Tuple")}function bW($){return $0($,"Undefined")}function Q0($){return $0($,"Union")}function RW($){return $0($,"Uint8Array")}function VW($){return $0($,"Unknown")}function EW($){return $0($,"Unsafe")}function IW($){return $0($,"Void")}function xW($){return N0($)&&A in $&&D0($[A])}function P1($){return _W($)||w2($)||A6($)||H6($)||V$($)||E$($)||SW($)||I$($)||d2($)||E0($)||x$($)||U2($)||N1($)||_0($)||B$($)||FW($)||jW($)||v2($)||T0($)||p2($)||N6($)||D6($)||P6($)||k$($)||CW($)||D1($)||KW($)||v1($)||bW($)||Q0($)||RW($)||VW($)||EW($)||IW($)||xW($)}var TW=function($){return b0(j($),[o0])},gW=function($){return{...j($),[o0]:"Optional"}},fW=function($,X){return X===!1?TW($):gW($)};function e0($,X){const Z=X??!0;return _0($)?a4($,Z):fW($,Z)}var yW=function($,X){const Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=e0($[Q],X);return Z},dW=function($,X){return yW($.properties,X)};function a4($,X){const Z=dW($,X);return e(Z)}function T$($,X){const Z=$.every((W)=>T0(W)),Q=P1(X.unevaluatedProperties)?{unevaluatedProperties:j(X.unevaluatedProperties)}:{};return X.unevaluatedProperties===!1||P1(X.unevaluatedProperties)||Z?{...X,...Q,[A]:"Intersect",type:"object",allOf:K0($)}:{...X,...Q,[A]:"Intersect",allOf:K0($)}}var vW=function($){return $.every((X)=>r1(X))},pW=function($){return b0($,[o0])},e4=function($){return $.map((X)=>r1(X)?pW(X):X)},hW=function($,X){return vW($)?e0(T$(e4($),X)):T$(e4($),X)};function R8($,X={}){if($.length===0)return z0(X);if($.length===1)return j($[0],X);if($.some((Z)=>w$(Z)))throw new Error("Cannot intersect transform types");return hW($,X)}function $1($,X={}){if($.length===0)return z0(X);if($.length===1)return j($[0],X);if($.some((Z)=>w$(Z)))throw new Error("Cannot intersect transform types");return T$($,X)}function g$($,X){return{...X,[A]:"Union",anyOf:K0($)}}var mW=function($){return $.some((X)=>r1(X))},$X=function($){return $.map((X)=>r1(X)?uW(X):X)},uW=function($){return b0($,[o0])},cW=function($,X){return mW($)?e0(g$($X($),X)):g$($X($),X)};function a1($,X={}){return $.length===0?z0(X):$.length===1?j($[0],X):cW($,X)}function M0($,X={}){return $.length===0?z0(X):$.length===1?j($[0],X):g$($,X)}var iW=function($){return $.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")},L6=function($,X,Z){return $[X]===Z&&$.charCodeAt(X-1)!==92},G2=function($,X){return L6($,X,"(")},f$=function($,X){return L6($,X,")")},XX=function($,X){return L6($,X,"|")},lW=function($){if(!(G2($,0)&&f$($,$.length-1)))return!1;let X=0;for(let Z=0;Z<$.length;Z++){if(G2($,Z))X+=1;if(f$($,Z))X-=1;if(X===0&&Z!==$.length-1)return!1}return!0},oW=function($){return $.slice(1,$.length-1)},nW=function($){let X=0;for(let Z=0;Z<$.length;Z++){if(G2($,Z))X+=1;if(f$($,Z))X-=1;if(XX($,Z)&&X===0)return!0}return!1},tW=function($){for(let X=0;X<$.length;X++)if(G2($,X))return!0;return!1},sW=function($){let[X,Z]=[0,0];const Q=[];for(let Y=0;Y<$.length;Y++){if(G2($,Y))X+=1;if(f$($,Y))X-=1;if(XX($,Y)&&X===0){const J=$.slice(Z,Y);if(J.length>0)Q.push(U$(J));Z=Y+1}}const W=$.slice(Z);if(W.length>0)Q.push(U$(W));if(Q.length===0)return{type:"const",const:""};if(Q.length===1)return Q[0];return{type:"or",expr:Q}},rW=function($){function X(W,Y){if(!G2(W,Y))throw new O6("TemplateLiteralParser: Index must point to open parens");let J=0;for(let z=Y;z<W.length;z++){if(G2(W,z))J+=1;if(f$(W,z))J-=1;if(J===0)return[Y,z]}throw new O6("TemplateLiteralParser: Unclosed group parens in expression")}function Z(W,Y){for(let J=Y;J<W.length;J++)if(G2(W,J))return[Y,J];return[Y,W.length]}const Q=[];for(let W=0;W<$.length;W++)if(G2($,W)){const[Y,J]=X($,W),z=$.slice(Y,J+1);Q.push(U$(z)),W=J}else{const[Y,J]=Z($,W),z=$.slice(Y,J);if(z.length>0)Q.push(U$(z));W=J-1}return Q.length===0?{type:"const",const:""}:Q.length===1?Q[0]:{type:"and",expr:Q}};function U$($){return lW($)?U$(oW($)):nW($)?sW($):tW($)?rW($):{type:"const",const:iW($)}}function G$($){return U$($.slice(1,$.length-1))}class O6 extends m{}var aW=function($){return $.type==="or"&&$.expr.length===2&&$.expr[0].type==="const"&&$.expr[0].const==="0"&&$.expr[1].type==="const"&&$.expr[1].const==="[1-9][0-9]*"},eW=function($){return $.type==="or"&&$.expr.length===2&&$.expr[0].type==="const"&&$.expr[0].const==="true"&&$.expr[1].type==="const"&&$.expr[1].const==="false"},$5=function($){return $.type==="const"&&$.const===".*"};function h2($){return aW($)||$5($)?!1:eW($)?!0:$.type==="and"?$.expr.every((X)=>h2(X)):$.type==="or"?$.expr.every((X)=>h2(X)):$.type==="const"?!0:(()=>{throw new ZX("Unknown expression type")})()}function V8($){const X=G$($.pattern);return h2(X)}class ZX extends m{}function*WX($){if($.length===1)return yield*$[0];for(let X of $[0])for(let Z of WX($.slice(1)))yield`${X}${Z}`}function*X5($){return yield*WX($.expr.map((X)=>[...y$(X)]))}function*Z5($){for(let X of $.expr)yield*y$(X)}function*Q5($){return yield $.const}function*y$($){return $.type==="and"?yield*X5($):$.type==="or"?yield*Z5($):$.type==="const"?yield*Q5($):(()=>{throw new QX("Unknown expression")})()}function H$($){const X=G$($.pattern);return h2(X)?[...y$(X)]:[]}class QX extends m{}function W0($,X={}){return{...X,[A]:"Literal",const:$,type:typeof $}}function d$($={}){return{...$,[A]:"Boolean",type:"boolean"}}function m2($={}){return{...$,[A]:"BigInt",type:"bigint"}}function p1($={}){return{...$,[A]:"Number",type:"number"}}function O1($={}){return{...$,[A]:"String",type:"string"}}function*W5($){const X=$.trim().replace(/"|'/g,"");return X==="boolean"?yield d$():X==="number"?yield p1():X==="bigint"?yield m2():X==="string"?yield O1():yield(()=>{const Z=X.split("|").map((Q)=>W0(Q.trim()));return Z.length===0?z0():Z.length===1?Z[0]:a1(Z)})()}function*Y5($){if($[1]!=="{"){const X=W0("$"),Z=_6($.slice(1));return yield*[X,...Z]}for(let X=2;X<$.length;X++)if($[X]==="}"){const Z=W5($.slice(2,X)),Q=_6($.slice(X+1));return yield*[...Z,...Q]}yield W0($)}function*_6($){for(let X=0;X<$.length;X++)if($[X]==="$"){const Z=W0($.slice(0,X)),Q=Y5($.slice(X));return yield*[Z,...Q]}yield W0($)}function YX($){return[..._6($)]}var JX="(true|false)",E8="(0|[1-9][0-9]*)",zX="(.*)";var H2="^(0|[1-9][0-9]*)$",R2="^(.*)$";var J5=function($){return $.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},qX=function($,X){return D1($)?$.pattern.slice(1,$.pattern.length-1):Q0($)?`(${$.anyOf.map((Z)=>qX(Z,X)).join("|")})`:v2($)?`${X}${E8}`:d2($)?`${X}${E8}`:H6($)?`${X}${E8}`:k$($)?`${X}${zX}`:U2($)?`${X}${J5($.const.toString())}`:A6($)?`${X}${JX}`:(()=>{throw new MX(`Unexpected Kind '${$[A]}'`)})()};function S6($){return`^${$.map((X)=>qX(X,"")).join("")}$`}class MX extends m{}function u2($){const Z=H$($).map((Q)=>W0(Q));return a1(Z)}function v$($,X={}){const Z=D0($)?S6(YX($)):S6($);return{...X,[A]:"TemplateLiteral",type:"string",pattern:Z}}var z5=function($){return H$($).map((Z)=>Z.toString())},M5=function($){const X=[];for(let Z of $)X.push(...M1(Z));return X},q5=function($){return[$.toString()]};function M1($){return[...new Set(D1($)?z5($):Q0($)?M5($.anyOf):U2($)?q5($.const):v2($)?["[number]"]:d2($)?["[number]"]:[])]}var B5=function($,X,Z){const Q={};for(let W of Object.getOwnPropertyNames(X))Q[W]=c2($,M1(X[W]),Z);return Q},w5=function($,X,Z){return B5($,X.properties,Z)};function BX($,X,Z){const Q=w5($,X,Z);return e(Q)}var UX=function($,X){return $.map((Z)=>GX(Z,X))},U5=function($){return $.filter((X)=>!B$(X))},G5=function($,X){return R8(U5(UX($,X)))},H5=function($){return $.some((X)=>B$(X))?[]:$},A5=function($,X){return a1(H5(UX($,X)))},N5=function($,X){return X in $?$[X]:X==="[number]"?a1($):z0()},D5=function($,X){return X==="[number]"?$:z0()},P5=function($,X){return X in $?$[X]:z0()};function GX($,X){return E0($)?G5($.allOf,X):Q0($)?A5($.anyOf,X):v1($)?N5($.items??[],X):w2($)?D5($.items,X):T0($)?P5($.properties,X):z0()}function p$($,X){return X.map((Z)=>GX($,Z))}var wX=function($,X){return a1(p$($,X))};function c2($,X,Z={}){return _0(X)?j(BX($,X,Z)):N1(X)?j(HX($,X,Z)):P1(X)?j(wX($,M1(X)),Z):j(wX($,X),Z)}var O5=function($,X,Z){return{[X]:c2($,[X],Z)}},L5=function($,X,Z){return X.reduce((Q,W)=>{return{...Q,...O5($,W,Z)}},{})},_5=function($,X,Z){return L5($,X.keys,Z)};function HX($,X,Z){const Q=_5($,X,Z);return e(Q)}function h$($,X={}){return{...X,[A]:"Iterator",type:"Iterator",items:j($)}}var S5=function($,X={}){const Z=globalThis.Object.getOwnPropertyNames($),Q=Z.filter((z)=>r1($[z])),W=Z.filter((z)=>!Q.includes(z)),Y=P1(X.additionalProperties)?{additionalProperties:j(X.additionalProperties)}:{},J={};for(let z of Z)J[z]=j($[z]);return W.length>0?{...X,...Y,[A]:"Object",type:"object",properties:J,required:W}:{...X,...Y,[A]:"Object",type:"object",properties:J}},q0=S5;function m$($,X={}){return{...X,[A]:"Promise",type:"Promise",item:j($)}}var F5=function($){return b0(j($),[t1])},j5=function($){return{...j($),[t1]:"Readonly"}},C5=function($,X){return X===!1?F5($):j5($)};function L1($,X){const Z=X??!0;return _0($)?AX($,Z):C5($,Z)}var K5=function($,X){const Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=L1($[Q],X);return Z},b5=function($,X){return K5($.properties,X)};function AX($,X){const Z=b5($,X);return e(Z)}function h1($,X={}){const[Z,Q,W]=[!1,$.length,$.length];return $.length>0?{...X,[A]:"Tuple",type:"array",items:K0($),additionalItems:Z,minItems:Q,maxItems:W}:{...X,[A]:"Tuple",type:"array",minItems:Q,maxItems:W}}function NX($,X){return $.includes(X)}function DX($){return[...new Set($)]}function R5($,X){return $.filter((Z)=>X.includes(Z))}var V5=function($,X){return $.reduce((Z,Q)=>{return R5(Z,Q)},X)};function PX($){return $.length===1?$[0]:$.length>1?V5($.slice(1),$[0]):[]}function OX($){const X=[];for(let Z of $)X.push(...Z);return X}var LX=function($,X){return $ in X?E1($,X[$]):e(X)},E5=function($){return{[$]:W0($)}},I5=function($){const X={};for(let Z of $)X[Z]=W0(Z);return X},x5=function($,X){return NX(X,$)?E5($):I5(X)},k5=function($,X){const Z=x5($,X);return LX($,Z)},u$=function($,X){return X.map((Z)=>E1($,Z))},T5=function($,X){const Z={};for(let Q of globalThis.Object.getOwnPropertyNames(X))Z[Q]=E1($,X[Q]);return Z},E1=function($,X){return r1(X)?e0(E1($,b0(X,[o0]))):r4(X)?L1(E1($,b0(X,[t1]))):_0(X)?LX($,X.properties):N1(X)?k5($,X.keys):E$(X)?R$(u$($,X.parameters),E1($,X.returns)):I$(X)?B2(u$($,X.parameters),E1($,X.returns)):V$(X)?b$(E1($,X.items)):x$(X)?h$(E1($,X.items)):E0(X)?$1(u$($,X.allOf)):Q0(X)?M0(u$($,X.anyOf)):v1(X)?h1(u$($,X.items??[])):T0(X)?q0(T5($,X.properties)):w2(X)?K$(E1($,X.items)):p2(X)?m$(E1($,X.item)):X};function g5($,X){const Z={};for(let Q of $)Z[Q]=E1(Q,X);return Z}function F6($,X,Z={}){const Q=P1($)?M1($):$,W=X({[A]:"MappedKey",keys:Q}),Y=g5(Q,W);return j(q0(Y),Z)}var _X=function($){const X=[];for(let Z of $)X.push(q1(Z));return X},f5=function($){const X=_X($);return OX(X)},y5=function($){const X=_X($);return PX(X)},d5=function($){return $.map((X,Z)=>Z.toString())},v5=function($){return["[number]"]},p5=function($){return globalThis.Object.getOwnPropertyNames($)},h5=function($){if(!j6)return[];return globalThis.Object.getOwnPropertyNames($).map((Z)=>{return Z[0]==="^"&&Z[Z.length-1]==="$"?Z.slice(1,Z.length-1):Z})};function q1($){return E0($)?f5($.allOf):Q0($)?y5($.anyOf):v1($)?d5($.items??[]):w2($)?v5($.items):T0($)?p5($.properties):N6($)?h5($.patternProperties):[]}function A2($){j6=!0;const X=q1($);return j6=!1,`^(${X.map((Q)=>`(${Q})`).join("|")})\$`}var j6=!1;function m5($){return $.map((X)=>X==="[number]"?p1():W0(X))}function c$($,X={}){if(_0($))return SX($,X);else{const Z=q1($),Q=m5(Z),W=a1(Q);return j(W,X)}}var u5=function($,X){const Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=c$($[Q],X);return Z},c5=function($,X){return u5($.properties,X)};function SX($,X){const Z=c5($,X);return e(Z)}function I8($){const X=q1($),Z=p$($,X);return X.map((Q,W)=>[X[W],Z[W]])}var i5=function($){return $.allOf.every((X)=>N2(X))},l5=function($){return $.anyOf.some((X)=>N2(X))},o5=function($){return!N2($.not)};function N2($){return $[A]==="Intersect"?i5($):$[A]==="Union"?l5($):$[A]==="Not"?o5($):$[A]==="Undefined"?!0:!1}function n5($){switch($.errorType){case N.ArrayContains:return"Expected array to contain at least one matching value";case N.ArrayMaxContains:return`Expected array to contain no more than ${$.schema.maxContains} matching values`;case N.ArrayMinContains:return`Expected array to contain at least ${$.schema.minContains} matching values`;case N.ArrayMaxItems:return`Expected array length to be less or equal to ${$.schema.maxItems}`;case N.ArrayMinItems:return`Expected array length to be greater or equal to ${$.schema.minItems}`;case N.ArrayUniqueItems:return"Expected array elements to be unique";case N.Array:return"Expected array";case N.AsyncIterator:return"Expected AsyncIterator";case N.BigIntExclusiveMaximum:return`Expected bigint to be less than ${$.schema.exclusiveMaximum}`;case N.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${$.schema.exclusiveMinimum}`;case N.BigIntMaximum:return`Expected bigint to be less or equal to ${$.schema.maximum}`;case N.BigIntMinimum:return`Expected bigint to be greater or equal to ${$.schema.minimum}`;case N.BigIntMultipleOf:return`Expected bigint to be a multiple of ${$.schema.multipleOf}`;case N.BigInt:return"Expected bigint";case N.Boolean:return"Expected boolean";case N.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${$.schema.exclusiveMinimumTimestamp}`;case N.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${$.schema.exclusiveMaximumTimestamp}`;case N.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${$.schema.minimumTimestamp}`;case N.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${$.schema.maximumTimestamp}`;case N.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${$.schema.multipleOfTimestamp}`;case N.Date:return"Expected Date";case N.Function:return"Expected function";case N.IntegerExclusiveMaximum:return`Expected integer to be less than ${$.schema.exclusiveMaximum}`;case N.IntegerExclusiveMinimum:return`Expected integer to be greater than ${$.schema.exclusiveMinimum}`;case N.IntegerMaximum:return`Expected integer to be less or equal to ${$.schema.maximum}`;case N.IntegerMinimum:return`Expected integer to be greater or equal to ${$.schema.minimum}`;case N.IntegerMultipleOf:return`Expected integer to be a multiple of ${$.schema.multipleOf}`;case N.Integer:return"Expected integer";case N.IntersectUnevaluatedProperties:return"Unexpected property";case N.Intersect:return"Expected all values to match";case N.Iterator:return"Expected Iterator";case N.Literal:return`Expected ${typeof $.schema.const==="string"?`'${$.schema.const}'`:$.schema.const}`;case N.Never:return"Never";case N.Not:return"Value should not match";case N.Null:return"Expected null";case N.NumberExclusiveMaximum:return`Expected number to be less than ${$.schema.exclusiveMaximum}`;case N.NumberExclusiveMinimum:return`Expected number to be greater than ${$.schema.exclusiveMinimum}`;case N.NumberMaximum:return`Expected number to be less or equal to ${$.schema.maximum}`;case N.NumberMinimum:return`Expected number to be greater or equal to ${$.schema.minimum}`;case N.NumberMultipleOf:return`Expected number to be a multiple of ${$.schema.multipleOf}`;case N.Number:return"Expected number";case N.Object:return"Expected object";case N.ObjectAdditionalProperties:return"Unexpected property";case N.ObjectMaxProperties:return`Expected object to have no more than ${$.schema.maxProperties} properties`;case N.ObjectMinProperties:return`Expected object to have at least ${$.schema.minProperties} properties`;case N.ObjectRequiredProperty:return"Required property";case N.Promise:return"Expected Promise";case N.RegExp:return"Expected string to match regular expression";case N.StringFormatUnknown:return`Unknown format '${$.schema.format}'`;case N.StringFormat:return`Expected string to match '${$.schema.format}' format`;case N.StringMaxLength:return`Expected string length less or equal to ${$.schema.maxLength}`;case N.StringMinLength:return`Expected string length greater or equal to ${$.schema.minLength}`;case N.StringPattern:return`Expected string to match '${$.schema.pattern}'`;case N.String:return"Expected string";case N.Symbol:return"Expected symbol";case N.TupleLength:return`Expected tuple to have ${$.schema.maxItems||0} elements`;case N.Tuple:return"Expected tuple";case N.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${$.schema.maxByteLength}`;case N.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${$.schema.minByteLength}`;case N.Uint8Array:return"Expected Uint8Array";case N.Undefined:return"Expected undefined";case N.Union:return"Expected union value";case N.Void:return"Expected void";case N.Kind:return`Expected kind '${$.schema[A]}'`;default:return"Unknown error type"}}function FX(){return t5}var t5=n5;var s5=function($,X){const Z=X.find((Q)=>Q.$id===$.$ref);if(Z===void 0)throw new jX($);return X0(Z,X)};function X0($,X){return $[A]==="This"||$[A]==="Ref"?s5($,X):$}class jX extends m{constructor($){super(`Unable to dereference schema with \$id '${$.$id}'`);this.schema=$}}function*$7($){const X=$===0?1:Math.ceil(Math.floor(Math.log2($)+1)/8);for(let Z=0;Z<X;Z++)yield $>>8*(X-1-Z)&255}var X7=function($){n0(_1.Array);for(let X of $)N$(X)},Z7=function($){n0(_1.Boolean),n0($?1:0)},Q7=function($){n0(_1.BigInt),bX.setBigInt64(0,$);for(let X of RX)n0(X)},W7=function($){n0(_1.Date),N$($.getTime())},Y7=function($){n0(_1.Null)},J7=function($){n0(_1.Number),bX.setFloat64(0,$);for(let X of RX)n0(X)},z7=function($){n0(_1.Object);for(let X of globalThis.Object.getOwnPropertyNames($).sort())N$(X),N$($[X])},M7=function($){n0(_1.String);for(let X=0;X<$.length;X++)for(let Z of $7($.charCodeAt(X)))n0(Z)},q7=function($){n0(_1.Symbol),N$($.description)},B7=function($){n0(_1.Uint8Array);for(let X=0;X<$.length;X++)n0($[X])},w7=function($){return n0(_1.Undefined)},N$=function($){if(d($))return X7($);if(n1($))return Z7($);if(p0($))return Q7($);if(G1($))return W7($);if(q2($))return Y7($);if(g($))return J7($);if(H0($))return z7($);if(i($))return M7($);if(Y1($))return q7($);if(z$($))return B7($);if(F0($))return w7($);throw new CX($)},n0=function($){A$=A$^e5[$],A$=A$*r5%a5};function V2($){return A$=BigInt("14695981039346656037"),N$($),A$}class CX extends m{constructor($){super("Unable to hash value");this.value=$}}var _1;(function($){$[$.Undefined=0]="Undefined",$[$.Null=1]="Null",$[$.Boolean=2]="Boolean",$[$.Number=3]="Number",$[$.String=4]="String",$[$.Object=5]="Object",$[$.Array=6]="Array",$[$.Date=7]="Date",$[$.Uint8Array=8]="Uint8Array",$[$.Symbol=9]="Symbol",$[$.BigInt=10]="BigInt"})(_1||(_1={}));var A$=BigInt("14695981039346656037"),[r5,a5]=[BigInt("1099511628211"),BigInt("2")**BigInt("64")],e5=Array.from({length:256}).map(($,X)=>BigInt(X)),KX=new Float64Array(1),bX=new DataView(KX.buffer),RX=new Uint8Array(KX.buffer);var D2=function($){return $.replace(/~/g,"~0").replace(/\//g,"~1")},o=function($){return $!==void 0},K=function($,X,Z,Q){return{type:$,schema:X,path:Z,value:Q,message:FX()({errorType:$,path:Z,schema:X,value:Q})}};function*U7($,X,Z,Q){}function*G7($,X,Z,Q){if(!d(Q))return yield K(N.Array,$,Z,Q);if(o($.minItems)&&!(Q.length>=$.minItems))yield K(N.ArrayMinItems,$,Z,Q);if(o($.maxItems)&&!(Q.length<=$.maxItems))yield K(N.ArrayMaxItems,$,Z,Q);for(let J=0;J<Q.length;J++)yield*h0($.items,X,`${Z}/${J}`,Q[J]);if($.uniqueItems===!0&&!function(){const J=new Set;for(let z of Q){const B=V2(z);if(J.has(B))return!1;else J.add(B)}return!0}())yield K(N.ArrayUniqueItems,$,Z,Q);if(!(o($.contains)||o($.minContains)||o($.maxContains)))return;const W=o($.contains)?$.contains:z0(),Y=Q.reduce((J,z,B)=>h0(W,X,`${Z}${B}`,z).next().done===!0?J+1:J,0);if(Y===0)yield K(N.ArrayContains,$,Z,Q);if(g($.minContains)&&Y<$.minContains)yield K(N.ArrayMinContains,$,Z,Q);if(g($.maxContains)&&Y>$.maxContains)yield K(N.ArrayMaxContains,$,Z,Q)}function*H7($,X,Z,Q){if(!S8(Q))yield K(N.AsyncIterator,$,Z,Q)}function*A7($,X,Z,Q){if(!p0(Q))return yield K(N.BigInt,$,Z,Q);if(o($.exclusiveMaximum)&&!(Q<$.exclusiveMaximum))yield K(N.BigIntExclusiveMaximum,$,Z,Q);if(o($.exclusiveMinimum)&&!(Q>$.exclusiveMinimum))yield K(N.BigIntExclusiveMinimum,$,Z,Q);if(o($.maximum)&&!(Q<=$.maximum))yield K(N.BigIntMaximum,$,Z,Q);if(o($.minimum)&&!(Q>=$.minimum))yield K(N.BigIntMinimum,$,Z,Q);if(o($.multipleOf)&&Q%$.multipleOf!==BigInt(0))yield K(N.BigIntMultipleOf,$,Z,Q)}function*N7($,X,Z,Q){if(!n1(Q))yield K(N.Boolean,$,Z,Q)}function*D7($,X,Z,Q){yield*h0($.returns,X,Z,Q.prototype)}function*P7($,X,Z,Q){if(!G1(Q))return yield K(N.Date,$,Z,Q);if(o($.exclusiveMaximumTimestamp)&&!(Q.getTime()<$.exclusiveMaximumTimestamp))yield K(N.DateExclusiveMaximumTimestamp,$,Z,Q);if(o($.exclusiveMinimumTimestamp)&&!(Q.getTime()>$.exclusiveMinimumTimestamp))yield K(N.DateExclusiveMinimumTimestamp,$,Z,Q);if(o($.maximumTimestamp)&&!(Q.getTime()<=$.maximumTimestamp))yield K(N.DateMaximumTimestamp,$,Z,Q);if(o($.minimumTimestamp)&&!(Q.getTime()>=$.minimumTimestamp))yield K(N.DateMinimumTimestamp,$,Z,Q);if(o($.multipleOfTimestamp)&&Q.getTime()%$.multipleOfTimestamp!==0)yield K(N.DateMultipleOfTimestamp,$,Z,Q)}function*O7($,X,Z,Q){if(!K8(Q))yield K(N.Function,$,Z,Q)}function*L7($,X,Z,Q){if(!C8(Q))return yield K(N.Integer,$,Z,Q);if(o($.exclusiveMaximum)&&!(Q<$.exclusiveMaximum))yield K(N.IntegerExclusiveMaximum,$,Z,Q);if(o($.exclusiveMinimum)&&!(Q>$.exclusiveMinimum))yield K(N.IntegerExclusiveMinimum,$,Z,Q);if(o($.maximum)&&!(Q<=$.maximum))yield K(N.IntegerMaximum,$,Z,Q);if(o($.minimum)&&!(Q>=$.minimum))yield K(N.IntegerMinimum,$,Z,Q);if(o($.multipleOf)&&Q%$.multipleOf!==0)yield K(N.IntegerMultipleOf,$,Z,Q)}function*_7($,X,Z,Q){for(let W of $.allOf){const Y=h0(W,X,Z,Q).next();if(!Y.done)yield K(N.Intersect,$,Z,Q),yield Y.value}if($.unevaluatedProperties===!1){const W=new RegExp(A2($));for(let Y of Object.getOwnPropertyNames(Q))if(!W.test(Y))yield K(N.IntersectUnevaluatedProperties,$,`${Z}/${Y}`,Q)}if(typeof $.unevaluatedProperties==="object"){const W=new RegExp(A2($));for(let Y of Object.getOwnPropertyNames(Q))if(!W.test(Y)){const J=h0($.unevaluatedProperties,X,`${Z}/${Y}`,Q[Y]).next();if(!J.done)yield J.value}}}function*S7($,X,Z,Q){if(!F8(Q))yield K(N.Iterator,$,Z,Q)}function*F7($,X,Z,Q){if(Q!==$.const)yield K(N.Literal,$,Z,Q)}function*j7($,X,Z,Q){yield K(N.Never,$,Z,Q)}function*C7($,X,Z,Q){if(h0($.not,X,Z,Q).next().done===!0)yield K(N.Not,$,Z,Q)}function*K7($,X,Z,Q){if(!q2(Q))yield K(N.Null,$,Z,Q)}function*b7($,X,Z,Q){if(!R0.IsNumberLike(Q))return yield K(N.Number,$,Z,Q);if(o($.exclusiveMaximum)&&!(Q<$.exclusiveMaximum))yield K(N.NumberExclusiveMaximum,$,Z,Q);if(o($.exclusiveMinimum)&&!(Q>$.exclusiveMinimum))yield K(N.NumberExclusiveMinimum,$,Z,Q);if(o($.maximum)&&!(Q<=$.maximum))yield K(N.NumberMaximum,$,Z,Q);if(o($.minimum)&&!(Q>=$.minimum))yield K(N.NumberMinimum,$,Z,Q);if(o($.multipleOf)&&Q%$.multipleOf!==0)yield K(N.NumberMultipleOf,$,Z,Q)}function*R7($,X,Z,Q){if(!R0.IsObjectLike(Q))return yield K(N.Object,$,Z,Q);if(o($.minProperties)&&!(Object.getOwnPropertyNames(Q).length>=$.minProperties))yield K(N.ObjectMinProperties,$,Z,Q);if(o($.maxProperties)&&!(Object.getOwnPropertyNames(Q).length<=$.maxProperties))yield K(N.ObjectMaxProperties,$,Z,Q);const W=Array.isArray($.required)?$.required:[],Y=Object.getOwnPropertyNames($.properties),J=Object.getOwnPropertyNames(Q);for(let z of W){if(J.includes(z))continue;yield K(N.ObjectRequiredProperty,$.properties[z],`${Z}/${D2(z)}`,void 0)}if($.additionalProperties===!1){for(let z of J)if(!Y.includes(z))yield K(N.ObjectAdditionalProperties,$,`${Z}/${D2(z)}`,Q[z])}if(typeof $.additionalProperties==="object")for(let z of J){if(Y.includes(z))continue;yield*h0($.additionalProperties,X,`${Z}/${D2(z)}`,Q[z])}for(let z of Y){const B=$.properties[z];if($.required&&$.required.includes(z)){if(yield*h0(B,X,`${Z}/${D2(z)}`,Q[z]),N2($)&&!(z in Q))yield K(N.ObjectRequiredProperty,B,`${Z}/${D2(z)}`,void 0)}else if(R0.IsExactOptionalProperty(Q,z))yield*h0(B,X,`${Z}/${D2(z)}`,Q[z])}}function*V7($,X,Z,Q){if(!j8(Q))yield K(N.Promise,$,Z,Q)}function*E7($,X,Z,Q){if(!R0.IsRecordLike(Q))return yield K(N.Object,$,Z,Q);if(o($.minProperties)&&!(Object.getOwnPropertyNames(Q).length>=$.minProperties))yield K(N.ObjectMinProperties,$,Z,Q);if(o($.maxProperties)&&!(Object.getOwnPropertyNames(Q).length<=$.maxProperties))yield K(N.ObjectMaxProperties,$,Z,Q);const[W,Y]=Object.entries($.patternProperties)[0],J=new RegExp(W);for(let[z,B]of Object.entries(Q))if(J.test(z))yield*h0(Y,X,`${Z}/${D2(z)}`,B);if(typeof $.additionalProperties==="object"){for(let[z,B]of Object.entries(Q))if(!J.test(z))yield*h0($.additionalProperties,X,`${Z}/${D2(z)}`,B)}if($.additionalProperties===!1)for(let[z,B]of Object.entries(Q)){if(J.test(z))continue;return yield K(N.ObjectAdditionalProperties,$,`${Z}/${D2(z)}`,B)}}function*I7($,X,Z,Q){yield*h0(X0($,X),X,Z,Q)}function*x7($,X,Z,Q){if(!i(Q))return yield K(N.String,$,Z,Q);if(o($.minLength)&&!(Q.length>=$.minLength))yield K(N.StringMinLength,$,Z,Q);if(o($.maxLength)&&!(Q.length<=$.maxLength))yield K(N.StringMaxLength,$,Z,Q);if(!new RegExp($.source,$.flags).test(Q))return yield K(N.RegExp,$,Z,Q)}function*k7($,X,Z,Q){if(!i(Q))return yield K(N.String,$,Z,Q);if(o($.minLength)&&!(Q.length>=$.minLength))yield K(N.StringMinLength,$,Z,Q);if(o($.maxLength)&&!(Q.length<=$.maxLength))yield K(N.StringMaxLength,$,Z,Q);if(i($.pattern)){if(!new RegExp($.pattern).test(Q))yield K(N.StringPattern,$,Z,Q)}if(i($.format)){if(!A0.Has($.format))yield K(N.StringFormatUnknown,$,Z,Q);else if(!A0.Get($.format)(Q))yield K(N.StringFormat,$,Z,Q)}}function*T7($,X,Z,Q){if(!Y1(Q))yield K(N.Symbol,$,Z,Q)}function*g7($,X,Z,Q){if(!i(Q))return yield K(N.String,$,Z,Q);if(!new RegExp($.pattern).test(Q))yield K(N.StringPattern,$,Z,Q)}function*f7($,X,Z,Q){yield*h0(X0($,X),X,Z,Q)}function*y7($,X,Z,Q){if(!d(Q))return yield K(N.Tuple,$,Z,Q);if($.items===void 0&&Q.length!==0)return yield K(N.TupleLength,$,Z,Q);if(Q.length!==$.maxItems)return yield K(N.TupleLength,$,Z,Q);if(!$.items)return;for(let W=0;W<$.items.length;W++)yield*h0($.items[W],X,`${Z}/${W}`,Q[W])}function*d7($,X,Z,Q){if(!F0(Q))yield K(N.Undefined,$,Z,Q)}function*v7($,X,Z,Q){let W=0;for(let Y of $.anyOf){const J=[...h0(Y,X,Z,Q)];if(J.length===0)return;W+=J.length}if(W>0)yield K(N.Union,$,Z,Q)}function*p7($,X,Z,Q){if(!z$(Q))return yield K(N.Uint8Array,$,Z,Q);if(o($.maxByteLength)&&!(Q.length<=$.maxByteLength))yield K(N.Uint8ArrayMaxByteLength,$,Z,Q);if(o($.minByteLength)&&!(Q.length>=$.minByteLength))yield K(N.Uint8ArrayMinByteLength,$,Z,Q)}function*h7($,X,Z,Q){}function*m7($,X,Z,Q){if(!R0.IsVoidLike(Q))yield K(N.Void,$,Z,Q)}function*u7($,X,Z,Q){if(!V0.Get($[A])($,Q))yield K(N.Kind,$,Z,Q)}function*h0($,X,Z,Q){const W=o($.$id)?[...X,$]:X,Y=$;switch(Y[A]){case"Any":return yield*U7(Y,W,Z,Q);case"Array":return yield*G7(Y,W,Z,Q);case"AsyncIterator":return yield*H7(Y,W,Z,Q);case"BigInt":return yield*A7(Y,W,Z,Q);case"Boolean":return yield*N7(Y,W,Z,Q);case"Constructor":return yield*D7(Y,W,Z,Q);case"Date":return yield*P7(Y,W,Z,Q);case"Function":return yield*O7(Y,W,Z,Q);case"Integer":return yield*L7(Y,W,Z,Q);case"Intersect":return yield*_7(Y,W,Z,Q);case"Iterator":return yield*S7(Y,W,Z,Q);case"Literal":return yield*F7(Y,W,Z,Q);case"Never":return yield*j7(Y,W,Z,Q);case"Not":return yield*C7(Y,W,Z,Q);case"Null":return yield*K7(Y,W,Z,Q);case"Number":return yield*b7(Y,W,Z,Q);case"Object":return yield*R7(Y,W,Z,Q);case"Promise":return yield*V7(Y,W,Z,Q);case"Record":return yield*E7(Y,W,Z,Q);case"Ref":return yield*I7(Y,W,Z,Q);case"RegExp":return yield*x7(Y,W,Z,Q);case"String":return yield*k7(Y,W,Z,Q);case"Symbol":return yield*T7(Y,W,Z,Q);case"TemplateLiteral":return yield*g7(Y,W,Z,Q);case"This":return yield*f7(Y,W,Z,Q);case"Tuple":return yield*y7(Y,W,Z,Q);case"Undefined":return yield*d7(Y,W,Z,Q);case"Union":return yield*v7(Y,W,Z,Q);case"Uint8Array":return yield*p7(Y,W,Z,Q);case"Unknown":return yield*h7(Y,W,Z,Q);case"Void":return yield*m7(Y,W,Z,Q);default:if(!V0.Has(Y[A]))throw new VX($);return yield*u7(Y,W,Z,Q)}}function i$(...$){const X=$.length===3?h0($[0],$[1],"",$[2]):h0($[0],[],"",$[1]);return new x8(X)}var N;(function($){$[$.ArrayContains=0]="ArrayContains",$[$.ArrayMaxContains=1]="ArrayMaxContains",$[$.ArrayMaxItems=2]="ArrayMaxItems",$[$.ArrayMinContains=3]="ArrayMinContains",$[$.ArrayMinItems=4]="ArrayMinItems",$[$.ArrayUniqueItems=5]="ArrayUniqueItems",$[$.Array=6]="Array",$[$.AsyncIterator=7]="AsyncIterator",$[$.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",$[$.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",$[$.BigIntMaximum=10]="BigIntMaximum",$[$.BigIntMinimum=11]="BigIntMinimum",$[$.BigIntMultipleOf=12]="BigIntMultipleOf",$[$.BigInt=13]="BigInt",$[$.Boolean=14]="Boolean",$[$.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",$[$.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",$[$.DateMaximumTimestamp=17]="DateMaximumTimestamp",$[$.DateMinimumTimestamp=18]="DateMinimumTimestamp",$[$.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",$[$.Date=20]="Date",$[$.Function=21]="Function",$[$.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",$[$.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",$[$.IntegerMaximum=24]="IntegerMaximum",$[$.IntegerMinimum=25]="IntegerMinimum",$[$.IntegerMultipleOf=26]="IntegerMultipleOf",$[$.Integer=27]="Integer",$[$.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",$[$.Intersect=29]="Intersect",$[$.Iterator=30]="Iterator",$[$.Kind=31]="Kind",$[$.Literal=32]="Literal",$[$.Never=33]="Never",$[$.Not=34]="Not",$[$.Null=35]="Null",$[$.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",$[$.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",$[$.NumberMaximum=38]="NumberMaximum",$[$.NumberMinimum=39]="NumberMinimum",$[$.NumberMultipleOf=40]="NumberMultipleOf",$[$.Number=41]="Number",$[$.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",$[$.ObjectMaxProperties=43]="ObjectMaxProperties",$[$.ObjectMinProperties=44]="ObjectMinProperties",$[$.ObjectRequiredProperty=45]="ObjectRequiredProperty",$[$.Object=46]="Object",$[$.Promise=47]="Promise",$[$.RegExp=48]="RegExp",$[$.StringFormatUnknown=49]="StringFormatUnknown",$[$.StringFormat=50]="StringFormat",$[$.StringMaxLength=51]="StringMaxLength",$[$.StringMinLength=52]="StringMinLength",$[$.StringPattern=53]="StringPattern",$[$.String=54]="String",$[$.Symbol=55]="Symbol",$[$.TupleLength=56]="TupleLength",$[$.Tuple=57]="Tuple",$[$.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",$[$.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",$[$.Uint8Array=60]="Uint8Array",$[$.Undefined=61]="Undefined",$[$.Union=62]="Union",$[$.Void=63]="Void"})(N||(N={}));class VX extends m{constructor($){super("Unknown type");this.schema=$}}class x8{constructor($){this.iterator=$}[Symbol.iterator](){return this.iterator}First(){const $=this.iterator.next();return $.done?void 0:$.value}}function P2($={}){return{...$,[A]:"Any"}}function e1($={}){return{...$,[A]:"Unknown"}}var U={};f2(U,{TypeGuardUnknownTypeError:()=>EX,IsVoid:()=>HZ,IsUnsafe:()=>GZ,IsUnknown:()=>UZ,IsUnionLiteral:()=>r7,IsUnion:()=>R6,IsUndefined:()=>BZ,IsUint8Array:()=>wZ,IsTuple:()=>qZ,IsTransform:()=>P0,IsThis:()=>MZ,IsTemplateLiteral:()=>zZ,IsSymbol:()=>JZ,IsString:()=>YZ,IsSchema:()=>u,IsRegExp:()=>WZ,IsRef:()=>QZ,IsRecursive:()=>s7,IsRecord:()=>ZZ,IsReadonly:()=>o7,IsProperties:()=>b6,IsPromise:()=>XZ,IsOptional:()=>n7,IsObject:()=>$Z,IsNumber:()=>eX,IsNull:()=>aX,IsNot:()=>rX,IsNever:()=>sX,IsMappedResult:()=>tX,IsMappedKey:()=>nX,IsLiteralValue:()=>oX,IsLiteralString:()=>iX,IsLiteralNumber:()=>lX,IsLiteralBoolean:()=>t7,IsLiteral:()=>o$,IsKindOf:()=>r,IsKind:()=>AZ,IsIterator:()=>cX,IsIntersect:()=>uX,IsInteger:()=>mX,IsFunction:()=>hX,IsDate:()=>pX,IsConstructor:()=>vX,IsBoolean:()=>dX,IsBigInt:()=>yX,IsAsyncIterator:()=>fX,IsArray:()=>gX,IsAny:()=>TX});var IX=function($){try{return new RegExp($),!0}catch{return!1}},C6=function($){if(!D0($))return!1;for(let X=0;X<$.length;X++){const Z=$.charCodeAt(X);if(Z>=7&&Z<=13||Z===27||Z===127)return!1}return!0},xX=function($){return K6($)||u($)},l$=function($){return j0($)||j$($)},G0=function($){return j0($)||d1($)},K6=function($){return j0($)||b2($)},B0=function($){return j0($)||D0($)},i7=function($){return j0($)||D0($)&&C6($)&&IX($)},l7=function($){return j0($)||D0($)&&C6($)},kX=function($){return j0($)||u($)};function o7($){return N0($)&&$[t1]==="Readonly"}function n7($){return N0($)&&$[o0]==="Optional"}function TX($){return r($,"Any")&&B0($.$id)}function gX($){return r($,"Array")&&$.type==="array"&&B0($.$id)&&u($.items)&&G0($.minItems)&&G0($.maxItems)&&K6($.uniqueItems)&&kX($.contains)&&G0($.minContains)&&G0($.maxContains)}function fX($){return r($,"AsyncIterator")&&$.type==="AsyncIterator"&&B0($.$id)&&u($.items)}function yX($){return r($,"BigInt")&&$.type==="bigint"&&B0($.$id)&&l$($.exclusiveMaximum)&&l$($.exclusiveMinimum)&&l$($.maximum)&&l$($.minimum)&&l$($.multipleOf)}function dX($){return r($,"Boolean")&&$.type==="boolean"&&B0($.$id)}function vX($){return r($,"Constructor")&&$.type==="Constructor"&&B0($.$id)&&J1($.parameters)&&$.parameters.every((X)=>u(X))&&u($.returns)}function pX($){return r($,"Date")&&$.type==="Date"&&B0($.$id)&&G0($.exclusiveMaximumTimestamp)&&G0($.exclusiveMinimumTimestamp)&&G0($.maximumTimestamp)&&G0($.minimumTimestamp)&&G0($.multipleOfTimestamp)}function hX($){return r($,"Function")&&$.type==="Function"&&B0($.$id)&&J1($.parameters)&&$.parameters.every((X)=>u(X))&&u($.returns)}function mX($){return r($,"Integer")&&$.type==="integer"&&B0($.$id)&&G0($.exclusiveMaximum)&&G0($.exclusiveMinimum)&&G0($.maximum)&&G0($.minimum)&&G0($.multipleOf)}function b6($){return N0($)&&Object.entries($).every(([X,Z])=>C6(X)&&u(Z))}function uX($){return r($,"Intersect")&&(D0($.type)&&$.type!=="object"?!1:!0)&&J1($.allOf)&&$.allOf.every((X)=>u(X)&&!P0(X))&&B0($.type)&&(K6($.unevaluatedProperties)||kX($.unevaluatedProperties))&&B0($.$id)}function cX($){return r($,"Iterator")&&$.type==="Iterator"&&B0($.$id)&&u($.items)}function r($,X){return N0($)&&A in $&&$[A]===X}function iX($){return o$($)&&D0($.const)}function lX($){return o$($)&&d1($.const)}function t7($){return o$($)&&b2($.const)}function o$($){return r($,"Literal")&&B0($.$id)&&oX($.const)}function oX($){return b2($)||d1($)||D0($)}function nX($){return r($,"MappedKey")&&J1($.keys)&&$.keys.every((X)=>d1(X)||D0(X))}function tX($){return r($,"MappedResult")&&b6($.properties)}function sX($){return r($,"Never")&&N0($.not)&&Object.getOwnPropertyNames($.not).length===0}function rX($){return r($,"Not")&&u($.not)}function aX($){return r($,"Null")&&$.type==="null"&&B0($.$id)}function eX($){return r($,"Number")&&$.type==="number"&&B0($.$id)&&G0($.exclusiveMaximum)&&G0($.exclusiveMinimum)&&G0($.maximum)&&G0($.minimum)&&G0($.multipleOf)}function $Z($){return r($,"Object")&&$.type==="object"&&B0($.$id)&&b6($.properties)&&xX($.additionalProperties)&&G0($.minProperties)&&G0($.maxProperties)}function XZ($){return r($,"Promise")&&$.type==="Promise"&&B0($.$id)&&u($.item)}function ZZ($){return r($,"Record")&&$.type==="object"&&B0($.$id)&&xX($.additionalProperties)&&N0($.patternProperties)&&((X)=>{const Z=Object.getOwnPropertyNames(X.patternProperties);return Z.length===1&&IX(Z[0])&&N0(X.patternProperties)&&u(X.patternProperties[Z[0]])})($)}function s7($){return N0($)&&A1 in $&&$[A1]==="Recursive"}function QZ($){return r($,"Ref")&&B0($.$id)&&D0($.$ref)}function WZ($){return r($,"RegExp")&&B0($.$id)&&D0($.source)&&D0($.flags)&&G0($.maxLength)&&G0($.minLength)}function YZ($){return r($,"String")&&$.type==="string"&&B0($.$id)&&G0($.minLength)&&G0($.maxLength)&&i7($.pattern)&&l7($.format)}function JZ($){return r($,"Symbol")&&$.type==="symbol"&&B0($.$id)}function zZ($){return r($,"TemplateLiteral")&&$.type==="string"&&D0($.pattern)&&$.pattern[0]==="^"&&$.pattern[$.pattern.length-1]==="$"}function MZ($){return r($,"This")&&B0($.$id)&&D0($.$ref)}function P0($){return N0($)&&S0 in $}function qZ($){return r($,"Tuple")&&$.type==="array"&&B0($.$id)&&d1($.minItems)&&d1($.maxItems)&&$.minItems===$.maxItems&&(j0($.items)&&j0($.additionalItems)&&$.minItems===0||J1($.items)&&$.items.every((X)=>u(X)))}function BZ($){return r($,"Undefined")&&$.type==="undefined"&&B0($.$id)}function r7($){return R6($)&&$.anyOf.every((X)=>iX(X)||lX(X))}function R6($){return r($,"Union")&&B0($.$id)&&N0($)&&J1($.anyOf)&&$.anyOf.every((X)=>u(X))}function wZ($){return r($,"Uint8Array")&&$.type==="Uint8Array"&&B0($.$id)&&G0($.minByteLength)&&G0($.maxByteLength)}function UZ($){return r($,"Unknown")&&B0($.$id)}function GZ($){return r($,"Unsafe")}function HZ($){return r($,"Void")&&$.type==="void"&&B0($.$id)}function AZ($){return N0($)&&A in $&&D0($[A])&&!c7.includes($[A])}function u($){return N0($)&&(TX($)||gX($)||dX($)||yX($)||fX($)||vX($)||pX($)||hX($)||mX($)||uX($)||cX($)||o$($)||nX($)||tX($)||sX($)||rX($)||aX($)||eX($)||$Z($)||XZ($)||ZZ($)||QZ($)||WZ($)||YZ($)||JZ($)||zZ($)||MZ($)||qZ($)||BZ($)||R6($)||wZ($)||UZ($)||GZ($)||HZ($)||AZ($))}class EX extends m{}var c7=["Any","Array","AsyncIterator","BigInt","Boolean","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];var I1=function($){return $===P.False?$:P.True},D$=function($){throw new LZ($)},I0=function($){return U.IsNever($)||U.IsIntersect($)||U.IsUnion($)||U.IsUnknown($)||U.IsAny($)},x0=function($,X){return U.IsNever(X)?FZ($,X):U.IsIntersect(X)?k8($,X):U.IsUnion(X)?k6($,X):U.IsUnknown(X)?bZ($,X):U.IsAny(X)?x6($,X):D$("StructuralRight")},x6=function($,X){return P.True},a7=function($,X){return U.IsIntersect(X)?k8($,X):U.IsUnion(X)&&X.anyOf.some((Z)=>U.IsAny(Z)||U.IsUnknown(Z))?P.True:U.IsUnion(X)?P.Union:U.IsUnknown(X)?P.True:U.IsAny(X)?P.True:P.Union},e7=function($,X){return U.IsUnknown($)?P.False:U.IsAny($)?P.Union:U.IsNever($)?P.True:P.False},$9=function($,X){return U.IsObject(X)&&T8(X)?P.True:I0(X)?x0($,X):!U.IsArray(X)?P.False:I1(w0($.items,X.items))},X9=function($,X){return I0(X)?x0($,X):!U.IsAsyncIterator(X)?P.False:I1(w0($.items,X.items))},Z9=function($,X){return I0(X)?x0($,X):U.IsObject(X)?t0($,X):U.IsRecord(X)?x1($,X):U.IsBigInt(X)?P.True:P.False},_Z=function($,X){return U.IsLiteralBoolean($)?P.True:U.IsBoolean($)?P.True:P.False},Q9=function($,X){return I0(X)?x0($,X):U.IsObject(X)?t0($,X):U.IsRecord(X)?x1($,X):U.IsBoolean(X)?P.True:P.False},W9=function($,X){return I0(X)?x0($,X):U.IsObject(X)?t0($,X):!U.IsConstructor(X)?P.False:$.parameters.length>X.parameters.length?P.False:!$.parameters.every((Z,Q)=>I1(w0(X.parameters[Q],Z))===P.True)?P.False:I1(w0($.returns,X.returns))},Y9=function($,X){return I0(X)?x0($,X):U.IsObject(X)?t0($,X):U.IsRecord(X)?x1($,X):U.IsDate(X)?P.True:P.False},J9=function($,X){return I0(X)?x0($,X):U.IsObject(X)?t0($,X):!U.IsFunction(X)?P.False:$.parameters.length>X.parameters.length?P.False:!$.parameters.every((Z,Q)=>I1(w0(X.parameters[Q],Z))===P.True)?P.False:I1(w0($.returns,X.returns))},SZ=function($,X){return U.IsLiteral($)&&z1.IsNumber($.const)?P.True:U.IsNumber($)||U.IsInteger($)?P.True:P.False},z9=function($,X){return U.IsInteger(X)||U.IsNumber(X)?P.True:I0(X)?x0($,X):U.IsObject(X)?t0($,X):U.IsRecord(X)?x1($,X):P.False},k8=function($,X){return X.allOf.every((Z)=>w0($,Z)===P.True)?P.True:P.False},M9=function($,X){return $.allOf.some((Z)=>w0(Z,X)===P.True)?P.True:P.False},q9=function($,X){return I0(X)?x0($,X):!U.IsIterator(X)?P.False:I1(w0($.items,X.items))},B9=function($,X){return U.IsLiteral(X)&&X.const===$.const?P.True:I0(X)?x0($,X):U.IsObject(X)?t0($,X):U.IsRecord(X)?x1($,X):U.IsString(X)?KZ($,X):U.IsNumber(X)?jZ($,X):U.IsInteger(X)?SZ($,X):U.IsBoolean(X)?_Z($,X):P.False},FZ=function($,X){return P.False},w9=function($,X){return P.True},NZ=function($){let[X,Z]=[$,0];while(!0){if(!U.IsNot(X))break;X=X.not,Z+=1}return Z%2===0?X:e1()},U9=function($,X){return U.IsNot($)?w0(NZ($),X):U.IsNot(X)?w0($,NZ(X)):D$("Invalid fallthrough for Not")},G9=function($,X){return I0(X)?x0($,X):U.IsObject(X)?t0($,X):U.IsRecord(X)?x1($,X):U.IsNull(X)?P.True:P.False},jZ=function($,X){return U.IsLiteralNumber($)?P.True:U.IsNumber($)||U.IsInteger($)?P.True:P.False},H9=function($,X){return I0(X)?x0($,X):U.IsObject(X)?t0($,X):U.IsRecord(X)?x1($,X):U.IsInteger(X)||U.IsNumber(X)?P.True:P.False},B1=function($,X){return Object.getOwnPropertyNames($.properties).length===X},DZ=function($){return T8($)},PZ=function($){return B1($,0)||B1($,1)&&"description"in $.properties&&U.IsUnion($.properties.description)&&$.properties.description.anyOf.length===2&&(U.IsString($.properties.description.anyOf[0])&&U.IsUndefined($.properties.description.anyOf[1])||U.IsString($.properties.description.anyOf[1])&&U.IsUndefined($.properties.description.anyOf[0]))},V6=function($){return B1($,0)},OZ=function($){return B1($,0)},A9=function($){return B1($,0)},N9=function($){return B1($,0)},D9=function($){return T8($)},P9=function($){const X=p1();return B1($,0)||B1($,1)&&"length"in $.properties&&I1(w0($.properties.length,X))===P.True},O9=function($){return B1($,0)},T8=function($){const X=p1();return B1($,0)||B1($,1)&&"length"in $.properties&&I1(w0($.properties.length,X))===P.True},L9=function($){const X=B2([P2()],P2());return B1($,0)||B1($,1)&&"then"in $.properties&&I1(w0($.properties.then,X))===P.True},CZ=function($,X){return w0($,X)===P.False?P.False:U.IsOptional($)&&!U.IsOptional(X)?P.False:P.True},t0=function($,X){return U.IsUnknown($)?P.False:U.IsAny($)?P.Union:U.IsNever($)||U.IsLiteralString($)&&DZ(X)||U.IsLiteralNumber($)&&V6(X)||U.IsLiteralBoolean($)&&OZ(X)||U.IsSymbol($)&&PZ(X)||U.IsBigInt($)&&A9(X)||U.IsString($)&&DZ(X)||U.IsSymbol($)&&PZ(X)||U.IsNumber($)&&V6(X)||U.IsInteger($)&&V6(X)||U.IsBoolean($)&&OZ(X)||U.IsUint8Array($)&&D9(X)||U.IsDate($)&&N9(X)||U.IsConstructor($)&&O9(X)||U.IsFunction($)&&P9(X)?P.True:U.IsRecord($)&&U.IsString(E6($))?(()=>{return X[A1]==="Record"?P.True:P.False})():U.IsRecord($)&&U.IsNumber(E6($))?(()=>{return B1(X,0)?P.True:P.False})():P.False},_9=function($,X){return I0(X)?x0($,X):U.IsRecord(X)?x1($,X):!U.IsObject(X)?P.False:(()=>{for(let Z of Object.getOwnPropertyNames(X.properties)){if(!(Z in $.properties)&&!U.IsOptional(X.properties[Z]))return P.False;if(U.IsOptional(X.properties[Z]))return P.True;if(CZ($.properties[Z],X.properties[Z])===P.False)return P.False}return P.True})()},S9=function($,X){return I0(X)?x0($,X):U.IsObject(X)&&L9(X)?P.True:!U.IsPromise(X)?P.False:I1(w0($.item,X.item))},E6=function($){return H2 in $.patternProperties?p1():(R2 in $.patternProperties)?O1():D$("Unknown record key pattern")},I6=function($){return H2 in $.patternProperties?$.patternProperties[H2]:(R2 in $.patternProperties)?$.patternProperties[R2]:D$("Unable to get record value schema")},x1=function($,X){const[Z,Q]=[E6(X),I6(X)];return U.IsLiteralString($)&&U.IsNumber(Z)&&I1(w0($,Q))===P.True?P.True:U.IsUint8Array($)&&U.IsNumber(Z)?w0($,Q):U.IsString($)&&U.IsNumber(Z)?w0($,Q):U.IsArray($)&&U.IsNumber(Z)?w0($,Q):U.IsObject($)?(()=>{for(let W of Object.getOwnPropertyNames($.properties))if(CZ(Q,$.properties[W])===P.False)return P.False;return P.True})():P.False},F9=function($,X){return I0(X)?x0($,X):U.IsObject(X)?t0($,X):!U.IsRecord(X)?P.False:w0(I6($),I6(X))},j9=function($,X){const Z=U.IsRegExp($)?O1():$,Q=U.IsRegExp(X)?O1():X;return w0(Z,Q)},KZ=function($,X){return U.IsLiteral($)&&z1.IsString($.const)?P.True:U.IsString($)?P.True:P.False},C9=function($,X){return I0(X)?x0($,X):U.IsObject(X)?t0($,X):U.IsRecord(X)?x1($,X):U.IsString(X)?P.True:P.False},K9=function($,X){return I0(X)?x0($,X):U.IsObject(X)?t0($,X):U.IsRecord(X)?x1($,X):U.IsSymbol(X)?P.True:P.False},b9=function($,X){return U.IsTemplateLiteral($)?w0(u2($),X):U.IsTemplateLiteral(X)?w0($,u2(X)):D$("Invalid fallthrough for TemplateLiteral")},R9=function($,X){return U.IsArray(X)&&$.items!==void 0&&$.items.every((Z)=>w0(Z,X.items)===P.True)},V9=function($,X){return U.IsNever($)?P.True:U.IsUnknown($)?P.False:U.IsAny($)?P.Union:P.False},E9=function($,X){return I0(X)?x0($,X):U.IsObject(X)&&T8(X)?P.True:U.IsArray(X)&&R9($,X)?P.True:!U.IsTuple(X)?P.False:z1.IsUndefined($.items)&&!z1.IsUndefined(X.items)||!z1.IsUndefined($.items)&&z1.IsUndefined(X.items)?P.False:z1.IsUndefined($.items)&&!z1.IsUndefined(X.items)?P.True:$.items.every((Z,Q)=>w0(Z,X.items[Q])===P.True)?P.True:P.False},I9=function($,X){return I0(X)?x0($,X):U.IsObject(X)?t0($,X):U.IsRecord(X)?x1($,X):U.IsUint8Array(X)?P.True:P.False},x9=function($,X){return I0(X)?x0($,X):U.IsObject(X)?t0($,X):U.IsRecord(X)?x1($,X):U.IsVoid(X)?g9($,X):U.IsUndefined(X)?P.True:P.False},k6=function($,X){return X.anyOf.some((Z)=>w0($,Z)===P.True)?P.True:P.False},k9=function($,X){return $.anyOf.every((Z)=>w0(Z,X)===P.True)?P.True:P.False},bZ=function($,X){return P.True},T9=function($,X){return U.IsNever(X)?FZ($,X):U.IsIntersect(X)?k8($,X):U.IsUnion(X)?k6($,X):U.IsAny(X)?x6($,X):U.IsString(X)?KZ($,X):U.IsNumber(X)?jZ($,X):U.IsInteger(X)?SZ($,X):U.IsBoolean(X)?_Z($,X):U.IsArray(X)?e7($,X):U.IsTuple(X)?V9($,X):U.IsObject(X)?t0($,X):U.IsUnknown(X)?P.True:P.False},g9=function($,X){return U.IsUndefined($)?P.True:U.IsUndefined($)?P.True:P.False},f9=function($,X){return U.IsIntersect(X)?k8($,X):U.IsUnion(X)?k6($,X):U.IsUnknown(X)?bZ($,X):U.IsAny(X)?x6($,X):U.IsObject(X)?t0($,X):U.IsVoid(X)?P.True:P.False},w0=function($,X){return U.IsTemplateLiteral($)||U.IsTemplateLiteral(X)?b9($,X):U.IsRegExp($)||U.IsRegExp(X)?j9($,X):U.IsNot($)||U.IsNot(X)?U9($,X):U.IsAny($)?a7($,X):U.IsArray($)?$9($,X):U.IsBigInt($)?Z9($,X):U.IsBoolean($)?Q9($,X):U.IsAsyncIterator($)?X9($,X):U.IsConstructor($)?W9($,X):U.IsDate($)?Y9($,X):U.IsFunction($)?J9($,X):U.IsInteger($)?z9($,X):U.IsIntersect($)?M9($,X):U.IsIterator($)?q9($,X):U.IsLiteral($)?B9($,X):U.IsNever($)?w9($,X):U.IsNull($)?G9($,X):U.IsNumber($)?H9($,X):U.IsObject($)?_9($,X):U.IsRecord($)?F9($,X):U.IsString($)?C9($,X):U.IsSymbol($)?K9($,X):U.IsTuple($)?E9($,X):U.IsPromise($)?S9($,X):U.IsUint8Array($)?I9($,X):U.IsUndefined($)?x9($,X):U.IsUnion($)?k9($,X):U.IsUnknown($)?T9($,X):U.IsVoid($)?f9($,X):D$(`Unknown left type operand '${$[A]}'`)};function E2($,X){return w0($,X)}class LZ extends m{}var P;(function($){$[$.Union=0]="Union",$[$.True=1]="True",$[$.False=2]="False"})(P||(P={}));var y9=function($,X,Z,Q,W){const Y={};for(let J of globalThis.Object.getOwnPropertyNames($))Y[J]=i2($[J],X,Z,Q,W);return Y},d9=function($,X,Z,Q,W){return y9($.properties,X,Z,Q,W)};function RZ($,X,Z,Q,W){const Y=d9($,X,Z,Q,W);return e(Y)}var v9=function($,X,Z,Q){const W=E2($,X);return W===P.Union?M0([Z,Q]):W===P.True?Z:Q};function i2($,X,Z,Q,W={}){return _0($)?RZ($,X,Z,Q,W):N1($)?j(VZ($,X,Z,Q,W)):j(v9($,X,Z,Q),W)}var p9=function($,X,Z,Q,W){return{[$]:i2(W0($),X,Z,Q,W)}},h9=function($,X,Z,Q,W){return $.reduce((Y,J)=>{return{...Y,...p9(J,X,Z,Q,W)}},{})},m9=function($,X,Z,Q,W){return h9($.keys,X,Z,Q,W)};function VZ($,X,Z,Q,W){const Y=m9($,X,Z,Q,W);return e(Y)}var u9=function($){return $[A]==="Any"||$[A]==="Unknown"},n=function($){return $!==void 0},c9=function($,X,Z){return!0},i9=function($,X,Z){if(!d(Z))return!1;if(n($.minItems)&&!(Z.length>=$.minItems))return!1;if(n($.maxItems)&&!(Z.length<=$.maxItems))return!1;if(!Z.every((Y)=>m0($.items,X,Y)))return!1;if($.uniqueItems===!0&&!function(){const Y=new Set;for(let J of Z){const z=V2(J);if(Y.has(z))return!1;else Y.add(z)}return!0}())return!1;if(!(n($.contains)||g($.minContains)||g($.maxContains)))return!0;const Q=n($.contains)?$.contains:z0(),W=Z.reduce((Y,J)=>m0(Q,X,J)?Y+1:Y,0);if(W===0)return!1;if(g($.minContains)&&W<$.minContains)return!1;if(g($.maxContains)&&W>$.maxContains)return!1;return!0},l9=function($,X,Z){return S8(Z)},o9=function($,X,Z){if(!p0(Z))return!1;if(n($.exclusiveMaximum)&&!(Z<$.exclusiveMaximum))return!1;if(n($.exclusiveMinimum)&&!(Z>$.exclusiveMinimum))return!1;if(n($.maximum)&&!(Z<=$.maximum))return!1;if(n($.minimum)&&!(Z>=$.minimum))return!1;if(n($.multipleOf)&&Z%$.multipleOf!==BigInt(0))return!1;return!0},n9=function($,X,Z){return n1(Z)},t9=function($,X,Z){return m0($.returns,X,Z.prototype)},s9=function($,X,Z){if(!G1(Z))return!1;if(n($.exclusiveMaximumTimestamp)&&!(Z.getTime()<$.exclusiveMaximumTimestamp))return!1;if(n($.exclusiveMinimumTimestamp)&&!(Z.getTime()>$.exclusiveMinimumTimestamp))return!1;if(n($.maximumTimestamp)&&!(Z.getTime()<=$.maximumTimestamp))return!1;if(n($.minimumTimestamp)&&!(Z.getTime()>=$.minimumTimestamp))return!1;if(n($.multipleOfTimestamp)&&Z.getTime()%$.multipleOfTimestamp!==0)return!1;return!0},r9=function($,X,Z){return K8(Z)},a9=function($,X,Z){if(!C8(Z))return!1;if(n($.exclusiveMaximum)&&!(Z<$.exclusiveMaximum))return!1;if(n($.exclusiveMinimum)&&!(Z>$.exclusiveMinimum))return!1;if(n($.maximum)&&!(Z<=$.maximum))return!1;if(n($.minimum)&&!(Z>=$.minimum))return!1;if(n($.multipleOf)&&Z%$.multipleOf!==0)return!1;return!0},e9=function($,X,Z){const Q=$.allOf.every((W)=>m0(W,X,Z));if($.unevaluatedProperties===!1){const W=new RegExp(A2($)),Y=Object.getOwnPropertyNames(Z).every((J)=>W.test(J));return Q&&Y}else if(u($.unevaluatedProperties)){const W=new RegExp(A2($)),Y=Object.getOwnPropertyNames(Z).every((J)=>W.test(J)||m0($.unevaluatedProperties,X,Z[J]));return Q&&Y}else return Q},$Y=function($,X,Z){return F8(Z)},XY=function($,X,Z){return Z===$.const},ZY=function($,X,Z){return!1},QY=function($,X,Z){return!m0($.not,X,Z)},WY=function($,X,Z){return q2(Z)},YY=function($,X,Z){if(!R0.IsNumberLike(Z))return!1;if(n($.exclusiveMaximum)&&!(Z<$.exclusiveMaximum))return!1;if(n($.exclusiveMinimum)&&!(Z>$.exclusiveMinimum))return!1;if(n($.minimum)&&!(Z>=$.minimum))return!1;if(n($.maximum)&&!(Z<=$.maximum))return!1;if(n($.multipleOf)&&Z%$.multipleOf!==0)return!1;return!0},JY=function($,X,Z){if(!R0.IsObjectLike(Z))return!1;if(n($.minProperties)&&!(Object.getOwnPropertyNames(Z).length>=$.minProperties))return!1;if(n($.maxProperties)&&!(Object.getOwnPropertyNames(Z).length<=$.maxProperties))return!1;const Q=Object.getOwnPropertyNames($.properties);for(let W of Q){const Y=$.properties[W];if($.required&&$.required.includes(W)){if(!m0(Y,X,Z[W]))return!1;if((N2(Y)||u9(Y))&&!(W in Z))return!1}else if(R0.IsExactOptionalProperty(Z,W)&&!m0(Y,X,Z[W]))return!1}if($.additionalProperties===!1){const W=Object.getOwnPropertyNames(Z);if($.required&&$.required.length===Q.length&&W.length===Q.length)return!0;else return W.every((Y)=>Q.includes(Y))}else if(typeof $.additionalProperties==="object")return Object.getOwnPropertyNames(Z).every((Y)=>Q.includes(Y)||m0($.additionalProperties,X,Z[Y]));else return!0},zY=function($,X,Z){return j8(Z)},MY=function($,X,Z){if(!R0.IsRecordLike(Z))return!1;if(n($.minProperties)&&!(Object.getOwnPropertyNames(Z).length>=$.minProperties))return!1;if(n($.maxProperties)&&!(Object.getOwnPropertyNames(Z).length<=$.maxProperties))return!1;const[Q,W]=Object.entries($.patternProperties)[0],Y=new RegExp(Q),J=Object.entries(Z).every(([G,q])=>{return Y.test(G)?m0(W,X,q):!0}),z=typeof $.additionalProperties==="object"?Object.entries(Z).every(([G,q])=>{return!Y.test(G)?m0($.additionalProperties,X,q):!0}):!0,B=$.additionalProperties===!1?Object.getOwnPropertyNames(Z).every((G)=>{return Y.test(G)}):!0;return J&&z&&B},qY=function($,X,Z){return m0(X0($,X),X,Z)},BY=function($,X,Z){const Q=new RegExp($.source,$.flags);if(n($.minLength)){if(!(Z.length>=$.minLength))return!1}if(n($.maxLength)){if(!(Z.length<=$.maxLength))return!1}return Q.test(Z)},wY=function($,X,Z){if(!i(Z))return!1;if(n($.minLength)){if(!(Z.length>=$.minLength))return!1}if(n($.maxLength)){if(!(Z.length<=$.maxLength))return!1}if(n($.pattern)){if(!new RegExp($.pattern).test(Z))return!1}if(n($.format)){if(!A0.Has($.format))return!1;return A0.Get($.format)(Z)}return!0},UY=function($,X,Z){return Y1(Z)},GY=function($,X,Z){return i(Z)&&new RegExp($.pattern).test(Z)},HY=function($,X,Z){return m0(X0($,X),X,Z)},AY=function($,X,Z){if(!d(Z))return!1;if($.items===void 0&&Z.length!==0)return!1;if(Z.length!==$.maxItems)return!1;if(!$.items)return!0;for(let Q=0;Q<$.items.length;Q++)if(!m0($.items[Q],X,Z[Q]))return!1;return!0},NY=function($,X,Z){return F0(Z)},DY=function($,X,Z){return $.anyOf.some((Q)=>m0(Q,X,Z))},PY=function($,X,Z){if(!z$(Z))return!1;if(n($.maxByteLength)&&!(Z.length<=$.maxByteLength))return!1;if(n($.minByteLength)&&!(Z.length>=$.minByteLength))return!1;return!0},OY=function($,X,Z){return!0},LY=function($,X,Z){return R0.IsVoidLike(Z)},_Y=function($,X,Z){if(!V0.Has($[A]))return!1;return V0.Get($[A])($,Z)},m0=function($,X,Z){const Q=n($.$id)?[...X,$]:X,W=$;switch(W[A]){case"Any":return c9(W,Q,Z);case"Array":return i9(W,Q,Z);case"AsyncIterator":return l9(W,Q,Z);case"BigInt":return o9(W,Q,Z);case"Boolean":return n9(W,Q,Z);case"Constructor":return t9(W,Q,Z);case"Date":return s9(W,Q,Z);case"Function":return r9(W,Q,Z);case"Integer":return a9(W,Q,Z);case"Intersect":return e9(W,Q,Z);case"Iterator":return $Y(W,Q,Z);case"Literal":return XY(W,Q,Z);case"Never":return ZY(W,Q,Z);case"Not":return QY(W,Q,Z);case"Null":return WY(W,Q,Z);case"Number":return YY(W,Q,Z);case"Object":return JY(W,Q,Z);case"Promise":return zY(W,Q,Z);case"Record":return MY(W,Q,Z);case"Ref":return qY(W,Q,Z);case"RegExp":return BY(W,Q,Z);case"String":return wY(W,Q,Z);case"Symbol":return UY(W,Q,Z);case"TemplateLiteral":return GY(W,Q,Z);case"This":return HY(W,Q,Z);case"Tuple":return AY(W,Q,Z);case"Undefined":return NY(W,Q,Z);case"Union":return DY(W,Q,Z);case"Uint8Array":return PY(W,Q,Z);case"Unknown":return OY(W,Q,Z);case"Void":return LY(W,Q,Z);default:if(!V0.Has(W[A]))throw new EZ(W);return _Y(W,Q,Z)}};function Y0(...$){return $.length===3?m0($[0],$[1],$[2]):m0($[0],[],$[1])}class EZ extends m{constructor($){super("Unknown type");this.schema=$}}var SY=function($){const X={};for(let Z of Object.getOwnPropertyNames($))X[Z]=U0($[Z]);for(let Z of Object.getOwnPropertySymbols($))X[Z]=U0($[Z]);return X},FY=function($){return $.map((X)=>U0(X))},jY=function($){return $.slice()},CY=function($){return new Date($.toISOString())},KY=function($){return $};function U0($){if(d($))return FY($);if(G1($))return CY($);if(H0($))return SY($);if(V1($))return jY($);if(H1($))return KY($);throw new Error("ValueClone: Unable to clone value")}var Z0=function($){return typeof $==="function"?$:U0($)},bY=function($,X){if(l($,"default"))return Z0($.default);else return{}},RY=function($,X){if($.uniqueItems===!0&&!l($,"default"))throw new k1($,"Array with the uniqueItems constraint requires a default value");else if("contains"in $&&!l($,"default"))throw new k1($,"Array with the contains constraint requires a default value");else if("default"in $)return Z0($.default);else if($.minItems!==void 0)return Array.from({length:$.minItems}).map((Z)=>{return S1($.items,X)});else return[]},VY=function($,X){if(l($,"default"))return Z0($.default);else return async function*(){}()},EY=function($,X){if(l($,"default"))return Z0($.default);else return BigInt(0)},IY=function($,X){if(l($,"default"))return Z0($.default);else return!1},xY=function($,X){if(l($,"default"))return Z0($.default);else{const Z=S1($.returns,X);if(typeof Z==="object"&&!Array.isArray(Z))return class{constructor(){for(let[Q,W]of Object.entries(Z)){const Y=this;Y[Q]=W}}};else return class{}}},kY=function($,X){if(l($,"default"))return Z0($.default);else if($.minimumTimestamp!==void 0)return new Date($.minimumTimestamp);else return new Date},TY=function($,X){if(l($,"default"))return Z0($.default);else return()=>S1($.returns,X)},gY=function($,X){if(l($,"default"))return Z0($.default);else if($.minimum!==void 0)return $.minimum;else return 0},fY=function($,X){if(l($,"default"))return Z0($.default);else{const Z=$.allOf.reduce((Q,W)=>{const Y=S1(W,X);return typeof Y==="object"?{...Q,...Y}:Y},{});if(!Y0($,X,Z))throw new k1($,"Intersect produced invalid value. Consider using a default value.");return Z}},yY=function($,X){if(l($,"default"))return Z0($.default);else return function*(){}()},dY=function($,X){if(l($,"default"))return Z0($.default);else return $.const},vY=function($,X){if(l($,"default"))return Z0($.default);else throw new k1($,"Never types cannot be created. Consider using a default value.")},pY=function($,X){if(l($,"default"))return Z0($.default);else throw new k1($,"Not types must have a default value")},hY=function($,X){if(l($,"default"))return Z0($.default);else return null},mY=function($,X){if(l($,"default"))return Z0($.default);else if($.minimum!==void 0)return $.minimum;else return 0},uY=function($,X){if(l($,"default"))return Z0($.default);else{const Z=new Set($.required),Q={};for(let[W,Y]of Object.entries($.properties)){if(!Z.has(W))continue;Q[W]=S1(Y,X)}return Q}},cY=function($,X){if(l($,"default"))return Z0($.default);else return Promise.resolve(S1($.item,X))},iY=function($,X){const[Z,Q]=Object.entries($.patternProperties)[0];if(l($,"default"))return Z0($.default);else if(!(Z===R2||Z===H2)){const W=Z.slice(1,Z.length-1).split("|"),Y={};for(let J of W)Y[J]=S1(Q,X);return Y}else return{}},lY=function($,X){if(l($,"default"))return Z0($.default);else return S1(X0($,X),X)},oY=function($,X){if(l($,"default"))return Z0($.default);else throw new k1($,"RegExp types cannot be created. Consider using a default value.")},nY=function($,X){if($.pattern!==void 0)if(!l($,"default"))throw new k1($,"String types with patterns must specify a default value");else return Z0($.default);else if($.format!==void 0)if(!l($,"default"))throw new k1($,"String types with formats must specify a default value");else return Z0($.default);else if(l($,"default"))return Z0($.default);else if($.minLength!==void 0)return Array.from({length:$.minLength}).map(()=>" ").join("");else return""},tY=function($,X){if(l($,"default"))return Z0($.default);else if("value"in $)return Symbol.for($.value);else return Symbol()},sY=function($,X){if(l($,"default"))return Z0($.default);if(!V8($))throw new k1($,"Can only create template literals that produce a finite variants. Consider using a default value.");return H$($)[0]},rY=function($,X){if(IZ++>Y3)throw new k1($,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");if(l($,"default"))return Z0($.default);else return S1(X0($,X),X)},aY=function($,X){if(l($,"default"))return Z0($.default);if($.items===void 0)return[];else return Array.from({length:$.minItems}).map((Z,Q)=>S1($.items[Q],X))},eY=function($,X){if(l($,"default"))return Z0($.default);else return},$3=function($,X){if(l($,"default"))return Z0($.default);else if($.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");else return S1($.anyOf[0],X)},X3=function($,X){if(l($,"default"))return Z0($.default);else if($.minByteLength!==void 0)return new Uint8Array($.minByteLength);else return new Uint8Array(0)},Z3=function($,X){if(l($,"default"))return Z0($.default);else return{}},Q3=function($,X){if(l($,"default"))return Z0($.default);else return},W3=function($,X){if(l($,"default"))return Z0($.default);else throw new Error("User defined types must specify a default value")},S1=function($,X){const Z=i($.$id)?[...X,$]:X,Q=$;switch(Q[A]){case"Any":return bY(Q,Z);case"Array":return RY(Q,Z);case"AsyncIterator":return VY(Q,Z);case"BigInt":return EY(Q,Z);case"Boolean":return IY(Q,Z);case"Constructor":return xY(Q,Z);case"Date":return kY(Q,Z);case"Function":return TY(Q,Z);case"Integer":return gY(Q,Z);case"Intersect":return fY(Q,Z);case"Iterator":return yY(Q,Z);case"Literal":return dY(Q,Z);case"Never":return vY(Q,Z);case"Not":return pY(Q,Z);case"Null":return hY(Q,Z);case"Number":return mY(Q,Z);case"Object":return uY(Q,Z);case"Promise":return cY(Q,Z);case"Record":return iY(Q,Z);case"Ref":return lY(Q,Z);case"RegExp":return oY(Q,Z);case"String":return nY(Q,Z);case"Symbol":return tY(Q,Z);case"TemplateLiteral":return sY(Q,Z);case"This":return rY(Q,Z);case"Tuple":return aY(Q,Z);case"Undefined":return eY(Q,Z);case"Union":return $3(Q,Z);case"Uint8Array":return X3(Q,Z);case"Unknown":return Z3(Q,Z);case"Void":return Q3(Q,Z);default:if(!V0.Has(Q[A]))throw new k1(Q,"Unknown type");return W3(Q,Z)}};function F1(...$){return IZ=0,$.length===2?S1($[0],$[1]):S1($[0],[])}class k1 extends m{constructor($,X){super(X);this.schema=$}}var Y3=512,IZ=0;var J3=function($,X,Z){if($[A]==="Object"&&typeof Z==="object"&&!q2(Z)){const Q=$,W=Object.getOwnPropertyNames(Z),Y=Object.entries(Q.properties),[J,z]=[1/Y.length,Y.length];return Y.reduce((B,[G,q])=>{const D=q[A]==="Literal"&&q.const===Z[G]?z:0,F=Y0(q,X,Z[G])?J:0,M=W.includes(G)?J:0;return B+(D+F+M)},0)}else return Y0($,X,Z)?1:0},z3=function($,X,Z){const Q=$.anyOf.map((J)=>X0(J,X));let[W,Y]=[Q[0],0];for(let J of Q){const z=J3(J,X,Z);if(z>Y)W=J,Y=z}return W},M3=function($,X,Z){if("default"in $)return typeof Z==="function"?$.default:U0($.default);else{const Q=z3($,X,Z);return g8(Q,X,Z)}},q3=function($,X,Z){return Y0($,X,Z)?U0(Z):F1($,X)},B3=function($,X,Z){return Y0($,X,Z)?Z:F1($,X)},w3=function($,X,Z){if(Y0($,X,Z))return U0(Z);const Q=d(Z)?U0(Z):F1($,X),W=g($.minItems)&&Q.length<$.minItems?[...Q,...Array.from({length:$.minItems-Q.length},()=>null)]:Q,J=(g($.maxItems)&&W.length>$.maxItems?W.slice(0,$.maxItems):W).map((B)=>$2($.items,X,B));if($.uniqueItems!==!0)return J;const z=[...new Set(J)];if(!Y0($,X,z))throw new T6($,"Array cast produced invalid data due to uniqueItems constraint");return z},U3=function($,X,Z){if(Y0($,X,Z))return F1($,X);const Q=new Set($.returns.required||[]),W=function(){};for(let[Y,J]of Object.entries($.returns.properties)){if(!Q.has(Y)&&Z.prototype[Y]===void 0)continue;W.prototype[Y]=$2(J,X,Z.prototype[Y])}return W},G3=function($,X,Z){const Q=F1($,X),W=H0(Q)&&H0(Z)?{...Q,...Z}:Z;return Y0($,X,W)?W:F1($,X)},H3=function($,X,Z){throw new T6($,"Never types cannot be cast")},A3=function($,X,Z){if(Y0($,X,Z))return Z;if(Z===null||typeof Z!=="object")return F1($,X);const Q=new Set($.required||[]),W={};for(let[Y,J]of Object.entries($.properties)){if(!Q.has(Y)&&Z[Y]===void 0)continue;W[Y]=$2(J,X,Z[Y])}if(typeof $.additionalProperties==="object"){const Y=Object.getOwnPropertyNames($.properties);for(let J of Object.getOwnPropertyNames(Z)){if(Y.includes(J))continue;W[J]=$2($.additionalProperties,X,Z[J])}}return W},N3=function($,X,Z){if(Y0($,X,Z))return U0(Z);if(Z===null||typeof Z!=="object"||Array.isArray(Z)||Z instanceof Date)return F1($,X);const Q=Object.getOwnPropertyNames($.patternProperties)[0],W=$.patternProperties[Q],Y={};for(let[J,z]of Object.entries(Z))Y[J]=$2(W,X,z);return Y},D3=function($,X,Z){return $2(X0($,X),X,Z)},P3=function($,X,Z){return $2(X0($,X),X,Z)},O3=function($,X,Z){if(Y0($,X,Z))return U0(Z);if(!d(Z))return F1($,X);if($.items===void 0)return[];return $.items.map((Q,W)=>$2(Q,X,Z[W]))},L3=function($,X,Z){return Y0($,X,Z)?U0(Z):M3($,X,Z)},$2=function($,X,Z){const Q=i($.$id)?[...X,$]:X,W=$;switch($[A]){case"Array":return w3(W,Q,Z);case"Constructor":return U3(W,Q,Z);case"Intersect":return G3(W,Q,Z);case"Never":return H3(W,Q,Z);case"Object":return A3(W,Q,Z);case"Record":return N3(W,Q,Z);case"Ref":return D3(W,Q,Z);case"This":return P3(W,Q,Z);case"Tuple":return O3(W,Q,Z);case"Union":return L3(W,Q,Z);case"Date":case"Symbol":case"Uint8Array":return q3($,X,Z);default:return B3(W,Q,Z)}};function g8(...$){return $.length===3?$2($[0],$[1],$[2]):$2($[0],[],$[1])}class T6 extends m{constructor($,X){super(X);this.schema=$}}var _3=function($){return u($)&&$[A]!=="Unsafe"},S3=function($,X,Z){if(!d(Z))return Z;return Z.map((Q)=>j1($.items,X,Q))},F3=function($,X,Z){const Q=$.unevaluatedProperties,Y=$.allOf.map((z)=>j1(z,X,U0(Z))).reduce((z,B)=>v0(B)?{...z,...B}:B,{});if(!v0(Z)||!v0(Y)||!u(Q))return Y;const J=q1($);for(let z of Object.getOwnPropertyNames(Z)){if(J.includes(z))continue;if(Y0(Q,X,Z[z]))Y[z]=j1(Q,X,Z[z])}return Y},j3=function($,X,Z){if(!v0(Z)||d(Z))return Z;const Q=$.additionalProperties;for(let W of Object.getOwnPropertyNames(Z)){if(W in $.properties){Z[W]=j1($.properties[W],X,Z[W]);continue}if(u(Q)&&Y0(Q,X,Z[W])){Z[W]=j1(Q,X,Z[W]);continue}delete Z[W]}return Z},C3=function($,X,Z){if(!v0(Z))return Z;const Q=$.additionalProperties,W=Object.getOwnPropertyNames(Z),[Y,J]=Object.entries($.patternProperties)[0],z=new RegExp(Y);for(let B of W){if(z.test(B)){Z[B]=j1(J,X,Z[B]);continue}if(u(Q)&&Y0(Q,X,Z[B])){Z[B]=j1(Q,X,Z[B]);continue}delete Z[B]}return Z},K3=function($,X,Z){return j1(X0($,X),X,Z)},b3=function($,X,Z){return j1(X0($,X),X,Z)},R3=function($,X,Z){if(!d(Z))return Z;if(F0($.items))return[];const Q=Math.min(Z.length,$.items.length);for(let W=0;W<Q;W++)Z[W]=j1($.items[W],X,Z[W]);return Z.length>Q?Z.slice(0,Q):Z},V3=function($,X,Z){for(let Q of $.anyOf)if(_3(Q)&&Y0(Q,X,Z))return j1(Q,X,Z);return Z},j1=function($,X,Z){const Q=i($.$id)?[...X,$]:X,W=$;switch(W[A]){case"Array":return S3(W,Q,Z);case"Intersect":return F3(W,Q,Z);case"Object":return j3(W,Q,Z);case"Record":return C3(W,Q,Z);case"Ref":return K3(W,Q,Z);case"This":return b3(W,Q,Z);case"Tuple":return R3(W,Q,Z);case"Union":return V3(W,Q,Z);default:return Z}};function g6(...$){return $.length===3?j1($[0],$[1],$[2]):j1($[0],[],$[1])}var f8=function($){return i($)&&!isNaN($)&&!isNaN(parseFloat($))},E3=function($){return p0($)||n1($)||g($)},n$=function($){return $===!0||g($)&&$===1||p0($)&&$===BigInt("1")||i($)&&($.toLowerCase()==="true"||$==="1")},t$=function($){return $===!1||g($)&&($===0||Object.is($,-0))||p0($)&&$===BigInt("0")||i($)&&($.toLowerCase()==="false"||$==="0"||$==="-0")},I3=function($){return i($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)},x3=function($){return i($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)},k3=function($){return i($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)},T3=function($){return i($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)},g3=function($){return i($)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test($)},f3=function($,X){const Z=kZ($);return Z===X?Z:$},y3=function($,X){const Z=TZ($);return Z===X?Z:$},d3=function($,X){const Z=xZ($);return Z===X?Z:$},v3=function($,X){return i($.const)?f3(X,$.const):g($.const)?y3(X,$.const):n1($.const)?d3(X,$.const):U0(X)},xZ=function($){return n$($)?!0:t$($)?!1:$},p3=function($){return f8($)?BigInt(parseInt($)):g($)?BigInt($|0):t$($)?BigInt(0):n$($)?BigInt(1):$},kZ=function($){return E3($)?$.toString():Y1($)&&$.description!==void 0?$.description.toString():$},TZ=function($){return f8($)?parseFloat($):n$($)?1:t$($)?0:$},h3=function($){return f8($)?parseInt($):g($)?$|0:n$($)?1:t$($)?0:$},m3=function($){return i($)&&$.toLowerCase()==="null"?null:$},u3=function($){return i($)&&$==="undefined"?void 0:$},c3=function($){return G1($)?$:g($)?new Date($):n$($)?new Date(1):t$($)?new Date(0):f8($)?new Date(parseInt($)):x3($)?new Date(`1970-01-01T${$}.000Z`):I3($)?new Date(`1970-01-01T${$}`):T3($)?new Date(`${$}.000Z`):k3($)?new Date($):g3($)?new Date(`${$}T00:00:00.000Z`):$},i3=function($){return $},l3=function($,X,Z){return(d(Z)?Z:[Z]).map((W)=>X2($.items,X,W))},o3=function($,X,Z){return p3(Z)},n3=function($,X,Z){return xZ(Z)},t3=function($,X,Z){return c3(Z)},s3=function($,X,Z){return h3(Z)},r3=function($,X,Z){return $.allOf.reduce((Q,W)=>X2(W,X,Q),Z)},a3=function($,X,Z){return v3($,Z)},e3=function($,X,Z){return m3(Z)},$J=function($,X,Z){return TZ(Z)},XJ=function($,X,Z){if(!v0(Z))return Z;const W={};for(let Y of Object.keys(Z))W[Y]=l($.properties,Y)?X2($.properties[Y],X,Z[Y]):Z[Y];return W},ZJ=function($,X,Z){const Q=Object.getOwnPropertyNames($.patternProperties)[0],W=$.patternProperties[Q],Y={};for(let[J,z]of Object.entries(Z))Y[J]=X2(W,X,z);return Y},QJ=function($,X,Z){return X2(X0($,X),X,Z)},WJ=function($,X,Z){return kZ(Z)},YJ=function($,X,Z){return i(Z)||g(Z)?Symbol(Z):Z},JJ=function($,X,Z){return X2(X0($,X),X,Z)},zJ=function($,X,Z){if(!(d(Z)&&!F0($.items)))return Z;return Z.map((W,Y)=>{return Y<$.items.length?X2($.items[Y],X,W):W})},MJ=function($,X,Z){return u3(Z)},qJ=function($,X,Z){for(let Q of $.anyOf){const W=X2(Q,X,Z);if(!Y0(Q,X,W))continue;return W}return Z},X2=function($,X,Z){const Q=i($.$id)?[...X,$]:X,W=$;switch($[A]){case"Array":return l3(W,Q,Z);case"BigInt":return o3(W,Q,Z);case"Boolean":return n3(W,Q,Z);case"Date":return t3(W,Q,Z);case"Integer":return s3(W,Q,Z);case"Intersect":return r3(W,Q,Z);case"Literal":return a3(W,Q,Z);case"Null":return e3(W,Q,Z);case"Number":return $J(W,Q,Z);case"Object":return XJ(W,Q,Z);case"Record":return ZJ(W,Q,Z);case"Ref":return QJ(W,Q,Z);case"String":return WJ(W,Q,Z);case"Symbol":return YJ(W,Q,Z);case"This":return JJ(W,Q,Z);case"Tuple":return zJ(W,Q,Z);case"Undefined":return MJ(W,Q,Z);case"Union":return qJ(W,Q,Z);default:return i3(Z)}};function f6(...$){return $.length===3?X2($[0],$[1],$[2]):X2($[0],[],$[1])}var I2=function($,X){return X===void 0&&"default"in $?U0($.default):X},BJ=function($){return u($)&&$[A]!=="Unsafe"},y8=function($){return u($)&&"default"in $},wJ=function($,X,Z){const Q=I2($,Z);if(!d(Q))return Q;for(let W=0;W<Q.length;W++)Q[W]=T1($.items,X,Q[W]);return Q},UJ=function($,X,Z){const Q=I2($,Z);return $.allOf.reduce((W,Y)=>{const J=T1(Y,X,Q);return v0(J)?{...W,...J}:J},{})},GJ=function($,X,Z){const Q=I2($,Z);if(!v0(Q))return Q;const W=$.additionalProperties,Y=Object.getOwnPropertyNames($.properties);for(let J of Y){if(!y8($.properties[J]))continue;Q[J]=T1($.properties[J],X,Q[J])}if(!y8(W))return Q;for(let J of Object.getOwnPropertyNames(Q)){if(Y.includes(J))continue;Q[J]=T1(W,X,Q[J])}return Q},HJ=function($,X,Z){const Q=I2($,Z);if(!v0(Q))return Q;const W=$.additionalProperties,[Y,J]=Object.entries($.patternProperties)[0],z=new RegExp(Y);for(let B of Object.getOwnPropertyNames(Q)){if(!(z.test(B)&&y8(J)))continue;Q[B]=T1(J,X,Q[B])}if(!y8(W))return Q;for(let B of Object.getOwnPropertyNames(Q)){if(z.test(B))continue;Q[B]=T1(W,X,Q[B])}return Q},AJ=function($,X,Z){return T1(X0($,X),X,I2($,Z))},NJ=function($,X,Z){return T1(X0($,X),X,Z)},DJ=function($,X,Z){const Q=I2($,Z);if(!d(Q)||F0($.items))return Q;const[W,Y]=[$.items,Math.max($.items.length,Q.length)];for(let J=0;J<Y;J++)if(J<W.length)Q[J]=T1(W[J],X,Q[J]);return Q},PJ=function($,X,Z){const Q=I2($,Z);for(let W of $.anyOf){const Y=T1(W,X,Q);if(BJ(W)&&Y0(W,Y))return Y}return Q},T1=function($,X,Z){const Q=i($.$id)?[...X,$]:X,W=$;switch(W[A]){case"Array":return wJ(W,Q,Z);case"Intersect":return UJ(W,Q,Z);case"Object":return GJ(W,Q,Z);case"Record":return HJ(W,Q,Z);case"Ref":return AJ(W,Q,Z);case"This":return NJ(W,Q,Z);case"Tuple":return DJ(W,Q,Z);case"Union":return PJ(W,Q,Z);default:return I2(W,Z)}};function y6(...$){return $.length===3?T1($[0],$[1],$[2]):T1($[0],[],$[1])}var m1={};f2(m1,{ValuePointerRootSetError:()=>d6,ValuePointerRootDeleteError:()=>v6,Set:()=>OJ,Has:()=>_J,Get:()=>SJ,Format:()=>s$,Delete:()=>LJ});var gZ=function($){return $.indexOf("~")===-1?$:$.replace(/~1/g,"/").replace(/~0/g,"~")};function*s$($){if($==="")return;let[X,Z]=[0,0];for(let Q=0;Q<$.length;Q++)if($.charAt(Q)==="/")if(Q===0)X=Q+1;else Z=Q,yield gZ($.slice(X,Z)),X=Q+1;else Z=Q;yield gZ($.slice(X))}function OJ($,X,Z){if(X==="")throw new d6($,X,Z);let[Q,W,Y]=[null,$,""];for(let J of s$(X)){if(W[J]===void 0)W[J]={};Q=W,W=W[J],Y=J}Q[Y]=Z}function LJ($,X){if(X==="")throw new v6($,X);let[Z,Q,W]=[null,$,""];for(let Y of s$(X)){if(Q[Y]===void 0||Q[Y]===null)return;Z=Q,Q=Q[Y],W=Y}if(Array.isArray(Z)){const Y=parseInt(W);Z.splice(Y,1)}else delete Z[W]}function _J($,X){if(X==="")return!0;let[Z,Q,W]=[null,$,""];for(let Y of s$(X)){if(Q[Y]===void 0)return!1;Z=Q,Q=Q[Y],W=Y}return Object.getOwnPropertyNames(Z).includes(W)}function SJ($,X){if(X==="")return $;let Z=$;for(let Q of s$(X)){if(Z[Q]===void 0)return;Z=Z[Q]}return Z}class d6 extends m{constructor($,X,Z){super("Cannot set root value");this.value=$,this.path=X,this.update=Z}}class v6 extends m{constructor($,X){super("Cannot delete root value");this.value=$,this.path=X}}var a$=function($,X){return{type:"update",path:$,value:X}},fZ=function($,X){return{type:"insert",path:$,value:X}},yZ=function($){return{type:"delete",path:$}};function*KJ($,X,Z){if(!H0(Z))return yield a$($,Z);const Q=[...globalThis.Object.keys(X),...globalThis.Object.getOwnPropertySymbols(X)],W=[...globalThis.Object.keys(Z),...globalThis.Object.getOwnPropertySymbols(Z)];for(let Y of Q){if(Y1(Y))throw new r$(Y);if(F0(Z[Y])&&W.includes(Y))yield a$(`${$}/${globalThis.String(Y)}`,void 0)}for(let Y of W){if(F0(X[Y])||F0(Z[Y]))continue;if(Y1(Y))throw new r$(Y);yield*d8(`${$}/${globalThis.String(Y)}`,X[Y],Z[Y])}for(let Y of W){if(Y1(Y))throw new r$(Y);if(F0(X[Y]))yield fZ(`${$}/${globalThis.String(Y)}`,Z[Y])}for(let Y of Q.reverse()){if(Y1(Y))throw new r$(Y);if(F0(Z[Y])&&!W.includes(Y))yield yZ(`${$}/${globalThis.String(Y)}`)}}function*bJ($,X,Z){if(!d(Z))return yield a$($,Z);for(let Q=0;Q<Math.min(X.length,Z.length);Q++)yield*d8(`${$}/${Q}`,X[Q],Z[Q]);for(let Q=0;Q<Z.length;Q++){if(Q<X.length)continue;yield fZ(`${$}/${Q}`,Z[Q])}for(let Q=X.length-1;Q>=0;Q--){if(Q<Z.length)continue;yield yZ(`${$}/${Q}`)}}function*RJ($,X,Z){if(!V1(Z)||X.length!==Z.length||globalThis.Object.getPrototypeOf(X).constructor.name!==globalThis.Object.getPrototypeOf(Z).constructor.name)return yield a$($,Z);for(let Q=0;Q<Math.min(X.length,Z.length);Q++)yield*d8(`${$}/${Q}`,X[Q],Z[Q])}function*VJ($,X,Z){if(X===Z)return;yield a$($,Z)}function*d8($,X,Z){if(H0(X))return yield*KJ($,X,Z);if(d(X))return yield*bJ($,X,Z);if(V1(X))return yield*RJ($,X,Z);if(H1(X))return yield*VJ($,X,Z);throw new p6(X,"Unable to create diff edits for unknown value")}function dZ($,X){return[...d8("",$,X)]}var EJ=function($){return $.length>0&&$[0].path===""&&$[0].type==="update"},IJ=function($){return $.length===0};function vZ($,X){if(EJ(X))return U0(X[0].value);if(IJ(X))return U0($);const Z=U0($);for(let Q of X)switch(Q.type){case"insert":{m1.Set(Z,Q.path,Q.value);break}case"update":{m1.Set(Z,Q.path,Q.value);break}case"delete":{m1.Delete(Z,Q.path);break}}return Z}var FJ=q0({type:W0("insert"),path:O1(),value:e1()}),jJ=q0({type:W0("update"),path:O1(),value:e1()}),CJ=q0({type:W0("delete"),path:O1()}),mD=M0([FJ,jJ,CJ]);class p6 extends m{constructor($,X){super(X);this.value=$}}class r$ extends p6{constructor($){super($,"Cannot diff objects with symbol keys");this.value=$}}var xJ=function($,X){if(!H0(X))return!1;const Z=[...Object.keys($),...Object.getOwnPropertySymbols($)],Q=[...Object.keys(X),...Object.getOwnPropertySymbols(X)];if(Z.length!==Q.length)return!1;return Z.every((W)=>e$($[W],X[W]))},kJ=function($,X){return G1(X)&&$.getTime()===X.getTime()},TJ=function($,X){if(!d(X)||$.length!==X.length)return!1;return $.every((Z,Q)=>e$(Z,X[Q]))},gJ=function($,X){if(!V1(X)||$.length!==X.length||Object.getPrototypeOf($).constructor.name!==Object.getPrototypeOf(X).constructor.name)return!1;return $.every((Z,Q)=>e$(Z,X[Q]))},fJ=function($,X){return $===X};function e$($,X){if(H0($))return xJ($,X);if(G1($))return kJ($,X);if(V1($))return gJ($,X);if(d($))return TJ($,X);if(H1($))return fJ($,X);throw new Error("ValueEquals: Unable to compare value")}var yJ=function($,X,Z,Q){if(!H0(Z))m1.Set($,X,U0(Q));else{const W=Object.getOwnPropertyNames(Z),Y=Object.getOwnPropertyNames(Q);for(let J of W)if(!Y.includes(J))delete Z[J];for(let J of Y)if(!W.includes(J))Z[J]=null;for(let J of Y)m6($,`${X}/${J}`,Z[J],Q[J])}},dJ=function($,X,Z,Q){if(!d(Z))m1.Set($,X,U0(Q));else{for(let W=0;W<Q.length;W++)m6($,`${X}/${W}`,Z[W],Q[W]);Z.splice(Q.length)}},vJ=function($,X,Z,Q){if(V1(Z)&&Z.length===Q.length)for(let W=0;W<Z.length;W++)Z[W]=Q[W];else m1.Set($,X,U0(Q))},pJ=function($,X,Z,Q){if(Z===Q)return;m1.Set($,X,Q)},m6=function($,X,Z,Q){if(d(Q))return dJ($,X,Z,Q);if(V1(Q))return vJ($,X,Z,Q);if(H0(Q))return yJ($,X,Z,Q);if(H1(Q))return pJ($,X,Z,Q)},pZ=function($){return V1($)||H1($)},hJ=function($,X){return H0($)&&d(X)||d($)&&H0(X)};function hZ($,X){if(pZ($)||pZ(X))throw new h6("Only object and array types can be mutated at the root level");if(hJ($,X))throw new h6("Cannot assign due type mismatch of assignable values");m6($,"",$,X)}class h6 extends m{constructor($){super($)}}var C0=function($,X,Z){try{return P0($)?$[S0].Decode(Z):Z}catch(Q){throw new mZ($,X,Z,Q)}},mJ=function($,X,Z,Q){return d(Q)?C0($,Z,Q.map((W,Y)=>Z2($.items,X,`${Z}/${Y}`,W))):C0($,Z,Q)},uJ=function($,X,Z,Q){if(!H0(Q)||H1(Q))return C0($,Z,Q);const W=I8($),Y=W.map((q)=>q[0]),J={...Q};for(let[q,D]of W)if(q in J)J[q]=Z2(D,X,`${Z}/${q}`,J[q]);if(!P0($.unevaluatedProperties))return C0($,Z,J);const z=Object.getOwnPropertyNames(J),B=$.unevaluatedProperties,G={...J};for(let q of z)if(!Y.includes(q))G[q]=C0(B,`${Z}/${q}`,G[q]);return C0($,Z,G)},cJ=function($,X,Z,Q){return C0($,Z,Z2($.not,X,Z,Q))},iJ=function($,X,Z,Q){if(!H0(Q))return C0($,Z,Q);const W=q1($),Y={...Q};for(let G of W)if(G in Y)Y[G]=Z2($.properties[G],X,`${Z}/${G}`,Y[G]);if(!u($.additionalProperties))return C0($,Z,Y);const J=Object.getOwnPropertyNames(Y),z=$.additionalProperties,B={...Y};for(let G of J)if(!W.includes(G))B[G]=C0(z,`${Z}/${G}`,B[G]);return C0($,Z,B)},lJ=function($,X,Z,Q){if(!H0(Q))return C0($,Z,Q);const W=Object.getOwnPropertyNames($.patternProperties)[0],Y=new RegExp(W),J={...Q};for(let q of Object.getOwnPropertyNames(Q))if(Y.test(q))J[q]=Z2($.patternProperties[W],X,`${Z}/${q}`,J[q]);if(!u($.additionalProperties))return C0($,Z,J);const z=Object.getOwnPropertyNames(J),B=$.additionalProperties,G={...J};for(let q of z)if(!Y.test(q))G[q]=C0(B,`${Z}/${q}`,G[q]);return C0($,Z,G)},oJ=function($,X,Z,Q){const W=X0($,X);return C0($,Z,Z2(W,X,Z,Q))},nJ=function($,X,Z,Q){const W=X0($,X);return C0($,Z,Z2(W,X,Z,Q))},tJ=function($,X,Z,Q){return d(Q)&&d($.items)?C0($,Z,$.items.map((W,Y)=>Z2(W,X,`${Z}/${Y}`,Q[Y]))):C0($,Z,Q)},sJ=function($,X,Z,Q){for(let W of $.anyOf){if(!Y0(W,X,Q))continue;const Y=Z2(W,X,Z,Q);return C0($,Z,Y)}return C0($,Z,Q)},Z2=function($,X,Z,Q){const W=typeof $.$id==="string"?[...X,$]:X,Y=$;switch($[A]){case"Array":return mJ(Y,W,Z,Q);case"Intersect":return uJ(Y,W,Z,Q);case"Not":return cJ(Y,W,Z,Q);case"Object":return iJ(Y,W,Z,Q);case"Record":return lJ(Y,W,Z,Q);case"Ref":return oJ(Y,W,Z,Q);case"Symbol":return C0(Y,Z,Q);case"This":return nJ(Y,W,Z,Q);case"Tuple":return tJ(Y,W,Z,Q);case"Union":return sJ(Y,W,Z,Q);default:return C0(Y,Z,Q)}};function v8($,X,Z){return Z2($,X,"",Z)}class $8 extends m{constructor($,X,Z){super("Unable to decode value as it does not match the expected schema");this.schema=$,this.value=X,this.error=Z}}class mZ extends m{constructor($,X,Z,Q){super(Q instanceof Error?Q.message:"Unknown error");this.schema=$,this.path=X,this.value=Z,this.error=Q}}var y0=function($,X,Z){try{return P0($)?$[S0].Encode(Z):Z}catch(Q){throw new uZ($,X,Z,Q)}},rJ=function($,X,Z,Q){const W=y0($,Z,Q);return d(W)?W.map((Y,J)=>Q2($.items,X,`${Z}/${J}`,Y)):W},aJ=function($,X,Z,Q){const W=y0($,Z,Q);if(!H0(Q)||H1(Q))return W;const Y=I8($),J=Y.map((D)=>D[0]),z={...W};for(let[D,F]of Y)if(D in z)z[D]=Q2(F,X,`${Z}/${D}`,z[D]);if(!P0($.unevaluatedProperties))return y0($,Z,z);const B=Object.getOwnPropertyNames(z),G=$.unevaluatedProperties,q={...z};for(let D of B)if(!J.includes(D))q[D]=y0(G,`${Z}/${D}`,q[D]);return q},eJ=function($,X,Z,Q){return y0($.not,Z,y0($,Z,Q))},$z=function($,X,Z,Q){const W=y0($,Z,Q);if(!H0(W))return W;const Y=q1($),J={...W};for(let q of Y)if(q in J)J[q]=Q2($.properties[q],X,`${Z}/${q}`,J[q]);if(!u($.additionalProperties))return J;const z=Object.getOwnPropertyNames(J),B=$.additionalProperties,G={...J};for(let q of z)if(!Y.includes(q))G[q]=y0(B,`${Z}/${q}`,G[q]);return G},Xz=function($,X,Z,Q){const W=y0($,Z,Q);if(!H0(Q))return W;const Y=Object.getOwnPropertyNames($.patternProperties)[0],J=new RegExp(Y),z={...W};for(let D of Object.getOwnPropertyNames(Q))if(J.test(D))z[D]=Q2($.patternProperties[Y],X,`${Z}/${D}`,z[D]);if(!u($.additionalProperties))return y0($,Z,z);const B=Object.getOwnPropertyNames(z),G=$.additionalProperties,q={...z};for(let D of B)if(!J.test(D))q[D]=y0(G,`${Z}/${D}`,q[D]);return q},Zz=function($,X,Z,Q){const W=X0($,X),Y=Q2(W,X,Z,Q);return y0($,Z,Y)},Qz=function($,X,Z,Q){const W=X0($,X),Y=Q2(W,X,Z,Q);return y0($,Z,Y)},Wz=function($,X,Z,Q){const W=y0($,Z,Q);return d($.items)?$.items.map((Y,J)=>Q2(Y,X,`${Z}/${J}`,W[J])):[]},Yz=function($,X,Z,Q){for(let W of $.anyOf){if(!Y0(W,X,Q))continue;const Y=Q2(W,X,Z,Q);return y0($,Z,Y)}for(let W of $.anyOf){const Y=Q2(W,X,Z,Q);if(!Y0($,X,Y))continue;return y0($,Z,Y)}return y0($,Z,Q)},Q2=function($,X,Z,Q){const W=typeof $.$id==="string"?[...X,$]:X,Y=$;switch($[A]){case"Array":return rJ(Y,W,Z,Q);case"Intersect":return aJ(Y,W,Z,Q);case"Not":return eJ(Y,W,Z,Q);case"Object":return $z(Y,W,Z,Q);case"Record":return Xz(Y,W,Z,Q);case"Ref":return Zz(Y,W,Z,Q);case"This":return Qz(Y,W,Z,Q);case"Tuple":return Wz(Y,W,Z,Q);case"Union":return Yz(Y,W,Z,Q);default:return y0(Y,Z,Q)}};function p8($,X,Z){return Q2($,X,"",Z)}class X8 extends m{constructor($,X,Z){super("The encoded value does not match the expected schema");this.schema=$,this.value=X,this.error=Z}}class uZ extends m{constructor($,X,Z,Q){super(`${Q instanceof Error?Q.message:"Unknown error"}`);this.schema=$,this.path=X,this.value=Z,this.error=Q}}var Jz=function($,X){return P0($)||d0($.items,X)},zz=function($,X){return P0($)||d0($.items,X)},Mz=function($,X){return P0($)||d0($.returns,X)||$.parameters.some((Z)=>d0(Z,X))},qz=function($,X){return P0($)||d0($.returns,X)||$.parameters.some((Z)=>d0(Z,X))},Bz=function($,X){return P0($)||P0($.unevaluatedProperties)||$.allOf.some((Z)=>d0(Z,X))},wz=function($,X){return P0($)||d0($.items,X)},Uz=function($,X){return P0($)||d0($.not,X)},Gz=function($,X){return P0($)||Object.values($.properties).some((Z)=>d0(Z,X))||u($.additionalProperties)&&d0($.additionalProperties,X)},Hz=function($,X){return P0($)||d0($.item,X)},Az=function($,X){const Z=Object.getOwnPropertyNames($.patternProperties)[0],Q=$.patternProperties[Z];return P0($)||d0(Q,X)||u($.additionalProperties)&&P0($.additionalProperties)},Nz=function($,X){if(P0($))return!0;return d0(X0($,X),X)},Dz=function($,X){if(P0($))return!0;return d0(X0($,X),X)},Pz=function($,X){return P0($)||!F0($.items)&&$.items.some((Z)=>d0(Z,X))},Oz=function($,X){return P0($)||$.anyOf.some((Z)=>d0(Z,X))},d0=function($,X){const Z=i($.$id)?[...X,$]:X,Q=$;if($.$id&&u6.has($.$id))return!1;if($.$id)u6.add($.$id);switch($[A]){case"Array":return Jz(Q,Z);case"AsyncIterator":return zz(Q,Z);case"Constructor":return Mz(Q,Z);case"Function":return qz(Q,Z);case"Intersect":return Bz(Q,Z);case"Iterator":return wz(Q,Z);case"Not":return Uz(Q,Z);case"Object":return Gz(Q,Z);case"Promise":return Hz(Q,Z);case"Record":return Az(Q,Z);case"Ref":return Nz(Q,Z);case"This":return Dz(Q,Z);case"Tuple":return Pz(Q,Z);case"Union":return Oz(Q,Z);default:return P0($)}};function Z8($,X){return u6.clear(),d0($,X)}var u6=new Set;var t={};f2(t,{Patch:()=>Iz,Mutate:()=>xz,Hash:()=>Ez,Errors:()=>i6,Equal:()=>Rz,Encode:()=>bz,Diff:()=>Vz,Default:()=>Kz,Decode:()=>Cz,Create:()=>_z,Convert:()=>Fz,Clone:()=>jz,Clean:()=>Sz,Check:()=>c6,Cast:()=>Lz});function Lz(...$){return g8.apply(g8,$)}function _z(...$){return F1.apply(F1,$)}function c6(...$){return Y0.apply(Y0,$)}function Sz(...$){return g6.apply(g6,$)}function Fz(...$){return f6.apply(f6,$)}function jz($){return U0($)}function Cz(...$){const[X,Z,Q]=$.length===3?[$[0],$[1],$[2]]:[$[0],[],$[1]];if(!c6(X,Z,Q))throw new $8(X,Q,i6(X,Z,Q).First());return Z8(X,Z)?v8(X,Z,Q):Q}function Kz(...$){return y6.apply(y6,$)}function bz(...$){const[X,Z,Q]=$.length===3?[$[0],$[1],$[2]]:[$[0],[],$[1]],W=Z8(X,Z)?p8(X,Z,Q):Q;if(!c6(X,Z,W))throw new X8(X,W,i6(X,Z,W).First());return W}function i6(...$){return i$.apply(i$,$)}function Rz($,X){return e$($,X)}function Vz($,X){return dZ($,X)}function Ez($){return V2($)}function Iz($,X){return vZ($,X)}function xz($,X){hZ($,X)}var cZ=function($){return $.map((X)=>l6(X))},kz=function($){return $1(cZ($))},Tz=function($){return M0(cZ($))},gz=function($){return l6($)},l6=function($){return E0($)?kz($.allOf):Q0($)?Tz($.anyOf):p2($)?gz($.item):$};function o6($,X={}){return j(l6($),X)}var fz=function($){const X=[];for(let Z of $)X.push(...q1(Z));return DX(X)},yz=function($){return $.filter((X)=>!B$(X))},dz=function($,X){const Z=[];for(let Q of $)Z.push(...p$(Q,[X]));return yz(Z)},vz=function($,X){const Z={};for(let Q of X)Z[Q]=R8(dz($,Q));return Z};function n6($,X={}){const Z=fz($),Q=vz($,Z);return q0(Q,X)}function Q8($={}){return{...$,[A]:"Date",type:"Date"}}function W8($={}){return{...$,[A]:"Null",type:"null"}}function Y8($){return{...$,[A]:"Symbol",type:"symbol"}}function J8($={}){return{...$,[A]:"Undefined",type:"undefined"}}function z8($={}){return{...$,[A]:"Uint8Array",type:"Uint8Array"}}var pz=function($){return $.map((X)=>t6(X,!1))},hz=function($){const X={};for(let Z of globalThis.Object.getOwnPropertyNames($))X[Z]=L1(t6($[Z],!1));return X},h8=function($,X){return X===!0?$:L1($)},t6=function($,X){return M6($)?h8(P2(),X):B6($)?h8(P2(),X):J1($)?L1(h1(pz($))):y2($)?z8():C$($)?Q8():N0($)?h8(q0(hz($)),X):q6($)?h8(B2([],e1()),X):j0($)?J8():w6($)?W8():G6($)?Y8():j$($)?m2():d1($)?W0($):b2($)?W0($):D0($)?W0($):q0({})};function s6($,X={}){return j(t6($,!0),X)}function r6($,X={}){return h1(K0($.parameters),{...X})}var M8=function($,X){return $.map((Z)=>g1(Z,X))},mz=function($,X){const Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=g1($[Q],X);return Z},uz=function($,X){return $.parameters=M8($.parameters,X),$.returns=g1($.returns,X),$},cz=function($,X){return $.parameters=M8($.parameters,X),$.returns=g1($.returns,X),$},iz=function($,X){return $.allOf=M8($.allOf,X),$},lz=function($,X){return $.anyOf=M8($.anyOf,X),$},oz=function($,X){if(j0($.items))return $;return $.items=M8($.items,X),$},nz=function($,X){return $.items=g1($.items,X),$},tz=function($,X){return $.properties=mz($.properties,X),$},sz=function($,X){return $.item=g1($.item,X),$},rz=function($,X){return $.items=g1($.items,X),$},az=function($,X){return $.items=g1($.items,X),$},ez=function($,X){const Z=X.find((W)=>W.$id===$.$ref);if(Z===void 0)throw Error(`Unable to dereference schema with \$id ${$.$ref}`);const Q=b0(Z,["$id"]);return g1(Q,X)},$M=function($,X){return E$($)?uz($,X):I$($)?cz($,X):E0($)?iz($,X):Q0($)?lz($,X):v1($)?oz($,X):w2($)?nz($,X):T0($)?tz($,X):p2($)?sz($,X):V$($)?rz($,X):x$($)?az($,X):D6($)?ez($,X):$};function g1($,X){return $M(j($),K0(X))}function a6($,X={}){if(j0($))throw new Error("Enum undefined or empty");const Z=globalThis.Object.getOwnPropertyNames($).filter((Y)=>isNaN(Y)).map((Y)=>$[Y]),W=[...new Set(Z)].map((Y)=>W0(Y));return M0(W,{...X,[A1]:"Enum"})}function iZ($,X){return l2(u2($),X)}var XM=function($,X){const Z=$.filter((Q)=>E2(Q,X)===P.False);return Z.length===1?Z[0]:M0(Z)};function l2($,X,Z={}){if(D1($))return j(iZ($,X),Z);if(_0($))return j(lZ($,X),Z);return j(Q0($)?XM($.anyOf,X):E2($,X)!==P.False?z0():$,Z)}var ZM=function($,X){const Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=l2($[Q],X);return Z},QM=function($,X){return ZM($.properties,X)};function lZ($,X){const Z=QM($,X);return e(Z)}function oZ($,X){return o2(u2($),X)}var WM=function($,X){const Z=$.filter((Q)=>E2(Q,X)!==P.False);return Z.length===1?Z[0]:M0(Z)};function o2($,X,Z={}){if(D1($))return j(oZ($,X),Z);if(_0($))return j(nZ($,X),Z);return j(Q0($)?WM($.anyOf,X):E2($,X)!==P.False?$:z0(),Z)}var YM=function($,X){const Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=o2($[Q],X);return Z},JM=function($,X){return YM($.properties,X)};function nZ($,X){const Z=JM($,X);return e(Z)}function e6($,X={}){return j($.returns,X)}function $4($={}){return{...$,[A]:"Integer",type:"integer"}}var zM=function($,X,Z){return{[$]:u1(W0($),X,Z)}},MM=function($,X,Z){return $.reduce((Q,W)=>{return{...Q,...zM(W,X,Z)}},{})},qM=function($,X,Z){return MM($.keys,X,Z)};function tZ($,X,Z){const Q=qM($,X,Z);return e(Q)}var BM=function($){const[X,Z]=[$.slice(0,1),$.slice(1)];return[X.toLowerCase(),Z].join("")},wM=function($){const[X,Z]=[$.slice(0,1),$.slice(1)];return[X.toUpperCase(),Z].join("")},UM=function($){return $.toUpperCase()},GM=function($){return $.toLowerCase()},HM=function($,X,Z){const Q=G$($.pattern);if(!h2(Q))return{...$,pattern:sZ($.pattern,X)};const J=[...y$(Q)].map((G)=>W0(G)),z=rZ(J,X),B=M0(z);return v$([B],Z)},sZ=function($,X){return typeof $==="string"?X==="Uncapitalize"?BM($):X==="Capitalize"?wM($):X==="Uppercase"?UM($):X==="Lowercase"?GM($):$:$.toString()},rZ=function($,X){return $.map((Z)=>u1(Z,X))};function u1($,X,Z={}){return N1($)?tZ($,X,Z):D1($)?HM($,X,$):Q0($)?M0(rZ($.anyOf,X),Z):U2($)?W0(sZ($.const,X),Z):$}function X4($,X={}){return u1($,"Capitalize",X)}function Z4($,X={}){return u1($,"Lowercase",X)}function Q4($,X={}){return u1($,"Uncapitalize",X)}function W4($,X={}){return u1($,"Uppercase",X)}function Y4($,X){return{...X,[A]:"Not",not:j($)}}var AM=function($,X,Z){const Q={};for(let W of globalThis.Object.getOwnPropertyNames($))Q[W]=n2($[W],X,Z);return Q},NM=function($,X,Z){return AM($.properties,X,Z)};function aZ($,X,Z){const Q=NM($,X,Z);return e(Q)}var DM=function($,X){return $.map((Z)=>J4(Z,X))},PM=function($,X){return $.map((Z)=>J4(Z,X))},OM=function($,X){const{[X]:Z,...Q}=$;return Q},LM=function($,X){return X.reduce((Z,Q)=>OM(Z,Q),$)},J4=function($,X){return E0($)?$1(DM($.allOf,X)):Q0($)?M0(PM($.anyOf,X)):T0($)?q0(LM($.properties,X)):q0({})};function n2($,X,Z={}){if(N1(X))return eZ($,X,Z);if(_0($))return aZ($,X,Z);const Q=P1(X)?M1(X):X,W=b0($,[S0,"$id","required"]),Y=j(J4($,Q),Z);return{...W,...Y}}var _M=function($,X,Z){return{[X]:n2($,[X],Z)}},SM=function($,X,Z){return X.reduce((Q,W)=>{return{...Q,..._M($,W,Z)}},{})},FM=function($,X,Z){return SM($,X.keys,Z)};function eZ($,X,Z){const Q=FM($,X,Z);return e(Q)}function z4($,X={}){return h1(K0($.parameters),{...X})}var $Q=function($){return $.map((X)=>XQ(X))},jM=function($){const X={};for(let Z of globalThis.Object.getOwnPropertyNames($))X[Z]=e0($[Z]);return X},XQ=function($){return E0($)?$1($Q($.allOf)):Q0($)?M0($Q($.anyOf)):T0($)?q0(jM($.properties)):q0({})};function q8($,X={}){if(_0($))return ZQ($,X);const Z=b0($,[S0,"$id","required"]),Q=j(XQ($),X);return{...Z,...Q}}var CM=function($,X){const Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=q8($[Q],X);return Z},KM=function($,X){return CM($.properties,X)};function ZQ($,X){const Z=KM($,X);return e(Z)}var bM=function($,X,Z){const Q={};for(let W of globalThis.Object.getOwnPropertyNames($))Q[W]=t2($[W],X,Z);return Q},RM=function($,X,Z){return bM($.properties,X,Z)};function QQ($,X,Z){const Q=RM($,X,Z);return e(Q)}var VM=function($,X){return $.map((Z)=>M4(Z,X))},EM=function($,X){return $.map((Z)=>M4(Z,X))},IM=function($,X){const Z={};for(let Q of X)if(Q in $)Z[Q]=$[Q];return Z},M4=function($,X){return E0($)?$1(VM($.allOf,X)):Q0($)?M0(EM($.anyOf,X)):T0($)?q0(IM($.properties,X)):q0({})};function t2($,X,Z={}){if(N1(X))return WQ($,X,Z);if(_0($))return QQ($,X,Z);const Q=P1(X)?M1(X):X,W=b0($,[S0,"$id","required"]),Y=j(M4($,Q),Z);return{...W,...Y}}var xM=function($,X,Z){return{[X]:t2($,[X],Z)}},kM=function($,X,Z){return X.reduce((Q,W)=>{return{...Q,...xM($,W,Z)}},{})},TM=function($,X,Z){return kM($,X.keys,Z)};function WQ($,X,Z){const Q=TM($,X,Z);return e(Q)}function q4($){return L1(e0($))}var B8=function($,X,Z){return{...Z,[A]:"Record",type:"object",patternProperties:{[$]:j(X)}}},B4=function($,X,Z){const Q={};for(let W of $)Q[W]=j(X);return q0(Q,{...Z,[A1]:"Record"})},gM=function($,X,Z){return V8($)?B4(M1($),X,Z):B8($.pattern,X,Z)},fM=function($,X,Z){return B4(M1(M0($)),X,Z)},yM=function($,X,Z){return B4([$.toString()],X,Z)},dM=function($,X,Z){return B8($.source,X,Z)},vM=function($,X,Z){const Q=j0($.pattern)?R2:$.pattern;return B8(Q,X,Z)},pM=function($,X,Z){return B8(H2,X,Z)},hM=function($,X,Z){return B8(H2,X,Z)};function w4($,X,Z={}){return Q0($)?fM($.anyOf,X,Z):D1($)?gM($,X,Z):U2($)?yM($.const,X,Z):d2($)?pM($,X,Z):v2($)?hM($,X,Z):P6($)?dM($,X,Z):k$($)?vM($,X,Z):z0(Z)}function U4($,X={}){if(j0(X.$id))X.$id=`T${mM++}`;const Z=$({[A]:"This",$ref:`${X.$id}`});return Z.$id=X.$id,j({...X,[A1]:"Recursive",...Z})}var mM=0;function G4($,X={}){if(D0($))return{...X,[A]:"Ref",$ref:$};if(j0($.$id))throw new Error("Reference target type must specify an $id");return{...X,[A]:"Ref",$ref:$.$id}}function H4($,X={}){const Z=D0($)?new globalThis.RegExp($):$;return{...X,[A]:"RegExp",type:"RegExp",source:Z.source,flags:Z.flags}}var YQ=function($){return $.map((X)=>JQ(X))},uM=function($){const X={};for(let Z of globalThis.Object.getOwnPropertyNames($))X[Z]=b0($[Z],[o0]);return X},JQ=function($){return E0($)?$1(YQ($.allOf)):Q0($)?M0(YQ($.anyOf)):T0($)?q0(uM($.properties)):q0({})};function w8($,X={}){if(_0($))return zQ($,X);else{const Z=b0($,[S0,"$id","required"]),Q=j(JQ($),X);return{...Z,...Q}}}var cM=function($,X){const Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=w8($[Q],X);return Z},iM=function($,X){return cM($.properties,X)};function zQ($,X){const Z=iM($,X);return e(Z)}var lM=function($){return E0($)?K0($.allOf):Q0($)?K0($.anyOf):v1($)?K0($.items??[]):[]};function A4($){return K0(lM($))}function N4($,X={}){return j($.returns,X)}function D4($){return JSON.parse(JSON.stringify($))}function P4($){return new MQ($)}class MQ{constructor($){this.schema=$}Decode($){return new qQ(this.schema,$)}}class qQ{constructor($,X){this.schema=$,this.decode=X}EncodeTransform($,X){const W={Encode:(Y)=>X[S0].Encode($(Y)),Decode:(Y)=>this.decode(X[S0].Decode(Y))};return{...X,[S0]:W}}EncodeSchema($,X){const Z={Decode:this.decode,Encode:$};return{...X,[S0]:Z}}Encode($){const X=j(this.schema);return w$(X)?this.EncodeTransform($,X):this.EncodeSchema($,X)}}function O4($={}){return{...$,[A]:"Void",type:"void"}}var L4={};f2(L4,{Void:()=>O4,Uppercase:()=>W4,Unsafe:()=>F$,Unknown:()=>e1,Union:()=>M0,Undefined:()=>J8,Uncapitalize:()=>Q4,Uint8Array:()=>z8,Tuple:()=>h1,Transform:()=>P4,TemplateLiteral:()=>v$,Symbol:()=>Y8,String:()=>O1,Strict:()=>D4,ReturnType:()=>N4,Rest:()=>A4,Required:()=>w8,RegExp:()=>H4,Ref:()=>G4,Recursive:()=>U4,Record:()=>w4,ReadonlyOptional:()=>q4,Readonly:()=>L1,Promise:()=>m$,Pick:()=>t2,Partial:()=>q8,Parameters:()=>z4,Optional:()=>e0,Omit:()=>n2,Object:()=>q0,Number:()=>p1,Null:()=>W8,Not:()=>Y4,Never:()=>z0,Mapped:()=>F6,Lowercase:()=>Z4,Literal:()=>W0,KeyOf:()=>c$,Iterator:()=>h$,Intersect:()=>$1,Integer:()=>$4,InstanceType:()=>e6,Index:()=>c2,Function:()=>B2,Extract:()=>o2,Extends:()=>i2,Exclude:()=>l2,Enum:()=>a6,Deref:()=>g1,Date:()=>Q8,ConstructorParameters:()=>r6,Constructor:()=>R$,Const:()=>s6,Composite:()=>n6,Capitalize:()=>X4,Boolean:()=>d$,BigInt:()=>m2,Awaited:()=>o6,AsyncIterator:()=>b$,Array:()=>K$,Any:()=>P2});var P$=L4;class j4{constructor($,X,Z,Q){this.schema=$,this.references=X,this.checkFunc=Z,this.code=Q,this.hasTransform=Z8($,X)}Code(){return this.code}Errors($){return i$(this.schema,this.references,$)}Check($){return this.checkFunc($)}Decode($){if(!this.checkFunc($))throw new $8(this.schema,$,this.Errors($).First());return this.hasTransform?v8(this.schema,this.references,$):$}Encode($){const X=this.hasTransform?p8(this.schema,this.references,$):$;if(!this.checkFunc(X))throw new X8(this.schema,$,this.Errors($).First());return X}}var O2;(function($){function X(Y){return Y===36}$.DollarSign=X;function Z(Y){return Y===95}$.IsUnderscore=Z;function Q(Y){return Y>=65&&Y<=90||Y>=97&&Y<=122}$.IsAlpha=Q;function W(Y){return Y>=48&&Y<=57}$.IsNumeric=W})(O2||(O2={}));var m8;(function($){function X(Y){if(Y.length===0)return!1;return O2.IsNumeric(Y.charCodeAt(0))}function Z(Y){if(X(Y))return!1;for(let J=0;J<Y.length;J++){const z=Y.charCodeAt(J);if(!(O2.IsAlpha(z)||O2.IsNumeric(z)||O2.DollarSign(z)||O2.IsUnderscore(z)))return!1}return!0}function Q(Y){return Y.replace(/'/g,"\\'")}function W(Y,J){return Z(J)?`${Y}.${J}`:`${Y}['${Q(J)}']`}$.Encode=W})(m8||(m8={}));var _4;(function($){function X(Z){const Q=[];for(let W=0;W<Z.length;W++){const Y=Z.charCodeAt(W);if(O2.IsNumeric(Y)||O2.IsAlpha(Y))Q.push(Z.charAt(W));else Q.push(`_${Y}_`)}return Q.join("").replace(/__/g,"_")}$.Encode=X})(_4||(_4={}));var S4;(function($){function X(Z){return Z.replace(/'/g,"\\'")}$.Escape=X})(S4||(S4={}));class BQ extends m{constructor($){super("Unknown type");this.schema=$}}class F4 extends m{constructor($){super("Preflight validation check failed to guard for the given schema");this.schema=$}}var s2;(function($){function X(J,z,B){return R0.ExactOptionalPropertyTypes?`('${z}' in ${J} ? ${B} : true)`:`(${m8.Encode(J,z)} !== undefined ? ${B} : true)`}$.IsExactOptionalProperty=X;function Z(J){return!R0.AllowArrayObject?`(typeof ${J} === 'object' && ${J} !== null && !Array.isArray(${J}))`:`(typeof ${J} === 'object' && ${J} !== null)`}$.IsObjectLike=Z;function Q(J){return!R0.AllowArrayObject?`(typeof ${J} === 'object' && ${J} !== null && !Array.isArray(${J}) && !(${J} instanceof Date) && !(${J} instanceof Uint8Array))`:`(typeof ${J} === 'object' && ${J} !== null && !(${J} instanceof Date) && !(${J} instanceof Uint8Array))`}$.IsRecordLike=Q;function W(J){return R0.AllowNaN?`typeof ${J} === 'number'`:`Number.isFinite(${J})`}$.IsNumberLike=W;function Y(J){return R0.AllowNullVoid?`(${J} === undefined || ${J} === null)`:`${J} === undefined`}$.IsVoidLike=Y})(s2||(s2={}));var L2;(function($){function X(w){return w[A]==="Any"||w[A]==="Unknown"}function*Z(w,R,H){yield"true"}function*Q(w,R,H){yield`Array.isArray(${H})`;const[v,E]=[c("value","any"),c("acc","number")];if(g(w.maxItems))yield`${H}.length <= ${w.maxItems}`;if(g(w.minItems))yield`${H}.length >= ${w.minItems}`;const x=L(w.items,R,"value");if(yield`${H}.every((${v}) => ${x})`,u(w.contains)||g(w.minContains)||g(w.maxContains)){const L0=u(w.contains)?w.contains:z0(),W1=L(L0,R,"value"),M2=g(w.minContains)?[`(count >= ${w.minContains})`]:[],y1=g(w.maxContains)?[`(count <= ${w.maxContains})`]:[],o1=`const count = value.reduce((${E}, ${v}) => ${W1} ? acc + 1 : acc, 0)`,O8=["(count > 0)",...M2,...y1].join(" && ");yield`((${v}) => { ${o1}; return ${O8}})(${H})`}if(w.uniqueItems===!0)yield`((${v}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${H})`}function*W(w,R,H){yield`(typeof value === 'object' && Symbol.asyncIterator in ${H})`}function*Y(w,R,H){if(yield`(typeof ${H} === 'bigint')`,p0(w.exclusiveMaximum))yield`${H} < BigInt(${w.exclusiveMaximum})`;if(p0(w.exclusiveMinimum))yield`${H} > BigInt(${w.exclusiveMinimum})`;if(p0(w.maximum))yield`${H} <= BigInt(${w.maximum})`;if(p0(w.minimum))yield`${H} >= BigInt(${w.minimum})`;if(p0(w.multipleOf))yield`(${H} % BigInt(${w.multipleOf})) === 0`}function*J(w,R,H){yield`(typeof ${H} === 'boolean')`}function*z(w,R,H){yield*z2(w.returns,R,`${H}.prototype`)}function*B(w,R,H){if(yield`(${H} instanceof Date) && Number.isFinite(${H}.getTime())`,g(w.exclusiveMaximumTimestamp))yield`${H}.getTime() < ${w.exclusiveMaximumTimestamp}`;if(g(w.exclusiveMinimumTimestamp))yield`${H}.getTime() > ${w.exclusiveMinimumTimestamp}`;if(g(w.maximumTimestamp))yield`${H}.getTime() <= ${w.maximumTimestamp}`;if(g(w.minimumTimestamp))yield`${H}.getTime() >= ${w.minimumTimestamp}`;if(g(w.multipleOfTimestamp))yield`(${H}.getTime() % ${w.multipleOfTimestamp}) === 0`}function*G(w,R,H){yield`(typeof ${H} === 'function')`}function*q(w,R,H){if(yield`Number.isInteger(${H})`,g(w.exclusiveMaximum))yield`${H} < ${w.exclusiveMaximum}`;if(g(w.exclusiveMinimum))yield`${H} > ${w.exclusiveMinimum}`;if(g(w.maximum))yield`${H} <= ${w.maximum}`;if(g(w.minimum))yield`${H} >= ${w.minimum}`;if(g(w.multipleOf))yield`(${H} % ${w.multipleOf}) === 0`}function*D(w,R,H){const v=w.allOf.map((E)=>L(E,R,H)).join(" && ");if(w.unevaluatedProperties===!1){const E=k(`${new RegExp(A2(w))};`),x=`Object.getOwnPropertyNames(${H}).every(key => ${E}.test(key))`;yield`(${v} && ${x})`}else if(u(w.unevaluatedProperties)){const E=k(`${new RegExp(A2(w))};`),x=`Object.getOwnPropertyNames(${H}).every(key => ${E}.test(key) || ${L(w.unevaluatedProperties,R,`${H}[key]`)})`;yield`(${v} && ${x})`}else yield`(${v})`}function*F(w,R,H){yield`(typeof value === 'object' && Symbol.iterator in ${H})`}function*M(w,R,H){if(typeof w.const==="number"||typeof w.const==="boolean")yield`(${H} === ${w.const})`;else yield`(${H} === '${S4.Escape(w.const)}')`}function*O(w,R,H){yield"false"}function*C(w,R,H){yield`(!${L(w.not,R,H)})`}function*S(w,R,H){yield`(${H} === null)`}function*V(w,R,H){if(yield s2.IsNumberLike(H),g(w.exclusiveMaximum))yield`${H} < ${w.exclusiveMaximum}`;if(g(w.exclusiveMinimum))yield`${H} > ${w.exclusiveMinimum}`;if(g(w.maximum))yield`${H} <= ${w.maximum}`;if(g(w.minimum))yield`${H} >= ${w.minimum}`;if(g(w.multipleOf))yield`(${H} % ${w.multipleOf}) === 0`}function*I(w,R,H){if(yield s2.IsObjectLike(H),g(w.minProperties))yield`Object.getOwnPropertyNames(${H}).length >= ${w.minProperties}`;if(g(w.maxProperties))yield`Object.getOwnPropertyNames(${H}).length <= ${w.maxProperties}`;const v=Object.getOwnPropertyNames(w.properties);for(let E of v){const x=m8.Encode(H,E),L0=w.properties[E];if(w.required&&w.required.includes(E)){if(yield*z2(L0,R,x),N2(L0)||X(L0))yield`('${E}' in ${H})`}else{const W1=L(L0,R,x);yield s2.IsExactOptionalProperty(H,E,W1)}}if(w.additionalProperties===!1)if(w.required&&w.required.length===v.length)yield`Object.getOwnPropertyNames(${H}).length === ${v.length}`;else{const E=`[${v.map((x)=>`'${x}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${H}).every(key => ${E}.includes(key))`}if(typeof w.additionalProperties==="object"){const E=L(w.additionalProperties,R,`${H}[key]`),x=`[${v.map((L0)=>`'${L0}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${H}).every(key => ${x}.includes(key) || ${E}))`}}function*T(w,R,H){yield`(typeof value === 'object' && typeof ${H}.then === 'function')`}function*p(w,R,H){if(yield s2.IsRecordLike(H),g(w.minProperties))yield`Object.getOwnPropertyNames(${H}).length >= ${w.minProperties}`;if(g(w.maxProperties))yield`Object.getOwnPropertyNames(${H}).length <= ${w.maxProperties}`;const[v,E]=Object.entries(w.patternProperties)[0],x=k(`${new RegExp(v)}`),L0=L(E,R,"value"),W1=u(w.additionalProperties)?L(w.additionalProperties,R,H):w.additionalProperties===!1?"false":"true",M2=`(${x}.test(key) ? ${L0} : ${W1})`;yield`(Object.entries(${H}).every(([key, value]) => ${M2}))`}function*h(w,R,H){const v=X0(w,R);if(_.functions.has(w.$ref))return yield`${b(w.$ref)}(${H})`;yield*z2(v,R,H)}function*a(w,R,H){const v=k(`${new RegExp(w.source,w.flags)};`);if(yield`(typeof ${H} === 'string')`,g(w.maxLength))yield`${H}.length <= ${w.maxLength}`;if(g(w.minLength))yield`${H}.length >= ${w.minLength}`;yield`${v}.test(${H})`}function*f0(w,R,H){if(yield`(typeof ${H} === 'string')`,g(w.maxLength))yield`${H}.length <= ${w.maxLength}`;if(g(w.minLength))yield`${H}.length >= ${w.minLength}`;if(w.pattern!==void 0)yield`${k(`${new RegExp(w.pattern)};`)}.test(${H})`;if(w.format!==void 0)yield`format('${w.format}', ${H})`}function*J0(w,R,H){yield`(typeof ${H} === 'symbol')`}function*l1(w,R,H){yield`(typeof ${H} === 'string')`,yield`${k(`${new RegExp(w.pattern)};`)}.test(${H})`}function*C2(w,R,H){yield`${b(w.$ref)}(${H})`}function*O0(w,R,H){if(yield`Array.isArray(${H})`,w.items===void 0)return yield`${H}.length === 0`;yield`(${H}.length === ${w.maxItems})`;for(let v=0;v<w.items.length;v++)yield`${L(w.items[v],R,`${H}[${v}]`)}`}function*K2(w,R,H){yield`${H} === undefined`}function*U1(w,R,H){yield`(${w.anyOf.map((E)=>L(E,R,H)).join(" || ")})`}function*T2(w,R,H){if(yield`${H} instanceof Uint8Array`,g(w.maxByteLength))yield`(${H}.length <= ${w.maxByteLength})`;if(g(w.minByteLength))yield`(${H}.length >= ${w.minByteLength})`}function*i4(w,R,H){yield"true"}function*Q1(w,R,H){yield s2.IsVoidLike(H)}function*Z6(w,R,H){const v=_.instances.size;_.instances.set(v,w),yield`kind('${w[A]}', ${v}, ${H})`}function*z2(w,R,H,v=!0){const E=i(w.$id)?[...R,w]:R,x=w;if(v&&i(w.$id)){const L0=b(w.$id);if(_.functions.has(L0))return yield`${L0}(${H})`;else{const W1=y(L0,w,R,"value",!1);return _.functions.set(L0,W1),yield`${L0}(${H})`}}switch(x[A]){case"Any":return yield*Z(x,E,H);case"Array":return yield*Q(x,E,H);case"AsyncIterator":return yield*W(x,E,H);case"BigInt":return yield*Y(x,E,H);case"Boolean":return yield*J(x,E,H);case"Constructor":return yield*z(x,E,H);case"Date":return yield*B(x,E,H);case"Function":return yield*G(x,E,H);case"Integer":return yield*q(x,E,H);case"Intersect":return yield*D(x,E,H);case"Iterator":return yield*F(x,E,H);case"Literal":return yield*M(x,E,H);case"Never":return yield*O(x,E,H);case"Not":return yield*C(x,E,H);case"Null":return yield*S(x,E,H);case"Number":return yield*V(x,E,H);case"Object":return yield*I(x,E,H);case"Promise":return yield*T(x,E,H);case"Record":return yield*p(x,E,H);case"Ref":return yield*h(x,E,H);case"RegExp":return yield*a(x,E,H);case"String":return yield*f0(x,E,H);case"Symbol":return yield*J0(x,E,H);case"TemplateLiteral":return yield*l1(x,E,H);case"This":return yield*C2(x,E,H);case"Tuple":return yield*O0(x,E,H);case"Undefined":return yield*K2(x,E,H);case"Union":return yield*U1(x,E,H);case"Uint8Array":return yield*T2(x,E,H);case"Unknown":return yield*i4(x,E,H);case"Void":return yield*Q1(x,E,H);default:if(!V0.Has(x[A]))throw new BQ(w);return yield*Z6(x,E,H)}}const _={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function L(w,R,H,v=!0){return`(${[...z2(w,R,H,v)].join(" && ")})`}function b(w){return`check_${_4.Encode(w)}`}function k(w){const R=`local_${_.variables.size}`;return _.variables.set(R,`const ${R} = ${w}`),R}function y(w,R,H,v,E=!0){const[x,L0]=["\n",(o1)=>"".padStart(o1," ")],W1=c("value","any"),M2=a0("boolean"),y1=[...z2(R,H,v,E)].map((o1)=>`${L0(4)}${o1}`).join(` &&${x}`);return`function ${w}(${W1})${M2} {${x}${L0(2)}return (${x}${y1}${x}${L0(2)})\n}`}function c(w,R){const H=_.language==="typescript"?`: ${R}`:"";return`${w}${H}`}function a0(w){return _.language==="typescript"?`: ${w}`:""}function g2(w,R,H){const v=y("check",w,R,"value"),E=c("value","any"),x=a0("boolean"),L0=[..._.functions.values()],W1=[..._.variables.values()],M2=i(w.$id)?`return function check(${E})${x} {\n  return ${b(w.$id)}(value)\n}`:`return ${v}`;return[...W1,...L0,M2].join("\n")}function l0(...w){const R={language:"javascript"},[H,v,E]=w.length===2&&d(w[1])?[w[0],w[1],R]:w.length===2&&!d(w[1])?[w[0],[],w[1]]:w.length===3?[w[0],w[1],w[2]]:w.length===1?[w[0],[],R]:[null,[],R];if(_.language=E.language,_.variables.clear(),_.functions.clear(),_.instances.clear(),!u(H))throw new F4(H);for(let x of v)if(!u(x))throw new F4(x);return g2(H,v,E)}$.Code=l0;function R1(w,R=[]){const H=l0(w,R,{language:"javascript"}),v=globalThis.Function("kind","format","hash",H),E=new Map(_.instances);function x(y1,o1,O8){if(!V0.Has(y1)||!E.has(o1))return!1;const mQ=V0.Get(y1),uQ=E.get(o1);return mQ(uQ,O8)}function L0(y1,o1){if(!A0.Has(y1))return!1;return A0.Get(y1)(o1)}function W1(y1){return V2(y1)}const M2=v(x,L0,W1);return new j4(w,R,M2,H)}$.Compile=R1})(L2||(L2={}));var nM=function($){return $%4===0&&($%100!==0||$%400===0)},HQ=function($){const X=tM.exec($);if(!X)return!1;const Z=+X[1],Q=+X[2],W=+X[3];return Q>=1&&Q<=12&&W>=1&&W<=(Q===2&&nM(Z)?29:sM[Q])},C4=function($){return function X(Z){const Q=rM.exec(Z);if(!Q)return!1;const W=+Q[1],Y=+Q[2],J=+Q[3],z=Q[4],B=Q[5]==="-"?-1:1,G=+(Q[6]||0),q=+(Q[7]||0);if(G>23||q>59||$&&!z)return!1;if(W<=23&&Y<=59&&J<60)return!0;const D=Y-q*B,F=W-G*B-(D<0?1:0);return(F===23||F===-1)&&(D===59||D===-1)&&J<61}},wQ=function($){const X=C4($);return function Z(Q){const W=Q.split(aM);return W.length===2&&HQ(W[0])&&X(W[1])}},Xq=function($){return eM.test($)&&$q.test($)},Zq=function($){return UQ.lastIndex=0,UQ.test($)},Yq=function($){return Number.isInteger($)&&$<=Wq&&$>=Qq},Jq=function($){return Number.isInteger($)},GQ=function(){return!0},Mq=function($){if(zq.test($))return!1;try{return new RegExp($),!0}catch(X){return!1}},u8={date:HQ,time:C4(!0),"date-time":wQ(!0),"iso-time":C4(!1),"iso-date-time":wQ(!1),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:Xq,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:Mq,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:Zq,int32:{type:"number",validate:Yq},int64:{type:"number",validate:Jq},float:{type:"number",validate:GQ},double:{type:"number",validate:GQ},password:!0,binary:!0},tM=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,sM=[0,31,28,31,30,31,30,31,31,30,31,30,31],rM=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i,aM=/t|\s/i,eM=/\/|:/,$q=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,UQ=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm,Qq=-2147483648,Wq=2147483647,zq=/[^\\]\\Z/;var NQ=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,DQ=/(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s\d{2}\s\d{4}\s\d{2}:\d{2}:\d{2}\sGMT(?:\+|-)\d{4}\s\([^)]+\)/,PQ=/^(?:(?:(?:(?:0?[1-9]|[12][0-9]|3[01])[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:19|20)\d{2})|(?:(?:19|20)\d{2}[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:0?[1-9]|[12][0-9]|3[01]))))(?:\s(?:1[012]|0?[1-9]):[0-5][0-9](?::[0-5][0-9])?(?:\s[AP]M)?)?$/,qq=u8.date,Bq=u8["date-time"];if(!A0.Has("date"))s1.Format("date",($)=>{const X=$.replace(/"/g,"");if(NQ.test(X)||DQ.test(X)||PQ.test(X)||qq(X)){const Z=new Date(X);if(!Number.isNaN(Z.getTime()))return!0}return!1});if(!A0.Has("date-time"))s1.Format("date-time",($)=>{const X=$.replace(/"/g,"");if(NQ.test(X)||DQ.test(X)||PQ.test(X)||Bq(X)){const Z=new Date(X);if(!Number.isNaN(Z.getTime()))return!0}return!1});Object.entries(u8).forEach(($)=>{const[X,Z]=$;if(!A0.Has(X)){if(Z instanceof RegExp)s1.Format(X,(Q)=>Z.test(Q));else if(typeof Z==="function")s1.Format(X,Z)}});var f=Object.assign({},P$),AQ=($)=>{if(typeof $==="string")switch($.slice(-1)){case"k":return+$.slice(0,$.length-1)*1024;case"m":return+$.slice(0,$.length-1)*1048576;default:return+$}return $},K4=($,X)=>{if(!(X instanceof Blob))return!1;if($.minSize&&X.size<AQ($.minSize))return!1;if($.maxSize&&X.size>AQ($.maxSize))return!1;if($.extension)if(typeof $.extension==="string"){if(!X.type.startsWith($.extension))return!1}else{for(let Z=0;Z<$.extension.length;Z++)if(X.type.startsWith($.extension[Z]))return!0;return!1}return!0},wq=V0.Get("Files")??s1.Type("File",K4),Uq=V0.Get("Files")??s1.Type("Files",($,X)=>{if(!Array.isArray(X))return K4($,X);if($.minItems&&X.length<$.minItems)return!1;if($.maxItems&&X.length>$.maxItems)return!1;for(let Z=0;Z<X.length;Z++)if(!K4($,X[Z]))return!1;return!0});if(!A0.Has("numeric"))A0.Set("numeric",($)=>!!$&&!isNaN(+$));if(!A0.Has("boolean"))A0.Set("boolean",($)=>$==="true"||$==="false");if(!A0.Has("ObjectString"))A0.Set("ObjectString",($)=>{let X=$.charCodeAt(0);if(X===9||X===10||X===32)X=$.trimStart().charCodeAt(0);if(X!==123&&X!==91)return!1;try{return JSON.parse($),!0}catch{return!1}});if(!A0.Has("ArrayString"))A0.Set("ArrayString",($)=>{let X=$.charCodeAt(0);if(X===9||X===10||X===32)X=$.trimStart().charCodeAt(0);if(X!==123&&X!==91)return!1;try{return JSON.parse($),!0}catch{return!1}});var W2={Numeric:($)=>{const X=P$.Number($);return f.Transform(f.Union([f.String({format:"numeric",default:0}),f.Number($)],$)).Decode((Z)=>{const Q=+Z;if(isNaN(Q))return Z;if($&&!t.Check(X,Q))throw new s("property",X,Q);return Q}).Encode((Z)=>Z)},Date:($)=>{const X=P$.Date($);return f.Transform(f.Union([P$.Date($),f.String({format:"date",default:(new Date()).toISOString()}),f.String({format:"date-time",default:(new Date()).toISOString()})],$)).Decode((Z)=>{if(Z instanceof Date)return Z;const Q=new Date(Z);if(!t.Check(X,Q))throw new s("property",X,Q);return Q}).Encode((Z)=>{if(typeof Z==="string")return new Date(Z);return Z})},BooleanString:($)=>{const X=P$.Boolean($);return f.Transform(f.Union([f.String({format:"boolean",default:!1}),f.Boolean($)],$)).Decode((Z)=>{if(typeof Z==="string")return Z==="true";if($&&!t.Check(X,Z))throw new s("property",X,Z);return Z}).Encode((Z)=>Z)},ObjectString:($,X)=>{const Z=f.Object($,X),Q=JSON.stringify(t.Create(Z));let W;try{W=L2.Compile(Z)}catch{}return f.Transform(f.Union([f.String({format:"ObjectString",default:Q}),Z])).Decode((Y)=>{if(typeof Y==="string"){if(Y.charCodeAt(0)!==123)throw new s("property",Z,Y);try{Y=JSON.parse(Y)}catch{throw new s("property",Z,Y)}if(W){if(!W.Check(Y))throw new s("property",Z,Y);return W.Decode(Y)}if(!t.Check(Z,Y))throw new s("property",Z,Y);return t.Decode(Z,Y)}return Y}).Encode((Y)=>{if(typeof Y==="string")try{Y=JSON.parse(Y)}catch{throw new s("property",Z,Y)}if(!t.Check(Z,Y))throw new s("property",Z,Y);return JSON.stringify(Y)})},ArrayString:($={},X)=>{const Z=f.Array($,X),Q=JSON.stringify(t.Create(Z));let W;try{W=L2.Compile(Z)}catch{}return f.Transform(f.Union([f.String({format:"ArrayString",default:Q}),Z])).Decode((Y)=>{if(typeof Y==="string"){if(Y.charCodeAt(0)!==91)throw new s("property",Z,Y);try{Y=JSON.parse(Y)}catch{throw new s("property",Z,Y)}if(W){if(!W.Check(Y))throw new s("property",Z,Y);return W.Decode(Y)}if(!t.Check(Z,Y))throw new s("property",Z,Y);return t.Decode(Z,Y)}return Y}).Encode((Y)=>{if(typeof Y==="string")try{Y=JSON.parse(Y)}catch{throw new s("property",Z,Y)}if(!t.Check(Z,Y))throw new s("property",Z,Y);return JSON.stringify(Y)})},File:wq,Files:($={})=>f.Transform(Uq($)).Decode((X)=>{if(Array.isArray(X))return X;return[X]}).Encode((X)=>X),Nullable:($)=>f.Union([$,f.Null()]),MaybeEmpty:($)=>f.Union([$,f.Null(),f.Undefined()]),Cookie:($,{domain:X,expires:Z,httpOnly:Q,maxAge:W,path:Y,priority:J,sameSite:z,secure:B,secrets:G,sign:q,...D}={})=>{const F=f.Object($,D);return F.config={domain:X,expires:Z,httpOnly:Q,maxAge:W,path:Y,priority:J,sameSite:z,secure:B,secrets:G,sign:q},F}};f.BooleanString=W2.BooleanString;f.ObjectString=W2.ObjectString;f.ArrayString=W2.ArrayString;f.Numeric=W2.Numeric;f.File=($={})=>W2.File({default:"File",...$,extension:$?.type,type:"string",format:"binary"});f.Files=($={})=>W2.Files({...$,elysiaMeta:"Files",default:"Files",extension:$?.type,type:"array",items:{...$,default:"Files",type:"string",format:"binary"}});f.Nullable=($)=>W2.Nullable($);f.MaybeEmpty=W2.MaybeEmpty;f.Cookie=W2.Cookie;f.Date=W2.Date;var Hq=function($,X){if(typeof $!=="string")throw new TypeError("argument str must be a string");var Z={},Q=X||{},W=Q.decode||Nq,Y=0;while(Y<$.length){var J=$.indexOf("=",Y);if(J===-1)break;var z=$.indexOf(";",Y);if(z===-1)z=$.length;else if(z<J){Y=$.lastIndexOf(";",J-1)+1;continue}var B=$.slice(Y,J).trim();if(Z[B]===void 0){var G=$.slice(J+1,z).trim();if(G.charCodeAt(0)===34)G=G.slice(1,-1);Z[B]=Oq(G,W)}Y=z+1}return Z},Aq=function($,X,Z){var Q=Z||{},W=Q.encode||Dq;if(typeof W!=="function")throw new TypeError("option encode is invalid");if(!c8.test($))throw new TypeError("argument name is invalid");var Y=W(X);if(Y&&!c8.test(Y))throw new TypeError("argument val is invalid");var J=$+"="+Y;if(Q.maxAge!=null){var z=Q.maxAge-0;if(isNaN(z)||!isFinite(z))throw new TypeError("option maxAge is invalid");J+="; Max-Age="+Math.floor(z)}if(Q.domain){if(!c8.test(Q.domain))throw new TypeError("option domain is invalid");J+="; Domain="+Q.domain}if(Q.path){if(!c8.test(Q.path))throw new TypeError("option path is invalid");J+="; Path="+Q.path}if(Q.expires){var B=Q.expires;if(!Pq(B)||isNaN(B.valueOf()))throw new TypeError("option expires is invalid");J+="; Expires="+B.toUTCString()}if(Q.httpOnly)J+="; HttpOnly";if(Q.secure)J+="; Secure";if(Q.partitioned)J+="; Partitioned";if(Q.priority){var G=typeof Q.priority==="string"?Q.priority.toLowerCase():Q.priority;switch(G){case"low":J+="; Priority=Low";break;case"medium":J+="; Priority=Medium";break;case"high":J+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(Q.sameSite){var q=typeof Q.sameSite==="string"?Q.sameSite.toLowerCase():Q.sameSite;switch(q){case!0:J+="; SameSite=Strict";break;case"lax":J+="; SameSite=Lax";break;case"strict":J+="; SameSite=Strict";break;case"none":J+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return J},Nq=function($){return $.indexOf("%")!==-1?decodeURIComponent($):$},Dq=function($){return encodeURIComponent($)},Pq=function($){return Gq.call($)==="[object Date]"||$ instanceof Date},Oq=function($,X){try{return X($)}catch(Z){return $}};/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var b4=Hq,R4=Aq;var Gq=Object.prototype.toString,c8=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;var FQ=W6(i8(),1);class _2{$;X;Z;constructor($,X,Z={}){this.name=$;this.jar=X;this.initial=Z}get cookie(){if(!(this.name in this.jar))return this.initial;return this.jar[this.name]}set cookie($){if(!(this.name in this.jar))this.jar[this.name]=this.initial;this.jar[this.name]=$}get value(){return this.cookie.value}set value($){if(!(this.name in this.jar))this.jar[this.name]=this.initial;this.jar[this.name].value=$}get expires(){return this.cookie.expires}set expires($){this.cookie.expires=$}get maxAge(){return this.cookie.maxAge}set maxAge($){this.cookie.maxAge=$}get domain(){return this.cookie.domain}set domain($){this.cookie.domain=$}get path(){return this.cookie.path}set path($){this.cookie.path=$}get secure(){return this.cookie.secure}set secure($){this.cookie.secure=$}get httpOnly(){return this.cookie.httpOnly}set httpOnly($){this.cookie.httpOnly=$}get sameSite(){return this.cookie.sameSite}set sameSite($){this.cookie.sameSite=$}get priority(){return this.cookie.priority}set priority($){this.cookie.priority=$}get partitioned(){return this.cookie.partitioned}set partitioned($){this.cookie.partitioned=$}get secrets(){return this.cookie.secrets}set secrets($){this.cookie.secrets=$}update($){return this.cookie=Object.assign(this.cookie,typeof $==="function"?$(this.cookie):$),this}set($){return this.cookie=Object.assign({...this.initial,value:this.value},typeof $==="function"?$(this.cookie):$),this}remove(){if(this.value===void 0)return;return this.set({expires:new Date(0),maxAge:0,value:""}),this}toString(){return typeof this.value==="object"?JSON.stringify(this.value):this.value?.toString()??""}}var SQ=($,X,Z)=>{if(!$.cookie)$.cookie={};return new Proxy(X,{get(Q,W){if(W in X)return new _2(W,$.cookie,Object.assign({},Z??{},X[W]));return new _2(W,$.cookie,Object.assign({},Z))}})},l8=async($,X,{secrets:Z,sign:Q,...W}={})=>{if(!X)return SQ($,{},W);const Y=typeof Z==="string";if(Q&&Q!==!0&&!Array.isArray(Q))Q=[Q];const J={},z=b4(X);for(let[B,G]of Object.entries(z)){let q=FQ.default(G);if(Q===!0||Q?.includes(B)){if(!Z)throw new Error("No secret is provided to cookie plugin");if(Y){const D=await E4(q,Z);if(D===!1)throw new U8(B);q=D}else{let D=!0;for(let F=0;F<Z.length;F++){const M=await E4(q,Z[F]);if(M!==!1){D=!0,q=M;break}}if(!D)throw new U8(B)}}J[B]={value:q}}return SQ($,J,W)};var jQ="toJSON"in new Headers,C1=($)=>{if(!$)return!1;for(let X in $)return!0;return!1},G8=($,X)=>{const Z=$.size;if(!X&&Z||Z&&X&&X.status!==206&&X.status!==304&&X.status!==412&&X.status!==416){if(X){if(X.headers instanceof Headers){if(jQ)X.headers=X.headers.toJSON();else for(let[Q,W]of X.headers.entries())if(Q in X.headers)X.headers[Q]=W}return new Response($,{status:X.status,headers:Object.assign({"accept-ranges":"bytes","content-range":`bytes 0-${Z-1}/${Z}`},X.headers)})}return new Response($,{headers:{"accept-ranges":"bytes","content-range":`bytes 0-${Z-1}/${Z}`}})}return new Response($)},CQ=($,X)=>{if(!$)return $;$.delete("set-cookie");for(let Z=0;Z<X.length;Z++){const Q=X[Z].indexOf("=");$.append("set-cookie",`${X[Z].slice(0,Q)}=${X[Z].slice(Q+1)||""}`)}return $},KQ=($)=>{if(!$||!C1($))return;const X=[];for(let[Z,Q]of Object.entries($)){if(!Z||!Q)continue;const W=Q.value;if(W===void 0||W===null)continue;X.push(R4(Z,typeof W==="object"?JSON.stringify(W):W+"",Q))}if(X.length===0)return;if(X.length===1)return X[0];return X},H8=($,X,Z)=>{let Q=!1;return new Response(new ReadableStream({async start(W){Z?.signal.addEventListener("abort",()=>{Q=!0;try{W.close()}catch{}});for await(let Y of $){if(Q)break;if(!Y)continue;W.enqueue(Buffer.from(Y.toString())),await new Promise((J)=>setTimeout(()=>J(),0))}try{W.close()}catch{}}}),{...X,headers:{"transfer-encoding":"chunked","content-type":"text/event-stream; charset=utf-8"}})},c0=($,X,Z)=>{if(C1(X.headers)||X.status!==200||X.redirect||X.cookie){if(typeof X.status==="string")X.status=S2[X.status];if(X.redirect){if(X.headers.Location=X.redirect,!X.status||X.status<300||X.status>=400)X.status=302}if(X.cookie&&C1(X.cookie)){const Q=KQ(X.cookie);if(Q)X.headers["set-cookie"]=Q}if(X.headers["set-cookie"]&&Array.isArray(X.headers["set-cookie"]))X.headers=CQ(new Headers(X.headers),X.headers["set-cookie"]);switch($?.constructor?.name){case"String":return new Response($,X);case"Blob":return G8($,X);case"Array":return Response.json($,X);case"Object":const Q=$[X1];if(Q)return X.status=Q,c0($.response,X,Z);for(let Y in Object.values($))switch(Y?.constructor?.name){case"Blob":case"File":case"ArrayBuffer":case"FileRef":return new Response(r2($));default:break}return Response.json($,X);case"ReadableStream":if(!X.headers["content-type"]?.startsWith("text/event-stream"))X.headers["content-type"]="text/event-stream; charset=utf-8";return Z?.signal.addEventListener("abort",{handleEvent(){if(!Z?.signal.aborted)$.cancel(Z)}},{once:!0}),new Response($,X);case void 0:if(!$)return new Response("",X);return Response.json($,X);case"Response":let W=!1;if(X.headers instanceof Headers)for(let Y of X.headers.keys())if(Y==="set-cookie"){if(W)continue;W=!0;for(let J of X.headers.getSetCookie())$.headers.append("set-cookie",J)}else $.headers.append(Y,X.headers?.get(Y)??"");else for(let Y in X.headers)$.headers.append(Y,X.headers[Y]);if($.status!==X.status)X.status=$.status;return $;case"Error":return J2($,X);case"Promise":return $.then((Y)=>c0(Y,X));case"Function":return c0($(),X);case"Number":case"Boolean":return new Response($.toString(),X);case"Cookie":if($ instanceof _2)return new Response($.value,X);return new Response($?.toString(),X);case"FormData":return new Response($,X);default:if($ instanceof Response){let Y=!1;if(X.headers instanceof Headers)for(let J of X.headers.keys())if(J==="set-cookie"){if(Y)continue;Y=!0;for(let z of X.headers.getSetCookie())$.headers.append("set-cookie",z)}else $.headers.append(J,X.headers?.get(J)??"");else for(let J in X.headers)$.headers.append(J,X.headers[J]);if(jQ)X.headers=$.headers.toJSON();else for(let[J,z]of $.headers.entries())if(J in X.headers)X.headers[J]=z;return $}if($ instanceof Promise)return $.then((Y)=>c0(Y,X));if($ instanceof Error)return J2($,X);if(typeof $?.next==="function")return H8($,X,Z);if("toResponse"in $)return c0($.toResponse(),X);if("charCodeAt"in $){const Y=$.charCodeAt(0);if(Y===123||Y===91){if(!X.headers["Content-Type"])X.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),X)}}return new Response($,X)}}else switch($?.constructor?.name){case"String":return new Response($);case"Blob":return G8($,X);case"Array":return Response.json($);case"Object":const Q=$[X1];if(Q)return X.status=Q,c0($.response,X,Z);for(let W in Object.values($))switch(W?.constructor?.name){case"Blob":case"File":case"ArrayBuffer":case"FileRef":return new Response(r2($),X);default:break}return Response.json($,X);case"ReadableStream":return Z?.signal.addEventListener("abort",{handleEvent(){if(!Z?.signal.aborted)$.cancel(Z)}},{once:!0}),new Response($,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":return $;case"Error":return J2($,X);case"Promise":return $.then((W)=>{const Y=Y2(W,Z);if(Y!==void 0)return Y;return new Response("")});case"Function":return Y2($(),Z);case"Number":case"Boolean":return new Response($.toString());case"Cookie":if($ instanceof _2)return new Response($.value,X);return new Response($?.toString(),X);case"FormData":return new Response($,X);default:if($ instanceof Response)return new Response($.body,{headers:{"Content-Type":"application/json"}});if($ instanceof Promise)return $.then((W)=>c0(W,X));if($ instanceof Error)return J2($,X);if(typeof $?.next==="function")return H8($,X,Z);if("toResponse"in $)return c0($.toResponse(),X);if("charCodeAt"in $){const W=$.charCodeAt(0);if(W===123||W===91){if(!X.headers["Content-Type"])X.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),X)}}return new Response($)}},u0=($,X,Z)=>{if($===void 0||$===null)return;if(C1(X.headers)||X.status!==200||X.redirect||X.cookie){if(typeof X.status==="string")X.status=S2[X.status];if(X.redirect){if(X.headers.Location=X.redirect,!X.status||X.status<300||X.status>=400)X.status=302}if(X.cookie&&C1(X.cookie)){const Q=KQ(X.cookie);if(Q)X.headers["set-cookie"]=Q}if(X.headers["set-cookie"]&&Array.isArray(X.headers["set-cookie"]))X.headers=CQ(new Headers(X.headers),X.headers["set-cookie"]);switch($?.constructor?.name){case"String":return new Response($,X);case"Blob":return G8($,X);case"Array":return Response.json($,X);case"Object":const Q=$[X1];if(Q)return X.status=Q,u0($.response,X,Z);for(let Y in Object.values($))switch(Y?.constructor?.name){case"Blob":case"File":case"ArrayBuffer":case"FileRef":return new Response(r2($),X);default:break}return Response.json($,X);case"ReadableStream":if(!X.headers["content-type"]?.startsWith("text/event-stream"))X.headers["content-type"]="text/event-stream; charset=utf-8";return Z?.signal.addEventListener("abort",{handleEvent(){if(!Z?.signal.aborted)$.cancel(Z)}},{once:!0}),new Response($,X);case void 0:if(!$)return;return Response.json($,X);case"Response":let W=!1;if(X.headers instanceof Headers)for(let Y of X.headers.keys())if(Y==="set-cookie"){if(W)continue;W=!0;for(let J of X.headers.getSetCookie())$.headers.append("set-cookie",J)}else $.headers.append(Y,X.headers?.get(Y)??"");else for(let Y in X.headers)$.headers.append(Y,X.headers[Y]);if($.status!==X.status)X.status=$.status;return $;case"Promise":return $.then((Y)=>{const J=u0(Y,X);if(J!==void 0)return J});case"Error":return J2($,X);case"Function":return u0($(),X);case"Number":case"Boolean":return new Response($.toString(),X);case"FormData":return new Response($);case"Cookie":if($ instanceof _2)return new Response($.value,X);return new Response($?.toString(),X);default:if($ instanceof Response){let Y=!1;if(X.headers instanceof Headers)for(let J of X.headers.keys())if(J==="set-cookie"){if(Y)continue;Y=!0;for(let z of X.headers.getSetCookie())$.headers.append("set-cookie",z)}else $.headers.append(J,X.headers?.get(J)??"");else for(let J in X.headers)$.headers.append(J,X.headers[J]);if($.status!==X.status)X.status=$.status;return $}if($ instanceof Promise)return $.then((Y)=>u0(Y,X));if($ instanceof Error)return J2($,X);if(typeof $?.next==="function")return H8($,X,Z);if("toResponse"in $)return u0($.toResponse(),X);if("charCodeAt"in $){const Y=$.charCodeAt(0);if(Y===123||Y===91){if(!X.headers["Content-Type"])X.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),X)}}return new Response($,X)}}else switch($?.constructor?.name){case"String":return new Response($);case"Blob":return G8($,X);case"Array":return Response.json($);case"Object":const Q=$[X1];if(Q)return X.status=Q,u0($.response,X,Z);for(let W in Object.values($))switch(W?.constructor?.name){case"Blob":case"File":case"ArrayBuffer":case"FileRef":return new Response(r2($),X);default:break}return Response.json($,X);case"ReadableStream":return Z?.signal.addEventListener("abort",{handleEvent(){if(!Z?.signal.aborted)$.cancel(Z)}},{once:!0}),new Response($,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":return $;case"Promise":return $.then((W)=>{const Y=u0(W,X);if(Y!==void 0)return Y});case"Error":return J2($,X);case"Function":return Y2($(),Z);case"Number":case"Boolean":return new Response($.toString());case"Cookie":if($ instanceof _2)return new Response($.value,X);return new Response($?.toString(),X);case"FormData":return new Response($);default:if($ instanceof Response)return new Response($.body,{headers:{"Content-Type":"application/json"}});if($ instanceof Promise)return $.then((W)=>u0(W,X));if($ instanceof Error)return J2($,X);if(typeof $?.next==="function")return H8($,X,Z);if("toResponse"in $)return u0($.toResponse(),X);if("charCodeAt"in $){const W=$.charCodeAt(0);if(W===123||W===91){if(!X.headers["Content-Type"])X.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),X)}}return new Response($)}},Y2=($,X)=>{switch($?.constructor?.name){case"String":return new Response($);case"Blob":return G8($);case"Array":return Response.json($);case"Object":if($[X1])return c0($.response,{status:$[X1],headers:{}});$:for(let Z of Object.values($))switch(Z?.constructor?.name){case"Blob":case"File":case"ArrayBuffer":case"FileRef":return new Response(r2($));case"Object":break $;default:break}return Response.json($);case"ReadableStream":return X?.signal.addEventListener("abort",{handleEvent(){if(!X?.signal.aborted)$.cancel(X)}},{once:!0}),new Response($,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":return $;case"Error":return J2($);case"Promise":return $.then((Z)=>Y2(Z,X));case"Function":return Y2($(),X);case"Number":case"Boolean":return new Response($.toString());case"FormData":return new Response($);default:if($ instanceof Response)return new Response($.body,{headers:{"Content-Type":"application/json"}});if($ instanceof Promise)return $.then((Z)=>Y2(Z,X));if($ instanceof Error)return J2($);if(typeof $?.next==="function")return H8($,void 0,X);if("toResponse"in $)return Y2($.toResponse());if("charCodeAt"in $){const Z=$.charCodeAt(0);if(Z===123||Z===91)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}})}return new Response($)}},J2=($,X)=>new Response(JSON.stringify({name:$?.name,message:$?.message,cause:$?.cause}),{status:X?.status!==200?X?.status??500:500,headers:X?.headers});var Vq=function($){let X=$;while(X.endsWith("="))X=X.slice(0,-1);return X},o8=($,X)=>{const Z=new URL($);return Z.pathname=X,Z.toString()},Fq=($)=>typeof $==="function"&&/^\s*class\s+/.test($.toString())||$.toString().startsWith("[object ")&&$.toString()!=="[object Object]"||C1(Object.getPrototypeOf($)),I4=($)=>$&&typeof $==="object"&&!Array.isArray($),Z1=($,X,{skipKeys:Z,override:Q=!0}={})=>{if(!I4($)||!I4(X))return $;for(let[W,Y]of Object.entries(X)){if(Z?.includes(W))continue;if(!I4(Y)||!(W in $)||Fq(Y)){if(Q||!(W in $))$[W]=Y;continue}$[W]=Z1($[W],Y,{skipKeys:Z,override:Q})}return $},jq=($,X)=>{const{properties:Z,...Q}=$??{},{properties:W,...Y}=X??{};return Z1(Q,Y)},k0=($=[],X=[])=>{if(!$)return[];if(!X)return $;const Z=[],Q=[];if(!Array.isArray($))$=[$];if(!Array.isArray(X))X=[X];for(let W of $)if(Z.push(W),W.checksum)Q.push(W.checksum);for(let W of X)if(!Q.includes(W.checksum))Z.push(W);return Z},Cq=["start","request","parse","transform","resolve","beforeHandle","afterHandle","mapResponse","afterResponse","trace","error","stop","body","headers","params","query","response","type","detail"],Kq=Cq.reduce(($,X)=>($[X]=!0,$),{}),RQ=($,X)=>{const Z=(Q)=>typeof Q==="object"&&Object.keys(Q).every(r8);if(Z($)&&Z(X))return{...$,...X};return X??$},O$=($,X)=>{return{body:X?.body??$?.body,headers:X?.headers??$?.headers,params:X?.params??$?.params,query:X?.query??$?.query,response:RQ($?.response,X?.response)}},w1=($,X)=>{return{...$,...X,body:X?.body??$?.body,headers:X?.headers??$?.headers,params:X?.params??$?.params,query:X?.query??$?.query,response:RQ($?.response,X?.response),type:$?.type||X?.type,detail:Z1(X?.detail??{},$?.detail??{}),parse:k0($?.parse,X?.parse),transform:k0($?.transform,X?.transform),beforeHandle:k0($?.beforeHandle,X?.beforeHandle),afterHandle:k0($?.afterHandle,X?.afterHandle),mapResponse:k0($?.mapResponse,X?.mapResponse),afterResponse:k0($?.afterResponse,X?.afterResponse),trace:k0($?.trace,X?.trace),error:k0($?.error,X?.error)}},VQ=($,X,Z=!0)=>{if(!Array.isArray(X))return s0($,X,Z);for(let Q of X)$=s0($,Q,Z);return $},s0=($,X,Z=!0)=>{if(!$)return $;if(X.untilObjectFound&&!Z&&$.type==="object")return $;const Q=X.from[A];if($.oneOf){for(let J=0;J<$.oneOf.length;J++)$.oneOf[J]=s0($.oneOf[J],X,Z);return $}if($.anyOf){for(let J=0;J<$.anyOf.length;J++)$.anyOf[J]=s0($.anyOf[J],X,Z);return $}if($.allOf){for(let J=0;J<$.allOf.length;J++)$.allOf[J]=s0($.allOf[J],X,Z);return $}if($.not){for(let J=0;J<$.not.length;J++)$.not[J]=s0($.not[J],X,Z);return $}const W=Z&&!!X.excludeRoot;if($[A]===Q){const{anyOf:J,oneOf:z,allOf:B,not:G,properties:q,items:D,...F}=$,M=X.to();let O;const C=(S)=>{if(q&&S.type==="object"){const I={};for(let[T,p]of Object.entries(q))I[T]=s0(p,X,!1);return{...F,...S,properties:I}}if(D&&S.type==="array")return{...F,...S,items:s0(D,X,!1)};const V={...F,...S};if(delete V.required,q&&S.type==="string"&&S.format==="ObjectString"&&S.default==="{}")O=f.ObjectString(q,F),V.default=JSON.stringify(t.Create(f.Object(q))),V.properties=q;if(D&&S.type==="string"&&S.format==="ArrayString"&&S.default==="[]")O=f.ArrayString(D,F),V.default=JSON.stringify(t.Create(f.Array(D))),V.items=D;return V};if(W){if(q){const S={};for(let[V,I]of Object.entries(q))S[V]=s0(I,X,!1);return{...F,properties:S}}else if(D?.map)return{...F,items:D.map((S)=>s0(S,X,!1))};return F}if(M.anyOf)for(let S=0;S<M.anyOf.length;S++)M.anyOf[S]=C(M.anyOf[S]);else if(M.oneOf)for(let S=0;S<M.oneOf.length;S++)M.oneOf[S]=C(M.oneOf[S]);else if(M.allOf)for(let S=0;S<M.allOf.length;S++)M.allOf[S]=C(M.allOf[S]);else if(M.not)for(let S=0;S<M.not.length;S++)M.not[S]=C(M.not[S]);if(O)M[S0]=O[S0];if(M.anyOf||M.oneOf||M.allOf||M.not)return M;if(q){const S={};for(let[V,I]of Object.entries(q))S[V]=s0(I,X,!1);return{...F,...M,properties:S}}else if(D?.map)return{...F,...M,items:D.map((S)=>s0(S,X,!1))};return{...F,...M}}const Y=$?.properties;if(Y)for(let[J,z]of Object.entries(Y))switch(z[A]){case Q:const{anyOf:B,oneOf:G,allOf:q,not:D,type:F,...M}=z,O=X.to();if(O.anyOf)for(let C=0;C<O.anyOf.length;C++)O.anyOf[C]={...M,...O.anyOf[C]};else if(O.oneOf)for(let C=0;C<O.oneOf.length;C++)O.oneOf[C]={...M,...O.oneOf[C]};else if(O.allOf)for(let C=0;C<O.allOf.length;C++)O.allOf[C]={...M,...O.allOf[C]};else if(O.not)for(let C=0;C<O.not.length;C++)O.not[C]={...M,...O.not[C]};Y[J]={...M,...s0(M,X,!1)};break;case"Object":case"Union":Y[J]=s0(z,X,!1);break;default:if(z.items)for(let C=0;C<z.items.length;C++)z.items[C]=s0(z.items[C],X,!1);else if(z.anyOf||z.oneOf||z.allOf||z.not)Y[J]=s0(z,X,!1);break}return $},r0=($,{models:X={},dynamic:Z=!1,normalize:Q=!1,additionalProperties:W=!1,coerce:Y=!1,additionalCoerce:J=[]}={})=>{if(!$)return;if(typeof $==="string"&&!($ in X))return;let z=typeof $==="string"?X[$]:$;if(Y)z=VQ(z,[{from:f.Number(),to:()=>f.Numeric(),untilObjectFound:!0},{from:f.Boolean(),to:()=>f.BooleanString(),untilObjectFound:!0},...Array.isArray(J)?J:[J]]);if(z.type==="object"&&"additionalProperties"in z===!1)z.additionalProperties=W;const B=(q)=>t.Clean(z,q);if(Z){const q={schema:z,references:"",checkFunc:()=>{},code:"",Check:(D)=>t.Check(z,D),Errors:(D)=>t.Errors(z,D),Code:()=>"",Clean:B};if(Q&&z.additionalProperties===!1)q.Clean=B;if(z.config){if(q.config=z.config,q?.schema?.config)delete q.schema.config}return q.parse=(D)=>{try{return q.Decode(D)}catch(F){throw[...q.Errors(D)].map(f1)}},q.safeParse=(D)=>{try{return{success:!0,data:q.Decode(D),error:null}}catch(F){const M=[...G.Errors(D)].map(f1);return{success:!1,data:null,error:M[0]?.summary,errors:M}}},q}const G=L2.Compile(z,Object.values(X));if(G.Clean=B,z.config){if(G.config=z.config,G?.schema?.config)delete G.schema.config}return G.parse=(q)=>{try{return G.Decode(q)}catch(D){throw[...G.Errors(q)].map(f1)}},G.safeParse=(q)=>{try{return{success:!0,data:G.Decode(q),error:null}}catch(D){const F=[...G.Errors(q)].map(f1);return{success:!1,data:null,error:F[0]?.summary,errors:F}}},G},n8=($,{models:X={},dynamic:Z=!1,normalize:Q=!1,additionalProperties:W=!1})=>{if(!$)return;if(typeof $==="string"&&!($ in X))return;const Y=typeof $==="string"?X[$]:$,J=(B,G)=>{const q=(F)=>t.Clean(B,F);if(Z)return{schema:B,references:"",checkFunc:()=>{},code:"",Check:(F)=>t.Check(B,F),Errors:(F)=>t.Errors(B,F),Code:()=>""};const D=L2.Compile(B,G);if(Q&&B.additionalProperties===!1)D.Clean=q;return D};if(A in Y){if("additionalProperties"in Y===!1)Y.additionalProperties=W;return{200:J(Y,Object.values(X))}}const z={};return Object.keys(Y).forEach((B)=>{const G=Y[+B];if(typeof G==="string"){if(G in X){const q=X[G];q.type==="object"&&"additionalProperties"in q,z[+B]=A in q?J(q,Object.values(X)):q}return}if(G.type==="object"&&"additionalProperties"in G===!1)G.additionalProperties=W;z[+B]=A in G?J(G,Object.values(X)):G}),z},bq=typeof Bun!=="undefined",Rq=bq&&typeof Bun.hash==="function",a2=($)=>{if(Rq)return Bun.hash($);let X=9;for(let Z=0;Z<$.length;)X=Math.imul(X^$.charCodeAt(Z++),387420489);return X=X^X>>>9},k2=[{from:f.Object({}),to:()=>f.ObjectString({}),excludeRoot:!0},{from:f.Array(f.Any()),to:()=>f.ArrayString(f.Any())}],t8=({validator:$,defaultConfig:X={},config:Z,dynamic:Q,models:W})=>{let Y=r0($,{dynamic:Q,models:W,additionalProperties:!0,coerce:!0,additionalCoerce:k2});if(C1(X))if(Y)Y.config=jq(Y.config,Z);else Y=r0(f.Cookie({}),{dynamic:Q,models:W,additionalProperties:!0}),Y.config=X;return Y},c1=($,X)=>{if(!X)return;if(!Array.isArray(X)){const Q=X;if($&&!Q.checksum)Q.checksum=$;if(Q.scope==="scoped")Q.scope="local";return Q}const Z=[...X];for(let Q of Z){if($&&!Q.checksum)Q.checksum=$;if(Q.scope==="scoped")Q.scope="local"}return Z},x4=($,X,Z)=>{return{start:k0($.start,c1(Z,X?.start)),request:k0($.request,c1(Z,X?.request)),parse:k0($.parse,c1(Z,X?.parse)),transform:k0($.transform,c1(Z,X?.transform)),beforeHandle:k0($.beforeHandle,c1(Z,X?.beforeHandle)),afterHandle:k0($.afterHandle,c1(Z,X?.afterHandle)),mapResponse:k0($.mapResponse,c1(Z,X?.mapResponse)),afterResponse:k0($.afterResponse,c1(Z,X?.afterResponse)),trace:k0($.trace,c1(Z,X?.trace)),error:k0($.error,c1(Z,X?.error)),stop:k0($.stop,c1(Z,X?.stop))}},EQ=($,X,{skipIfHasType:Z=!1}={})=>{if(!$)return $;if(!Array.isArray($)){if(Z)$.scope??=X;else $.scope=X;return $}for(let Q of $)if(Z)Q.scope??=X;else Q.scope=X;return $},x2=($)=>{if(!$)return $;if(!Array.isArray($))switch($.scope){case"global":case"scoped":return{...$};default:return{fn:$}}const X=[];for(let Z of $)switch(Z.scope){case"global":case"scoped":X.push({...Z});break}return X},k4=($)=>{return{...$,type:$?.type,detail:$?.detail,parse:x2($?.parse),transform:x2($?.transform),beforeHandle:x2($?.beforeHandle),afterHandle:x2($?.afterHandle),mapResponse:x2($?.mapResponse),afterResponse:x2($?.afterResponse),error:x2($?.error),trace:x2($?.trace)}},S2={Continue:100,"Switching Protocols":101,Processing:102,"Early Hints":103,OK:200,Created:201,Accepted:202,"Non-Authoritative Information":203,"No Content":204,"Reset Content":205,"Partial Content":206,"Multi-Status":207,"Already Reported":208,"Multiple Choices":300,"Moved Permanently":301,Found:302,"See Other":303,"Not Modified":304,"Temporary Redirect":307,"Permanent Redirect":308,"Bad Request":400,Unauthorized:401,"Payment Required":402,Forbidden:403,"Not Found":404,"Method Not Allowed":405,"Not Acceptable":406,"Proxy Authentication Required":407,"Request Timeout":408,Conflict:409,Gone:410,"Length Required":411,"Precondition Failed":412,"Payload Too Large":413,"URI Too Long":414,"Unsupported Media Type":415,"Range Not Satisfiable":416,"Expectation Failed":417,"I'm a teapot":418,"Misdirected Request":421,"Unprocessable Content":422,Locked:423,"Failed Dependency":424,"Too Early":425,"Upgrade Required":426,"Precondition Required":428,"Too Many Requests":429,"Request Header Fields Too Large":431,"Unavailable For Legal Reasons":451,"Internal Server Error":500,"Not Implemented":501,"Bad Gateway":502,"Service Unavailable":503,"Gateway Timeout":504,"HTTP Version Not Supported":505,"Variant Also Negotiates":506,"Insufficient Storage":507,"Loop Detected":508,"Not Extended":510,"Network Authentication Required":511},s8=Object.fromEntries(Object.entries(S2).map(([$,X])=>[X,$])),bQ=new TextEncoder,L$=async($,X)=>{if(typeof $!=="string")throw new TypeError("Cookie value must be provided as a string.");if(X===null)throw new TypeError("Secret key must be provided.");const Z=await crypto.subtle.importKey("raw",bQ.encode(X),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),Q=await crypto.subtle.sign("HMAC",Z,bQ.encode($));return $+"."+Vq(Buffer.from(Q).toString("base64"))},E4=async($,X)=>{if(typeof $!=="string")throw new TypeError("Signed cookie string must be provided.");if(X===null)throw new TypeError("Secret key must be provided.");const Z=$.slice(0,$.lastIndexOf("."));return await L$(Z,X)===$?Z:!1},IQ=($,X)=>{if(!$||typeof $!=="object"||!X)return;for(let[Z,Q]of Object.entries(X)){if(Z in Kq||!(Z in $))continue;const W=$[Z];if(typeof W==="function")W(Q),delete X[Z]}},xQ=({globalHook:$,localHook:X})=>(Z)=>(Q,W)=>{if(typeof Q==="function")Q={fn:Q};if("fn"in Q||Array.isArray(Q)){if(!X[Z])X[Z]=[];if(typeof X[Z]==="function")X[Z]=[X[Z]];if(Array.isArray(Q))X[Z]=X[Z].concat(Q);else X[Z].push(Q);return}const{insert:Y="after",stack:J="local"}=Q;if(typeof W==="function")W={fn:W};if(J==="global")if(!Array.isArray(W))if(Y==="before")$[Z].unshift(W);else $[Z].push(W);else if(Y==="before")$[Z]=W.concat($[Z]);else $[Z]=$[Z].concat(W);else{if(!X[Z])X[Z]=[];if(typeof X[Z]==="function")X[Z]=[X[Z]];if(!Array.isArray(W))if(Y==="before")X[Z].unshift(W);else X[Z].push(W);else if(Y==="before")X[Z]=W.concat(X[Z]);else X[Z]=X[Z].concat(W)}},Eq=($)=>{if(typeof $==="number")return $;if($.length<16){if($.trim().length===0)return null;const X=Number($);if(Number.isNaN(X))return null;return X}if($.length===16){if($.trim().length===0)return null;const X=Number($);if(Number.isNaN(X)||X.toString()!==$)return null;return X}return null},r8=($)=>Eq($)!==null;class T4{$;root=null;promises=[];constructor($=console.error){this.onError=$}get size(){return this.promises.length}add($){return this.promises.push($),this.root||=this.drain(),$}async drain(){while(this.promises.length>0){try{await this.promises[0]}catch($){this.onError($)}this.promises.shift()}this.root=null}then($,X){return(this.root??Promise.resolve()).then($,X)}}var K1=($)=>{if(!$)return $;if(!Array.isArray($)){if(typeof $==="function")return{fn:$};else if("fn"in $)return $}const X=[];for(let Z of $)if(typeof Z==="function")X.push({fn:Z});else if("fn"in Z)X.push(Z);return X},kQ=($)=>{return{...$,start:K1($?.start),request:K1($?.request),parse:K1($?.parse),transform:K1($?.transform),beforeHandle:K1($?.beforeHandle),afterHandle:K1($?.afterHandle),mapResponse:K1($?.mapResponse),afterResponse:K1($?.afterResponse),trace:K1($?.trace),error:K1($?.error),stop:K1($?.stop)}},g4=($)=>{return{...$,start:$.start?.map((X)=>X.fn),request:$.request?.map((X)=>X.fn),parse:$.parse?.map((X)=>X.fn),transform:$.transform?.map((X)=>X.fn),beforeHandle:$.beforeHandle?.map((X)=>X.fn),afterHandle:$.afterHandle?.map((X)=>X.fn),afterResponse:$.afterResponse?.map((X)=>X.fn),mapResponse:$.mapResponse?.map((X)=>X.fn),trace:$.trace?.map((X)=>X.fn),error:$.error?.map((X)=>X.fn),stop:$.stop?.map((X)=>X.fn)}},A8=($)=>({body:$.body,cookie:$.cookie,headers:$.headers,query:$.query,set:$.set,server:$.server}),N8=($,X=302)=>Response.redirect($,X),Iq=Symbol("ElysiaFormData"),e2=Symbol("ElysiaRequestId"),r2=($)=>{const X=new FormData;for(let[Z,Q]of Object.entries($)){if(Array.isArray(Q)){for(let W of Q){if(Q instanceof File)X.append(Z,Q,Q.name);X.append(Z,W)}continue}if(Q instanceof File)X.append(Z,Q,Q.name);X.append(Z,Q)}return X},a8=()=>crypto.getRandomValues(new Uint32Array(1))[0],e8=($)=>{const X=[];for(let Z=0;Z<$.length;Z++){const Q=$[Z];if(Q.checksum){if(X.includes(Q.checksum))$.splice(Z,1),Z--;X.push(Q.checksum)}}return $},i0=($,X="scoped")=>{if(X==="scoped"){for(let Z of $)if("scope"in Z&&Z.scope==="local")Z.scope="scoped";return}for(let Z of $)if("scope"in Z)Z.scope="global"};var TQ=typeof Bun!=="undefined"?Bun.env:typeof process!=="undefined"?process?.env:void 0,$$=Symbol("ElysiaErrorCode"),X1=Symbol("ElysiaResponse"),D8=(TQ?.NODE_ENV??TQ?.ENV)==="production",f4=($,X)=>{const Z=X??($ in s8?s8[$]:$);return{[X1]:S2[$]??$,response:Z,_type:void 0,error:new Error(Z)}};class $6 extends Error{code="INTERNAL_SERVER_ERROR";status=500;constructor($){super($??"INTERNAL_SERVER_ERROR")}}class X$ extends Error{code="NOT_FOUND";status=404;constructor($){super($??"NOT_FOUND")}}class X6 extends Error{code="PARSE";status=400;constructor(){super("Failed to parse body")}}class U8 extends Error{$;code="INVALID_COOKIE_SIGNATURE";status=400;constructor($,X){super(X??`"${$}" has invalid cookie signature`);this.key=$}}var f1=($)=>{const{message:X,path:Z,value:Q,type:W}=$,Y=Z.slice(1).replaceAll("/","."),J=Z==="";switch(W){case 42:return{...$,summary:J?"Value should not be provided":`Property '${Y}' should not be provided`};case 45:return{...$,summary:J?"Value is missing":`Property '${Y}' is missing`};case 50:const z=X.indexOf("'"),B=X.slice(z+1,X.indexOf("'",z+1));return{...$,summary:J?"Value should be an email":`Property '${Y}' should be ${B}`};case 54:return{...$,summary:`${X.slice(0,9)} property '${Y}' to be ${X.slice(8)} but found: ${Q}`};case 62:const G=$.schema.anyOf.map((q)=>`'${q?.format??q.type}'`).join(", ");return{...$,summary:J?`Value should be one of ${G}`:`Property '${Y}' should be one of: ${G}`};default:return{summary:X,...$}}};class s extends Error{$;X;Z;code="VALIDATION";status=422;constructor($,X,Z){if(Z&&typeof Z==="object"&&X1 in Z)Z=Z.response;const Q=D8?void 0:("Errors"in X)?X.Errors(Z).First():t.Errors(X,Z).First(),W=Q?.schema.error!==void 0?typeof Q.schema.error==="function"?Q.schema.error({type:$,validator:X,value:Z,get errors(){return[...X.Errors(Z)].map(f1)}}):Q.schema.error:void 0,Y=Q?.path||"root";let J="";if(W!==void 0)J=typeof W==="object"?JSON.stringify(W):W+"";else if(D8)J=JSON.stringify({type:"validation",on:$,summary:f1(Q).summary,message:Q?.message,found:Z});else{const z=X?.schema??X,B="Errors"in X?[...X.Errors(Z)].map(f1):[...t.Errors(X,Z)].map(f1);let G;try{G=t.Create(z)}catch(q){G={type:"Could not create expected value",message:q?.message,error:q}}J=JSON.stringify({type:"validation",on:$,summary:B[0]?.summary,property:Y,message:Q?.message,expected:G,found:Z,errors:B},null,2)}super(J);this.type=$;this.validator=X;this.value=Z;Object.setPrototypeOf(this,s.prototype)}get all(){return"Errors"in this.validator?[...this.validator.Errors(this.value)].map(f1):[...t.Errors(this.validator,this.value)].map(f1)}static simplifyModel($){const X="schema"in $?$.schema:$;try{return t.Create(X)}catch{return X}}get model(){return s.simplifyModel(this.validator)}toResponse($){return new Response(this.message,{status:400,headers:{...$,"content-type":"application/json"}})}}var y4={open($){$.data.open?.($)},message($,X){$.data.message?.($,X)},drain($){$.data.drain?.($)},close($,X,Z){$.data.close?.($,X,Z)}};class _${$;X;validator;_validator;constructor($,X){this.raw=$;this.data=X;if(this.validator=$.data.validator,$.data.id)this.id=$.data.id;else this.id=a8().toString()}get id(){return this.raw.data.id}set id($){this.raw.data.id=$}get publish(){return($,X=void 0,Z)=>{if(this.validator?.Check(X)===!1)throw new s("message",this.validator,X);if(typeof X==="object")X=JSON.stringify(X);return this.raw.publish($,X,Z),this}}get send(){return($)=>{if(this.validator?.Check($)===!1)throw new s("message",this.validator,$);if(Buffer.isBuffer($))return this.raw.send($),this;if(typeof $==="object")$=JSON.stringify($);return this.raw.send($),this}}get subscribe(){return($)=>{return this.raw.subscribe($),this}}get unsubscribe(){return($)=>{return this.raw.unsubscribe($),this}}get cork(){return($)=>{return this.raw.cork($),this}}get close(){return()=>{return this.raw.close(),this}}get terminate(){return this.raw.terminate.bind(this.raw)}get isSubscribed(){return this.raw.isSubscribed.bind(this.raw)}get remoteAddress(){return this.raw.remoteAddress}}var d4="1.1.1";var v4=W6(i8(),1);function S$($){const X={};if(typeof $!=="string")return X;const Z=$.length;let Q="",W="",Y=-1,J=-1,z=!1,B=!1,G=!1,q=!1,D=!1,F=0;for(let M=0;M<Z+1;M++)if(F=M!==Z?$.charCodeAt(M):38,F===38){if(D=J>Y,!D)J=M;if(Q=$.slice(Y+1,J),D||Q.length>0){if(G)Q=Q.replace(gQ," ");if(z)Q=v4.default(Q)||Q;if(!X[Q]){if(D){if(W=$.slice(J+1,M),q)W=W.replace(gQ," ");if(B)W=v4.default(W)||W}X[Q]=W}}W="",Y=M,J=M,z=!1,B=!1,G=!1,q=!1}else if(F===61)if(J<=Y)J=M;else B=!0;else if(F===43)if(J>Y)q=!0;else G=!0;else if(F===37)if(J>Y)B=!0;else z=!0;return X}var gQ=/\+/g;var yQ=W6(i8(),1);var P8=Symbol("ElysiaTrace"),F2=()=>{const{promise:$,resolve:X}=Promise.withResolvers(),{promise:Z,resolve:Q}=Promise.withResolvers(),{promise:W,resolve:Y}=Promise.withResolvers(),J=[],z=[];return[(B)=>{if(B)J.push(B);return $},(B)=>{const G=[],q=[];let D=null;for(let M=0;M<(B.total??0);M++){const{promise:O,resolve:C}=Promise.withResolvers(),{promise:S,resolve:V}=Promise.withResolvers(),{promise:I,resolve:T}=Promise.withResolvers(),p=[],h=[];G.push((a)=>{if(a)p.push(a);return O}),q.push((a)=>{const f0={...a,end:S,error:I,index:M,onStop(J0){if(J0)h.push(J0);return S}};C(f0);for(let J0=0;J0<p.length;J0++)p[J0](f0);return(J0=null)=>{const l1=performance.now();if(J0)D=J0;const C2={end:l1,error:J0,get elapsed(){return l1-a.begin}};for(let O0=0;O0<h.length;O0++)h[O0](C2);V(l1),T(J0)}})}const F={...B,end:Z,error:W,onEvent(M){for(let O=0;O<G.length;O++)G[O](M)},onStop(M){if(M)z.push(M);return Z}};X(F);for(let M=0;M<J.length;M++)J[M](F);return{resolveChild:q,resolve(M=null){const O=performance.now();if(!M&&D)M=D;const C={end:O,error:M,get elapsed(){return O-B.begin}};for(let S=0;S<z.length;S++)z[S](C);Q(O),Y(M)}}}]},fQ=($)=>{return(X)=>{const[Z,Q]=F2(),[W,Y]=F2(),[J,z]=F2(),[B,G]=F2(),[q,D]=F2(),[F,M]=F2(),[O,C]=F2(),[S,V]=F2(),[I,T]=F2();return $({id:X[e2],context:X,set:X.set,onRequest:Z,onParse:W,onTransform:J,onBeforeHandle:B,onHandle:q,onAfterHandle:F,onMapResponse:S,onAfterResponse:I,onError:O}),{request:Q,parse:Y,transform:z,beforeHandle:G,handle:D,afterHandle:M,error:C,mapResponse:V,afterResponse:T}}};var kq=(new Headers()).toJSON,dQ={optional:Symbol.for("TypeBox.Optional"),kind:Symbol.for("TypeBox.Kind")},j2=($)=>{if(!$)return!1;const X=$?.schema;return!!X&&dQ.optional in X},i1=($)=>{if(!$)return!1;const X=$?.schema??$;if(X.anyOf)return X.anyOf.some(i1);if(X.someOf)return X.someOf.some(i1);if(X.allOf)return X.allOf.some(i1);if(X.not)return X.not.some(i1);if(X.type==="object"){const Z=X.properties;if("additionalProperties"in X)return X.additionalProperties;for(let Q of Object.keys(Z)){const W=Z[Q];if(W.type==="object"){if(i1(W))return!0}else if(W.anyOf){for(let Y=0;Y<W.anyOf.length;Y++)if(i1(W.anyOf[Y]))return!0}return W.additionalProperties}return!1}return!1},h4=({context:$="c",trace:X,addFn:Z})=>{if(!X.length)return()=>{return{resolveChild(){return()=>{}},resolve(){}}};for(let Q=0;Q<X.length;Q++)Z(`let report${Q}, reportChild${Q}, reportErr${Q}, reportErrChild${Q}; let trace${Q} = ${$}[ELYSIA_TRACE]?.[${Q}] ?? trace[${Q}](${$});\n`);return(Q,{name:W,total:Y=0}={})=>{if(!W)W="anonymous";const J=Q==="error"?"reportErr":"report";for(let z=0;z<X.length;z++)Z(`\n${J}${z} = trace${z}.${Q}({id,event: '${Q}',name: '${W}',begin: performance.now(),total: ${Y}})\n`);return{resolve(){for(let z=0;z<X.length;z++)Z(`\n${J}${z}.resolve()\n`)},resolveChild(z){for(let B=0;B<X.length;B++)Z(`${J}Child${B} = ${J}${B}.resolveChild?.shift()?.({id,event: '${Q}',name: '${z}',begin: performance.now()})\n`);return(B)=>{for(let G=0;G<X.length;G++)if(B)Z(`
                             	if (${B} instanceof Error)
                    				${J}Child${G}?.(${B})
                           		else
                             		${J}Child${G}?.()\n`);else Z(`${J}Child${G}?.()\n`)}}}}},Tq=({injectResponse:$="",normalize:X=!1,validator:Z})=>({composeValidation:(Q,W=`c.${Q}`)=>`c.set.status = 422; throw new ValidationError('${Q}', validator.${Q}, ${W})`,composeResponseValidation:(Q="r")=>{let W="\n"+$+"\n";W+=`if(typeof ${Q} === "object" && ${Q} && ELYSIA_RESPONSE in ${Q}) {
			c.set.status = ${Q}[ELYSIA_RESPONSE]
			${Q} = ${Q}.response
		}

		const isResponse = ${Q} instanceof Response\n\n`,W+="switch(c.set.status) {\n";for(let[Y,J]of Object.entries(Z.response)){if(W+=`\tcase ${Y}:
				if (!isResponse) {\n`,X&&"Clean"in J&&!i1(J))W+=`${Q} = validator.response['${Y}'].Clean(${Q})\n`;W+=`if(validator.response['${Y}'].Check(${Q}) === false) {
					c.set.status = 422

					throw new ValidationError('response', validator.response['${Y}'], ${Q})
				}

				c.set.status = ${Y}
			}

			break\n\n`}return W+="\n}\n",W}}),bV=Symbol.for("TypeBox.Kind");var Z$=($,X)=>{if(!X)return;if(X.type==="object"){const Z=X.properties;if(!Z)return!1;for(let Q of Object.keys(Z)){const W=Z[Q];if($ in W)return!0;if(W.type==="object"){if(Z$($,W))return!0}else if(W.anyOf){for(let Y=0;Y<W.anyOf.length;Y++)if(Z$($,W.anyOf[Y]))return!0}}return!1}return $ in X},p4=Symbol.for("TypeBox.Transform"),Q$=($)=>{if(!$)return;if($.type==="object"&&$.properties){const X=$.properties;for(let Z of Object.keys(X)){const Q=X[Z];if(Q.type==="object"){if(Q$(Q))return!0}else if(Q.anyOf){for(let Y=0;Y<Q.anyOf.length;Y++)if(Q$(Q.anyOf[Y]))return!0}if(p4 in Q)return!0}return!1}return p4 in $||$.properties&&p4 in $.properties},gq=/(?:return|=>) \S+\(/g,W$=($)=>{return($?.fn??$).constructor.name==="AsyncFunction"},g0=($)=>{const X=$?.fn??$;if(X.constructor.name==="AsyncFunction")return!0;const Z=X.toString();if(Z.includes("=> response.clone("))return!1;if(Z.includes("await"))return!0;if(Z.includes("async"))return!0;return!!Z.match(gq)};var vQ=({app:$,path:X,method:Z,localHook:Q,hooks:W,validator:Y,handler:J,allowMeta:z=!1,inference:B})=>{const G=typeof J==="function";if(!G)J=c0(J,{headers:$.setHeaders??{}});const q=G?"handler(c)":"handler",D=W.afterResponse.length>0,F=W.trace.length>0;let M="";if(B=_8(Object.assign(Q,{handler:J}),B),B.server)M+=`\nObject.defineProperty(c, 'server', {
			get: function() { return getServer() }
		})\n`;if(B.body)M+="let isParsing = false\n";Y.createBody?.(),Y.createQuery?.(),Y.createHeaders?.(),Y.createParams?.(),Y.createCookie?.(),Y.createResponse?.();const O=B.query||!!Y.query,C=Z!=="$INTERNALWS"&&Z!=="GET"&&Z!=="HEAD"&&(B.body||!!Y.body||W.parse.length),S=$.setHeaders,V=S&&!!Object.keys(S).length,I=B.headers||Y.headers,T=B.cookie||!!Y.cookie,p=T?t8({validator:Y.cookie,defaultConfig:$.config.cookie,dynamic:!!$.config.aot,config:Y.cookie?.config??{},models:$.definitions.type}):void 0,h=p?.config;let a="";if(h?.sign){if(!h.secrets)throw new Error(`t.Cookie required secret which is not set in (${Z}) ${X}.`);const _=!h.secrets?void 0:typeof h.secrets==="string"?h.secrets:h.secrets[0];if(a+=`const _setCookie = c.set.cookie
		if(_setCookie) {`,h.sign===!0)a+=`for(const [key, cookie] of Object.entries(_setCookie)) {
				c.set.cookie[key].value = await signCookie(cookie.value, '${_}')
			}`;else for(let L of h.sign)a+=`if(_setCookie['${L}']?.value) { c.set.cookie['${L}'].value = await signCookie(_setCookie['${L}'].value, '${_}') }\n`;a+="}\n"}const f0=$.config.normalize,{composeValidation:J0,composeResponseValidation:l1}=Tq({normalize:f0,validator:Y});if(I)M+=kq?"c.headers = c.request.headers.toJSON()\n":`c.headers = {}
                for (const [key, value] of c.request.headers.entries())
					c.headers[key] = value
				`;if(T){const _=(b,k)=>{const y=h?.[b]??k;if(!y)return typeof k==="string"?`${b}: "${k}",`:`${b}: ${k},`;if(typeof y==="string")return`${b}: '${y}',`;if(y instanceof Date)return`${b}: new Date(${y.getTime()}),`;return`${b}: ${y},`},L=h?`{
			secrets: ${h.secrets!==void 0?typeof h.secrets==="string"?`'${h.secrets}'`:"["+h.secrets.reduce((b,k)=>b+`'${k}',`,"")+"]":"undefined"},
			sign: ${h.sign===!0?!0:h.sign!==void 0?"["+h.sign.reduce((b,k)=>b+`'${k}',`,"")+"]":"undefined"},
			${_("domain")}
			${_("expires")}
			${_("httpOnly")}
			${_("maxAge")}
			${_("path","/")}
			${_("priority")}
			${_("sameSite")}
			${_("secure")}
		}`:"undefined";if(I)M+=`\nc.cookie = await parseCookie(c.set, c.headers.cookie, ${L})\n`;else M+=`\nc.cookie = await parseCookie(c.set, c.request.headers.get('cookie'), ${L})\n`}if(O){const _=[];if(Y.query&&Y.query.schema.type==="object"){const L=Y.query.schema.properties;if(!i1(Y.query))for(let[b,k]of Object.entries(L)){let y=k;if(y&&dQ.optional in y&&y.type==="array"&&y.items)y=y.items;const{type:c,anyOf:a0}=y,g2=c==="array"||a0?.some((l0)=>l0.type==="string"&&l0.format==="ArrayString");_.push({key:b,isArray:g2,isNestedObjectArray:g2&&(y.items?.type==="object"||!!a0?.length)||!!y.items?.anyOf,isObject:c==="object"||a0?.some((l0)=>l0.type==="string"&&l0.format==="ArrayString"),anyOf:!!a0})}}if(!_.length)M+=`if(c.qi === -1) {
				c.query = {}
			} else {
				c.query = parseQuery(c.url.slice(c.qi + 1))
			}`;else M+=`if(c.qi !== -1) {
				let url = '&' + c.url.slice(c.qi + 1)

				${_.map(({key:L,isArray:b,isObject:k,isNestedObjectArray:y},c)=>{const a0=`${c===0?"let":""} memory = url.indexOf('&${L}=')
							let a${c}\n`;if(b)return a0+(y?`while (memory !== -1) {
											const start = memory + ${L.length+2}
											memory = url.indexOf('&', start)

											if(a${c} === undefined)
												a${c} = ''
											else
												a${c} += ','

											let temp

											if(memory === -1) temp = decodeURIComponent(url.slice(start))
											else temp = decodeURIComponent(url.slice(start, memory))

											const charCode = temp.charCodeAt(0)
											if(charCode !== 91 && charCode !== 123)
												temp = '"' + temp + '"'

											a${c} += temp
										}

										try {
										    if(a${c}.charCodeAt(0) === 91)
												a${c} = JSON.parse(a${c})
											else
												a${c} = JSON.parse('[' + a${c} + ']')
										} catch {}\n`:`while (memory !== -1) {
											const start = memory + ${L.length+2}
											memory = url.indexOf('&', start)

											if(a${c} === undefined)
												a${c} = []

											if(memory === -1) a${c}.push(decodeURIComponent(url.slice(start)))
											else a${c}.push(decodeURIComponent(url.slice(start, memory)))
										}\n`);if(k)return a0+`if (memory !== -1) {
										const start = memory + ${L.length+2}
										memory = url.indexOf('&', start)

										if(memory === -1) a${c} = decodeURIComponent(url.slice(start))
										else a${c} = decodeURIComponent(url.slice(start, memory))

										if (a${c} !== undefined) {
											try {
												a${c} = JSON.parse(a${c})
											} catch {}
										}
									}`;return a0+`if (memory !== -1) {
										const start = memory + ${L.length+2}
										memory = url.indexOf('&', start)

										if(memory === -1) a${c} = decodeURIComponent(url.slice(start))
										else {
											a${c} = decodeURIComponent(url.slice(start, memory))

											let deepMemory = url.indexOf('&${L}=', memory)

											if(deepMemory !== -1) {
												a${c} = [a${c}]
												let first = true

												while(true) {
													const start = deepMemory + ${L.length+2}
													if(first)
														first = false
													else
														deepMemory = url.indexOf('&', start)

													let value
													if(deepMemory === -1) value = decodeURIComponent(url.slice(start))
													else value = decodeURIComponent(url.slice(start, deepMemory))

													const vStart = value.charCodeAt(0)
													const vEnd = value.charCodeAt(value.length - 1)

													if((vStart === 91 && vEnd === 93) || (vStart === 123 && vEnd === 125))
														try {
															a${c}.push(JSON.parse(value))
														} catch {
														 	a${c}.push(value)
														}

													if(deepMemory === -1) break
												}
											}
										}
									}`}).join("\n")}

				c.query = {
					${_.map(({key:L},b)=>`'${L}': a${b}`).join(", ")}
				}
			} else {
				c.query = {}
			}`}const C2=B.cookie||B.set||I||F||Y.response||G&&V;if(F)M+="\nconst id = c[ELYSIA_REQUEST_ID]\n";const O0=h4({trace:W.trace,addFn:(_)=>{M+=_}});M+="\ntry {\n";const K2=typeof J==="function"&&g0(J),U1=F||W.afterResponse.length>0?"c.response = ":"",T2=T||C||K2||W.parse.length>0||W.afterHandle.some(g0)||W.beforeHandle.some(g0)||W.transform.some(g0)||W.mapResponse.some(g0),Q1=", c.request";M+=`c.route = \`${X}\`\n`;const Z6=O0("parse",{total:W.parse.length});if(C){const _=W.parse.length||B.body||Y.body;if(M+="isParsing = true\n",W.type&&!W.parse.length)switch(W.type){case"json":case"application/json":M+="c.body = await c.request.json()";break;case"text":case"text/plain":M+="c.body = await c.request.text()\n";break;case"urlencoded":case"application/x-www-form-urlencoded":M+="c.body = parseQuery(await c.request.text())\n";break;case"arrayBuffer":case"application/octet-stream":M+="c.body = await c.request.arrayBuffer()\n";break;case"formdata":case"multipart/form-data":M+=`c.body = {}

						const form = await c.request.formData()
						for (const key of form.keys()) {
							if (c.body[key])
								continue

							const value = form.getAll(key)
							if (value.length === 1)
								c.body[key] = value[0]
							else c.body[key] = value
						}\n`;break}else if(_){if(M+="\n",M+=I?"let contentType = c.headers['content-type']":"let contentType = c.request.headers.get('content-type')",M+=`
				if (contentType) {
					const index = contentType.indexOf(';')
					if (index !== -1) contentType = contentType.substring(0, index)\n
					c.contentType = contentType\n`,W.parse.length){M+="let used = false\n";const L=O0("parse",{total:W.parse.length});for(let b=0;b<W.parse.length;b++){const k=L.resolveChild(W.parse[b].fn.name),y=`bo${b}`;if(b!==0)M+="if(!used) {\n";if(M+=`let ${y} = parse[${b}](c, contentType)\n`,M+=`if(${y} instanceof Promise) ${y} = await ${y}\n`,M+=`if(${y} !== undefined) { c.body = ${y}; used = true }\n`,k(),b!==0)M+="}"}L.resolve()}if(M+="\ndelete c.contentType\n",W.parse.length)M+="if (!used) {";if(W.type&&!Array.isArray(W.type))switch(W.type){case"json":case"application/json":M+="c.body = await c.request.json()";break;case"text":case"text/plain":M+="c.body = await c.request.text()\n";break;case"urlencoded":case"application/x-www-form-urlencoded":M+="c.body = parseQuery(await c.request.text())\n";break;case"arrayBuffer":case"application/octet-stream":M+="c.body = await c.request.arrayBuffer()\n";break;case"formdata":case"multipart/form-data":M+=`c.body = {}

							const form = await c.request.formData()
							for (const key of form.keys()) {
								if (c.body[key])
									continue

								const value = form.getAll(key)
								if (value.length === 1)
									c.body[key] = value[0]
								else c.body[key] = value
							}\n`;break}else M+=`
					switch (contentType) {
						case 'application/json':
							c.body = await c.request.json()
							break

						case 'text/plain':
							c.body = await c.request.text()
							break

						case 'application/x-www-form-urlencoded':
							c.body = parseQuery(await c.request.text())
							break

						case 'application/octet-stream':
							c.body = await c.request.arrayBuffer();
							break

						case 'multipart/form-data':
							c.body = {}

							const form = await c.request.formData()
							for (const key of form.keys()) {
								if (c.body[key])
									continue

								const value = form.getAll(key)
								if (value.length === 1)
									c.body[key] = value[0]
								else c.body[key] = value
							}

							break
					}`;if(W.parse.length)M+="}";M+="}\n"}M+="\nisParsing = false\n"}if(Z6.resolve(),W?.transform){const _=O0("transform",{total:W.transform.length});if(W.transform.length)M+="\nlet transformed\n";for(let L=0;L<W.transform.length;L++){const b=W.transform[L],k=_.resolveChild(b.fn.name);if(M+=g0(b)?`transformed = await transform[${L}](c)\n`:`transformed = transform[${L}](c)\n`,b.subType==="mapDerive")M+=`if(transformed?.[ELYSIA_RESPONSE])
					throw transformed
				else {
					transformed.request = c.request
					transformed.store = c.store
					transformed.qi = c.qi
					transformed.path = c.path
					transformed.url = c.url
					transformed.redirect = c.redirect
					transformed.set = c.set
					transformed.error = c.error

					c = transformed
			}`;else M+=`if(transformed?.[ELYSIA_RESPONSE])
					throw transformed
				else
					Object.assign(c, transformed)\n`;k()}_.resolve()}if(Y){if(M+="\n",Y.headers){if(f0&&"Clean"in Y.headers&&!i1(Y.headers))M+="c.headers = validator.headers.Clean(c.headers);\n";if(Z$("default",Y.headers.schema))for(let[_,L]of Object.entries(t.Default(Y.headers.schema,{}))){const b=typeof L==="object"?JSON.stringify(L):typeof L==="string"?`'${L}'`:L;if(b!==void 0)M+=`c.headers['${_}'] ??= ${b}\n`}if(j2(Y.headers))M+="if(isNotEmpty(c.headers)) {";if(M+=`if(validator.headers.Check(c.headers) === false) {
				${J0("headers")}
			}`,Q$(Y.headers.schema))M+="c.headers = validator.headers.Decode(c.headers)\n";if(j2(Y.headers))M+="}"}if(Y.params){if(Z$("default",Y.params.schema))for(let[_,L]of Object.entries(t.Default(Y.params.schema,{}))){const b=typeof L==="object"?JSON.stringify(L):typeof L==="string"?`'${L}'`:L;if(b!==void 0)M+=`c.params['${_}'] ??= ${b}\n`}if(M+=`if(validator.params.Check(c.params) === false) {
				${J0("params")}
			}`,Q$(Y.params.schema))M+="\nc.params = validator.params.Decode(c.params)\n"}if(Y.query){if(f0&&"Clean"in Y.query&&!i1(Y.query))M+="c.query = validator.query.Clean(c.query);\n";if(Z$("default",Y.query.schema))for(let[_,L]of Object.entries(t.Default(Y.query.schema,{}))){const b=typeof L==="object"?JSON.stringify(L):typeof L==="string"?`'${L}'`:L;if(b!==void 0)M+=`if(c.query['${_}'] === undefined) c.query['${_}'] = ${b}\n`}if(j2(Y.query))M+="if(isNotEmpty(c.query)) {";if(M+=`if(validator.query.Check(c.query) === false) {
          		${J0("query")}
			}`,Q$(Y.query.schema))M+="\nc.query = validator.query.Decode(Object.assign({}, c.query))\n";if(j2(Y.query))M+="}"}if(Y.body){if(f0&&"Clean"in Y.body&&!i1(Y.body))M+="c.body = validator.body.Clean(c.body);\n";const _=Q$(Y.body.schema);if(_||j2(Y.body))M+='\nconst isNotEmptyObject = c.body && (typeof c.body === "object" && isNotEmpty(c.body))\n';if(Z$("default",Y.body.schema)){const L=t.Default(Y.body.schema,Y.body.schema.type==="object"?{}:void 0),b=typeof L==="object"?JSON.stringify(L):typeof L==="string"?`'${L}'`:L;if(M+=`if(validator.body.Check(c.body) === false) {
					if (typeof c.body === 'object') {
						c.body = Object.assign(${b}, c.body)
					} else { c.body = ${b} }`,j2(Y.body))M+=`
					    if(isNotEmptyObject && validator.body.Check(c.body) === false) {
            				${J0("body")}
             			}
                    }`;else M+=`
    				if(validator.body.Check(c.body) === false) {
        				${J0("body")}
         			}
                }`}else if(j2(Y.body))M+=`if(isNotEmptyObject && validator.body.Check(c.body) === false) {
         			${J0("body")}
          		}`;else M+=`if(validator.body.Check(c.body) === false) {
         			${J0("body")}
          		}`;if(_)M+="\nif(isNotEmptyObject) c.body = validator.body.Decode(c.body)\n"}if(C1(p?.schema?.properties??p?.schema?.schema??{})){if(M+=`const cookieValue = {}
    			for(const [key, value] of Object.entries(c.cookie))
    				cookieValue[key] = value.value\n`,Z$("default",p.schema))for(let[_,L]of Object.entries(t.Default(p.schema,{})))M+=`cookieValue['${_}'] = ${typeof L==="object"?JSON.stringify(L):L}\n`;if(j2(Y.cookie))M+="if(isNotEmpty(c.cookie)) {";if(M+=`if(validator.cookie.Check(cookieValue) === false) {
				${J0("cookie","cookieValue")}
			}`,Q$(Y.cookie.schema))M+=`\nfor(const [key, value] of Object.entries(validator.cookie.Decode(cookieValue)))
					c.cookie[key].value = value\n`;if(j2(Y.cookie))M+="}"}}if(W?.beforeHandle){const _=O0("beforeHandle",{total:W.beforeHandle.length});let L=!1;for(let b=0;b<W.beforeHandle.length;b++){const k=W.beforeHandle[b],y=_.resolveChild(k.fn.name),c=J$(k);if(k.subType==="resolve"||k.subType==="mapResolve"){if(!L)L=!0,M+="\nlet resolved\n";if(M+=g0(k)?`resolved = await beforeHandle[${b}](c);\n`:`resolved = beforeHandle[${b}](c);\n`,k.subType==="mapResolve")M+=`if(resolved[ELYSIA_RESPONSE])
						throw resolved
					else {
						resolved.request = c.request
						resolved.store = c.store
						resolved.qi = c.qi
						resolved.path = c.path
						resolved.url = c.url
						resolved.redirect = c.redirect
						resolved.set = c.set
						resolved.error = c.error

						c = resolved
					}`;else M+=`if(resolved[ELYSIA_RESPONSE])
						throw resolved
					else
						Object.assign(c, resolved)\n`}else if(!c)M+=g0(k)?`await beforeHandle[${b}](c);\n`:`beforeHandle[${b}](c);\n`,y();else{if(M+=g0(k)?`be = await beforeHandle[${b}](c);\n`:`be = beforeHandle[${b}](c);\n`,y("be"),M+="if(be !== undefined) {\n",_.resolve(),W.afterHandle?.length){O0("handle",{name:G?J.name:void 0}).resolve();const l0=O0("afterHandle",{total:W.afterHandle.length});for(let R1=0;R1<W.afterHandle.length;R1++){const w=W.afterHandle[R1],R=J$(w),H=l0.resolveChild(w.fn.name);if(M+="c.response = be\n",!R)M+=g0(w.fn)?`await afterHandle[${R1}](c, be)\n`:`afterHandle[${R1}](c, be)\n`;else M+=g0(w.fn)?`af = await afterHandle[${R1}](c)\n`:`af = afterHandle[${R1}](c)\n`,M+="if(af !== undefined) { c.response = be = af }\n";H("af")}l0.resolve()}if(Y.response)M+=l1("be");const g2=O0("mapResponse",{total:W.mapResponse.length});if(W.mapResponse.length){M+="\nc.response = be\n";for(let l0=0;l0<W.mapResponse.length;l0++){const R1=W.mapResponse[l0],w=g2.resolveChild(R1.fn.name);M+=`\nif(mr === undefined) {
							mr = ${W$(R1)?"await":""} onMapResponse[${l0}](c)
							if(mr !== undefined) be = c.response = mr
						}\n`,w()}}g2.resolve(),M+=a,M+=`return mapEarlyResponse(${U1} be, c.set ${Q1})}\n`}}_.resolve()}if(W?.afterHandle.length){const _=O0("handle",{name:G?J.name:void 0});if(W.afterHandle.length)M+=K2?`let r = c.response = await ${q};\n`:`let r = c.response = ${q};\n`;else M+=K2?`let r = await ${q};\n`:`let r = ${q};\n`;_.resolve();const L=O0("afterHandle",{total:W.afterHandle.length});for(let k=0;k<W.afterHandle.length;k++){const y=W.afterHandle[k],c=J$(y),a0=L.resolveChild(y.fn.name);if(!c)M+=g0(y.fn)?`await afterHandle[${k}](c)\n`:`afterHandle[${k}](c)\n`,a0();else if(M+=g0(y.fn)?`af = await afterHandle[${k}](c)\n`:`af = afterHandle[${k}](c)\n`,a0("af"),Y.response)M+="if(af !== undefined) {",L.resolve(),M+=l1("af"),M+="c.response = af }";else M+="if(af !== undefined) {",L.resolve(),M+="c.response = af}\n"}if(L.resolve(),M+="r = c.response\n",Y.response)M+=l1();M+=a;const b=O0("mapResponse",{total:W.mapResponse.length});if(W.mapResponse.length)for(let k=0;k<W.mapResponse.length;k++){const y=W.mapResponse[k],c=b.resolveChild(y.fn.name);M+=`\nmr = ${W$(y)?"await":""} onMapResponse[${k}](c)
				if(mr !== undefined) r = c.response = mr\n`,c()}if(b.resolve(),C2)M+=`return mapResponse(${U1} r, c.set ${Q1})\n`;else M+=`return mapCompactResponse(${U1} r ${Q1})\n`}else{const _=O0("handle",{name:G?J.name:void 0});if(Y.response||W.mapResponse.length){if(M+=K2?`let r = await ${q};\n`:`let r = ${q};\n`,_.resolve(),Y.response)M+=l1();O0("afterHandle").resolve();const L=O0("mapResponse",{total:W.mapResponse.length});if(W.mapResponse.length){M+="\nc.response = r\n";for(let b=0;b<W.mapResponse.length;b++){const k=W.mapResponse[b],y=L.resolveChild(k.fn.name);M+=`\nif(mr === undefined) {
						mr = ${W$(k)?"await":""} onMapResponse[${b}](c)
    					if(mr !== undefined) r = c.response = mr
					}\n`,y()}}if(L.resolve(),M+=a,J instanceof Response)M+=B.set?`if(
					isNotEmpty(c.set.headers) ||
					c.set.status !== 200 ||
					c.set.redirect ||
					c.set.cookie
				)
					return mapResponse(${U1} ${q}.clone(), c.set ${Q1})
				else
					return ${q}.clone()`:`return ${q}.clone()`,M+="\n";else if(C2)M+=`return mapResponse(${U1} r, c.set ${Q1})\n`;else M+=`return mapCompactResponse(${U1} r ${Q1})\n`}else if(T||F){M+=K2?`let r = await ${q};\n`:`let r = ${q};\n`,_.resolve(),O0("afterHandle").resolve();const L=O0("mapResponse",{total:W.mapResponse.length});if(W.mapResponse.length){M+="\nc.response = r\n";for(let b=0;b<W.mapResponse.length;b++){const k=W.mapResponse[b],y=L.resolveChild(k.fn.name);M+=`\nif(mr === undefined) {
							mr = ${W$(k)?"await":""} onMapResponse[${b}](c)
    						if(mr !== undefined) r = c.response = mr
						}\n`,y()}}if(L.resolve(),M+=a,C2)M+=`return mapResponse(${U1} r, c.set ${Q1})\n`;else M+=`return mapCompactResponse(${U1} r ${Q1})\n`}else{_.resolve();const L=K2?`await ${q}`:q;if(O0("afterHandle").resolve(),J instanceof Response)M+=B.set?`if(
					isNotEmpty(c.set.headers) ||
					c.set.status !== 200 ||
					c.set.redirect ||
					c.set.cookie
				)
					return mapResponse(${U1} ${q}.clone(), c.set ${Q1})
				else
					return ${q}.clone()`:`return ${q}.clone()`,M+="\n";else if(C2)M+=`return mapResponse(${U1} ${L}, c.set ${Q1})\n`;else M+=`return mapCompactResponse(${U1} ${L} ${Q1})\n`}}if(M+="\n} catch(error) {",C)M+="\nif(isParsing) error = new ParseError()\n";if(!T2)M+="\nreturn (async () => {\n";if(M+="\nconst set = c.set\nif (!set.status || set.status < 300) set.status = error?.status || 500\n",F)for(let _=0;_<W.trace.length;_++)M+=`report${_}?.resolve(error);reportChild${_}?.(error);\n`;const z2=O0("error",{total:W.error.length});if(W.error.length){M+=`
				c.error = error
				c.code = error.code ?? error[ERROR_CODE] ?? "UNKNOWN"
				let er
			`;for(let _=0;_<W.error.length;_++){const L=z2.resolveChild(W.error[_].fn.name);if(g0(W.error[_]))M+=`\ner = await handleErrors[${_}](c)\n`;else M+=`\ner = handleErrors[${_}](c)\nif (er instanceof Promise) er = await er\n`;L();const b=O0("mapResponse",{total:W.mapResponse.length});if(W.mapResponse.length)for(let k=0;k<W.mapResponse.length;k++){const y=W.mapResponse[k],c=b.resolveChild(y.fn.name);M+=`\nc.response = er\n
							er = ${W$(y)?"await":""} onMapResponse[${k}](c)
							if(er instanceof Promise) er = await er\n`,c()}if(b.resolve(),M+=`er = mapEarlyResponse(er, set ${Q1})\n`,M+="if (er) {",F){for(let k=0;k<W.trace.length;k++)M+=`\nreport${k}.resolve()\n`;z2.resolve()}M+="return er\n}\n"}}if(z2.resolve(),M+="return handleError(c, error, true)\n",!T2)M+="})()";if(M+="}",D||F){if(M+=" finally { ",!T2)M+=";(async () => {";const _=O0("afterResponse",{total:W.afterResponse.length});if(D)for(let L=0;L<W.afterResponse.length;L++){const b=_.resolveChild(W.afterResponse[L].fn.name);M+=`\nawait afterResponse[${L}](c);\n`,b()}if(_.resolve(),!T2)M+="})();";M+="}"}M=`const {
		handler,
		handleError,
		hooks: {
			transform,
			resolve,
			beforeHandle,
			afterHandle,
			mapResponse: onMapResponse,
			parse,
			error: handleErrors,
			afterResponse,
			trace: _trace
		},
		validator,
		utils: {
			mapResponse,
			mapCompactResponse,
			mapEarlyResponse,
			parseQuery,
			isNotEmpty
		},
		error: {
			NotFoundError,
			ValidationError,
			InternalServerError,
			ParseError
		},
		schema,
		definitions,
		ERROR_CODE,
		parseCookie,
		signCookie,
		decodeURIComponent,
		ELYSIA_RESPONSE,
		ELYSIA_TRACE,
		ELYSIA_REQUEST_ID,
		getServer
	} = hooks

	const trace = _trace.map(x => typeof x === 'function' ? x : x.fn)

	return ${T2?"async":""} function handle(c) {
		${W.beforeHandle.length?"let be":""}
		${W.afterHandle.length?"let af":""}
		${W.mapResponse.length?"let mr":""}

		${z?"c.schema = schema; c.defs = definitions":""}
		${M}
	}`;try{return Function("hooks",M)({handler:J,hooks:g4(W),validator:Y,handleError:$.handleError,utils:{mapResponse:c0,mapCompactResponse:Y2,mapEarlyResponse:u0,parseQuery:S$,isNotEmpty:C1},error:{NotFoundError:X$,ValidationError:s,InternalServerError:$6,ParseError:X6},schema:$.router.history,definitions:$.definitions.type,ERROR_CODE:$$,parseCookie:l8,signCookie:L$,decodeURIComponent:yQ.default,ELYSIA_RESPONSE:X1,ELYSIA_TRACE:P8,ELYSIA_REQUEST_ID:e2,getServer:()=>$.getServer()})}catch{const _=g4(W);console.log("[Composer] failed to generate optimized handler"),console.log("Please report the following to SaltyAom privately as it may include sensitive information about your codebase:"),console.log("---"),console.log({handler:typeof J==="function"?J.toString():J,hooks:{..._,transform:_?.transform?.map?.((L)=>L.toString()),resolve:_?.resolve?.map?.((L)=>L.toString()),beforeHandle:_?.beforeHandle?.map?.((L)=>L.toString()),afterHandle:_?.afterHandle?.map?.((L)=>L.toString()),mapResponse:_?.mapResponse?.map?.((L)=>L.toString()),parse:_?.parse?.map?.((L)=>L.toString()),error:_?.error?.map?.((L)=>L.toString()),afterResponse:_?.afterResponse?.map?.((L)=>L.toString()),stop:_?.stop?.map?.((L)=>L.toString())},validator:Y,definitions:$.definitions.type}),console.log("---"),process.exit(1)}},m4=($)=>{let X="",Z="";const Q=$.setHeaders;for(let O of Object.keys($.singleton.decorator))X+=`,${O}: app.singleton.decorator.${O}`;const W=$.router,Y=$.event.trace.length>0;let J=`
	const route = router.find(request.method, path) ${W.http.root.ALL?'?? router.find("ALL", path)':""}

	if (route === null)
		return ${$.event.error.length?"app.handleError(ctx, notFound)":$.event.request.length?`new Response(error404Message, {
					status: ctx.set.status === 200 ? 404 : ctx.set.status,
					headers: ctx.set.headers
				})`:"error404.clone()"}

	ctx.params = route.params\n`;J+=`if(route.store.handler) return route.store.handler(ctx)
	return (route.store.handler = route.store.compile())(ctx)\n`;let z="";for(let[O,{code:C,all:S}]of Object.entries(W.static.http.map))z+=`case '${O}':\nswitch(request.method) {\n${C}\n${S??"default: break map"}}\n\n`;const B=$.event.request.some(g0);if(Z+=`const {
		app,
		mapEarlyResponse,
		NotFoundError,
		randomId,
		handleError,
		error,
		redirect,
		ELYSIA_TRACE,
		ELYSIA_REQUEST_ID,
		getServer
	} = data

	const store = app.singleton.store
	const staticRouter = app.router.static.http
	const st = staticRouter.handlers
	const wsRouter = app.router.ws
	const router = app.router.http
	const trace = app.event.trace.map(x => typeof x === 'function' ? x : x.fn)

	const notFound = new NotFoundError()
	const hoc = app.extender.higherOrderFunctions.map(x => x.fn)

	${$.event.request.length?"const onRequest = app.event.request.map(x => x.fn)":""}
	${$.event.error.length?"":`\nconst error404Message = notFound.message.toString()
	const error404 = new Response(error404Message, { status: 404 });\n`}

	${$.event.trace.length?`const ${$.event.trace.map((O,C)=>`tr${C} = app.event.trace[${C}].fn`).join(",")}`:""}

	${B?"async":""} function map(request) {\n`,$.event.request.length)Z+="let re";if(Z+=`\nconst url = request.url
		const s = url.indexOf('/', 11)
		const qi = url.indexOf('?', s + 1)
		let path
		if(qi === -1)
			path = url.substring(s)
		else
			path = url.substring(s, qi)\n`,Z+=`${Y?"const id = randomId()":""}
		const ctx = {
			request,
			store,
			qi,
			path,
			url,
			redirect,
			set: {
				headers: ${Object.keys(Q??{}).length?"Object.assign({}, app.setHeaders)":"{}"},
				status: 200
			},
			error
			${$.inference.server?`, get server() {
							return getServer()
						}`:""}
			${Y?",[ELYSIA_REQUEST_ID]: id":""}
			${X}
		}\n`,$.event.trace.length)Z+=`\nctx[ELYSIA_TRACE] = [${$.event.trace.map((O,C)=>`tr${C}(ctx)`).join(",")}]\n`;const q=h4({context:"ctx",trace:$.event.trace,addFn:(O)=>{Z+=O}})("request",{attribute:"ctx",total:$.event.request.length});if($.event.request.length){Z+="\n try {\n";for(let O=0;O<$.event.request.length;O++){const C=$.event.request[O],S=J$(C),V=g0(C),I=q.resolveChild($.event.request[O].fn.name);if(S)Z+=`re = mapEarlyResponse(
					${V?"await":""} onRequest[${O}](ctx),
					ctx.set,
					request
				)\n`,I("re"),Z+="if(re !== undefined) return re\n";else Z+=`${V?"await":""} onRequest[${O}](ctx)\n`,I()}Z+=`} catch (error) {
			return app.handleError(ctx, error)
		}`}q.resolve();const D=$.router.static.ws,F=$.router.ws;if(Object.keys(D).length||F.history.length){Z+=`
			if(request.method === 'GET') {
				switch(path) {`;for(let[O,C]of Object.entries(D))Z+=`
					case '${O}':
						if(request.headers.get('upgrade') === 'websocket')
							return st[${C}](ctx)

						break`;Z+=`
				default:
					if(request.headers.get('upgrade') === 'websocket') {
						const route = wsRouter.find('ws', path)

						if(route) {
							ctx.params = route.params

							if(route.store.handler)
							    return route.store.handler(ctx)

							return (route.store.handler = route.store.compile())(ctx)
						}
					}

					break
			}
		}\n`}if(Z+=`
		map: switch(path) {
			${z}

			default:
				break
		}

		${J}
	}\n`,$.extender.higherOrderFunctions.length){let O="map";for(let C=0;C<$.extender.higherOrderFunctions.length;C++)O=`hoc[${C}](${O}, request)`;Z+=`return function hocMap(request) { return ${O}(request) }`}else Z+="return map";const M=u4($);return $.handleError=M,Function("data",Z)({app:$,mapEarlyResponse:u0,NotFoundError:X$,randomId:a8,handleError:M,error:f4,redirect:N8,ELYSIA_TRACE:P8,ELYSIA_REQUEST_ID:e2,getServer:()=>$.getServer()})},u4=($)=>{const X=$.event;let Z="";Z+=`const {
		app: { event: { error: onErrorContainer, afterResponse: resContainer, mapResponse: _onMapResponse, trace: _trace } },
		mapResponse,
		ERROR_CODE,
		ELYSIA_RESPONSE,
		ELYSIA_TRACE,
		ELYSIA_REQUEST_ID
	} = inject

	const trace = _trace.map(x => typeof x === 'function' ? x : x.fn)
	const onMapResponse = []

	for(let i = 0; i < _onMapResponse.length; i++)
		onMapResponse.push(_onMapResponse[i].fn ?? _onMapResponse[i])

	delete _onMapResponse

	const onError = onErrorContainer.map(x => x.fn)
	const res = resContainer.map(x => x.fn)

	return ${$.event.error.find(g0)||$.event.mapResponse.find(g0)?"async":""} function(context, error, skipGlobal) {`;const Q=$.event.trace.length>0;if(Q)Z+="\nconst id = context[ELYSIA_REQUEST_ID]\n";const W=h4({context:"context",trace:X.trace,addFn:(z)=>{Z+=z}});Z+=`
		const set = context.set
		let r

		context.code = error.code
		context.error = error

		if(typeof error === "object" && error && ELYSIA_RESPONSE in error) {
			error.status = error[ELYSIA_RESPONSE]
			error.message = error.response
		}\n`;const Y=Q||X.afterResponse.length>0||X.afterResponse.length>0?"context.response = ":"";for(let z=0;z<$.event.error.length;z++){const B=$.event.error[z],G=`${g0(B)?"await ":""}onError[${z}](context)`;if(Z+="\nif(skipGlobal !== true) {\n",J$(B)){Z+=`r = ${G}; if(r !== undefined) {
				if(r instanceof Response) return r

				if(r[ELYSIA_RESPONSE]) {
					error.status = error[ELYSIA_RESPONSE]
					error.message = error.response
				}

				if(set.status === 200) set.status = error.status\n`;const q=W("mapResponse",{total:X.mapResponse.length,name:"context"});if(X.mapResponse.length)for(let D=0;D<X.mapResponse.length;D++){const F=X.mapResponse[D],M=q.resolveChild(F.fn.name);Z+=`\ncontext.response = r
						r = ${W$(F)?"await":""} onMapResponse[${D}](context)\n`,M()}q.resolve(),Z+=`return mapResponse(${Y} r, set, context.request)}\n`}else Z+=G+"\n";Z+="\n}\n"}Z+=`if(error.constructor.name === "ValidationError" || error.constructor.name === "TransformDecodeError") {
		set.status = error.status ?? 422
		return new Response(
			error.message,
			{
				headers: Object.assign(
					{ 'content-type': 'application/json'},
					set.headers
				),
				status: set.status
			}
		)
	} else {
		if(error.code && typeof error.status === "number")
			return new Response(
				error.message,
				{ headers: set.headers, status: error.status }
			)\n`;const J=W("mapResponse",{total:X.mapResponse.length,name:"context"});if(X.mapResponse.length)for(let z=0;z<X.mapResponse.length;z++){const B=X.mapResponse[z],G=J.resolveChild(B.fn.name);Z+=`\ncontext.response = error
			error = ${W$(B)?"await":""} onMapResponse[${z}](context)\n`,G()}return J.resolve(),Z+=`\nreturn mapResponse(${Y} error, set, context.request)\n}\n}`,Function("inject",Z)({app:$,mapResponse:c0,ERROR_CODE:$$,ELYSIA_RESPONSE:X1,ELYSIA_TRACE:P8,ELYSIA_REQUEST_ID:e2})};var c4=($)=>async(X)=>{const Z=X.url,Q=Z.indexOf("/",11),W=Z.indexOf("?",Q+1),Y=W===-1?Z.substring(Q):Z.substring(Q,W),J={cookie:{},status:200,headers:{}},z=Object.assign({},$.singleton.decorator,{set:J,store:$.singleton.store,request:X,path:Y,qi:W,redirect:N8});try{for(let V=0;V<$.event.request.length;V++){const I=$.event.request[V].fn;let T=I(z);if(T instanceof Promise)T=await T;if(T=u0(T,J),T)return z.response=T}const B=$.router.dynamic.find(X.method,Y)??$.router.dynamic.find("ALL",Y);if(!B)throw new X$;const{handle:G,hooks:q,validator:D,content:F}=B.store;let M;if(X.method!=="GET"&&X.method!=="HEAD")if(F)switch(F){case"application/json":M=await X.json();break;case"text/plain":M=await X.text();break;case"application/x-www-form-urlencoded":M=S$(await X.text());break;case"application/octet-stream":M=await X.arrayBuffer();break;case"multipart/form-data":M={};const V=await X.formData();for(let I of V.keys()){if(M[I])continue;const T=V.getAll(I);if(T.length===1)M[I]=T[0];else M[I]=T}break}else{let V=X.headers.get("content-type");if(V){const I=V.indexOf(";");if(I!==-1)V=V.slice(0,I);z.contentType=V;for(let T=0;T<q.parse.length;T++){const p=q.parse[T].fn;let h=p(z,V);if(h instanceof Promise)h=await h;if(h){M=h;break}}if(delete z.contentType,M===void 0)switch(V){case"application/json":M=await X.json();break;case"text/plain":M=await X.text();break;case"application/x-www-form-urlencoded":M=S$(await X.text());break;case"application/octet-stream":M=await X.arrayBuffer();break;case"multipart/form-data":M={};const T=await X.formData();for(let p of T.keys()){if(M[p])continue;const h=T.getAll(p);if(h.length===1)M[p]=h[0];else M[p]=h}break}}}z.body=M,z.params=B?.params||void 0,z.query=W===-1?{}:S$(Z.substring(W+1)),z.headers={};for(let[V,I]of X.headers.entries())z.headers[V]=I;const O=Object.assign({},$.config?.cookie,D?.cookie?.config),C=X.headers.get("cookie");z.cookie=await l8(z.set,C,O?{secrets:O.secrets!==void 0?typeof O.secrets==="string"?O.secrets:O.secrets.join(","):void 0,sign:O.sign===!0?!0:O.sign!==void 0?typeof O.sign==="string"?O.sign:O.sign.join(","):void 0}:void 0);for(let V=0;V<q.transform.length;V++){const I=q.transform[V],T=I.fn(z);if(I.subType==="derive")if(T instanceof Promise)Object.assign(z,await T);else Object.assign(z,T);else if(T instanceof Promise)await T}if(D){if(D.createHeaders?.()){const V={};for(let I in X.headers)V[I]=X.headers.get(I);if(D.headers.Check(V)===!1)throw new s("header",D.headers,V)}if(D.createParams?.()?.Check(z.params)===!1)throw new s("params",D.params,z.params);if(D.createQuery?.()?.Check(z.query)===!1)throw new s("query",D.query,z.query);if(D.createCookie?.()){const V={};for(let[I,T]of Object.entries(z.cookie))V[I]=T.value;if(D.cookie.Check(V)===!1)throw new s("cookie",D.cookie,V)}if(D.createBody?.()?.Check(M)===!1)throw new s("body",D.body,M)}for(let V=0;V<q.beforeHandle.length;V++){let I=q.beforeHandle[V].fn(z);if(I instanceof Promise)I=await I;if(I!==void 0){z.response=I;for(let p=0;p<q.afterHandle.length;p++){let h=q.afterHandle[p].fn(z);if(h instanceof Promise)h=await h;if(h)I=h}const T=u0(I,z.set);if(T)return z.response=T}}let S=G(z);if(S instanceof Promise)S=await S;if(!q.afterHandle.length){const V=S[X1]??(J.status?typeof J.status==="string"?S2[J.status]:J.status:200),I=D?.createResponse?.()?.[V];if(I?.Check(S)===!1)throw new s("response",I,S)}else{z.response=S;for(let V=0;V<q.afterHandle.length;V++){let I=q.afterHandle[V].fn(z);if(I instanceof Promise)I=await I;const T=u0(I,z.set);if(T!==void 0){const p=D?.response?.[T.status];if(p?.Check(T)===!1)throw new s("response",p,T);return z.response=T}}}if(z.set.cookie&&O?.sign){const V=!O.secrets?void 0:typeof O.secrets==="string"?O.secrets:O.secrets[0];if(O.sign===!0)for(let[I,T]of Object.entries(z.set.cookie))z.set.cookie[I].value=await L$(T.value,"${secret}");else{const I=D?.cookie?.schema?.properties;for(let T of O.sign){if(!(T in I))continue;if(z.set.cookie[T]?.value)z.set.cookie[T].value=await L$(z.set.cookie[T].value,V)}}}return z.response=c0(S,z.set)}catch(B){if(B.status)J.status=B.status;return $.handleError(z,B)}finally{for(let B of $.event.afterResponse)await B.fn(z)}},pQ=($)=>async(X,Z)=>{const Q=Object.assign(X,{error:Z,code:Z.code});Q.set=X.set;for(let W=0;W<$.event.error.length;W++){let J=$.event.error[W].fn(Q);if(J instanceof Promise)J=await J;if(J!==void 0&&J!==null)return X.response=c0(J,X.set)}return new Response(typeof Z.cause==="string"?Z.cause:Z.message,{headers:X.set.headers,status:Z.status??500})};class b1{config;server=null;dependencies={};_routes={};_types={Prefix:"",Scoped:!1,Singleton:{},Definitions:{},Metadata:{}};_ephemeral={};_volatile={};static version=d4;version=d4;singleton={decorator:{},store:{},derive:{},resolve:{}};get store(){return this.singleton.store}get decorator(){return this.singleton.decorator}get _scoped(){return this.config.scoped}definitions={type:{},error:{}};extender={macros:[],higherOrderFunctions:[]};validator={global:null,scoped:null,local:null,getCandidate(){return O$(O$(this.global,this.scoped),this.local)}};event={start:[],request:[],parse:[],transform:[],beforeHandle:[],afterHandle:[],mapResponse:[],afterResponse:[],trace:[],error:[],stop:[]};telemetry={stack:void 0};router={http:new L8,ws:new L8,dynamic:new L8,static:{http:{handlers:[],map:{},all:""},ws:{}},history:[]};routeTree=new Map;get routes(){return this.router.history}getGlobalRoutes(){return this.router.history}inference={body:!1,cookie:!1,headers:!1,query:!1,set:!1,server:!1};getServer(){return this.server}_promisedModules;get promisedModules(){if(!this._promisedModules)this._promisedModules=new T4;return this._promisedModules}constructor($){if($?.tags)if(!$.detail)$.detail={tags:$.tags};else $.detail.tags=$.tags;if(this.config={},this.applyConfig($??{}),$?.analytic&&($?.name||$?.seed!==void 0))this.telemetry.stack=new Error().stack}env($,X=Bun?.env??process.env){if(r0($,{dynamic:!0,additionalProperties:!0,coerce:!0}).Check(X)===!1){const Q=new s("env",$,X);throw new Error(Q.all.map((W)=>W.summary).join("\n"))}return this}wrap($){return this.extender.higherOrderFunctions.push({checksum:a2(JSON.stringify({name:this.config.name,seed:this.config.seed,content:$.toString()})),fn:$}),this}applyMacro($){if(this.extender.macros.length){const X=xQ({globalHook:this.event,localHook:$}),Z={events:{global:this.event,local:$},onParse:X("parse"),onTransform:X("transform"),onBeforeHandle:X("beforeHandle"),onAfterHandle:X("afterHandle"),mapResponse:X("mapResponse"),onAfterResponse:X("afterResponse"),onError:X("error")};for(let Q of this.extender.macros)IQ(Q.fn(Z),$)}}applyConfig($){return this.config={prefix:"",aot:!0,strictPath:!1,global:!1,analytic:!1,normalize:!0,...$,cookie:{path:"/",...$?.cookie},experimental:$?.experimental??{},seed:$?.seed===void 0?"":$?.seed},this}get models(){const $={};for(let[X,Z]of Object.entries(this.definitions.type))$[X]=r0(Z);return $}add($,X,Z,Q,{allowMeta:W=!1,skipPrefix:Y=!1}={allowMeta:!1,skipPrefix:!1}){if(Q=kQ(Q),X!==""&&X.charCodeAt(0)!==47)X="/"+X;if(this.config.prefix&&!Y&&!this.config.scoped)X=this.config.prefix+X;if(Q?.type)switch(Q.type){case"text":Q.type="text/plain";break;case"json":Q.type="application/json";break;case"formdata":Q.type="multipart/form-data";break;case"urlencoded":Q.type="application/x-www-form-urlencoded";break;case"arrayBuffer":Q.type="application/octet-stream";break;default:break}const J=this.definitions.type,z=!this.config.aot,B={...this.validator.getCandidate()},G={body:Q?.body??B?.body,headers:Q?.headers??B?.headers,params:Q?.params??B?.params,query:Q?.query??B?.query,cookie:Q?.cookie??B?.cookie,response:Q?.response??B?.response},q=()=>G.cookie?t8({validator:G.cookie,defaultConfig:this.config.cookie,config:G.cookie?.config??{},dynamic:z,models:J}):void 0,D=this.config.normalize,F=this.config.precompile===!0||typeof this.config.precompile==="object"&&this.config.precompile.schema===!0?{body:r0(G.body,{dynamic:z,models:J,normalize:D}),headers:r0(G.headers,{dynamic:z,models:J,additionalProperties:!this.config.normalize,coerce:!0,additionalCoerce:k2}),params:r0(G.params,{dynamic:z,models:J,coerce:!0,additionalCoerce:k2}),query:r0(G.query,{dynamic:z,models:J,normalize:D,coerce:!0,additionalCoerce:k2}),cookie:q(),response:n8(G.response,{dynamic:z,models:J,normalize:D})}:{createBody(){if(this.body)return this.body;return this.body=r0(G.body,{dynamic:z,models:J,normalize:D})},createHeaders(){if(this.headers)return this.headers;return this.headers=r0(G.headers,{dynamic:z,models:J,additionalProperties:!D,coerce:!0,additionalCoerce:k2})},createParams(){if(this.params)return this.params;return this.params=r0(G.params,{dynamic:z,models:J,coerce:!0,additionalCoerce:k2})},createQuery(){if(this.query)return this.query;return this.query=r0(G.query,{dynamic:z,models:J,coerce:!0,additionalCoerce:k2})},createCookie(){if(this.cookie)return this.cookie;return this.cookie=q()},createResponse(){if(this.response)return this.response;return this.response=n8(G.response,{dynamic:z,models:J,normalize:D})}},M=X.endsWith("/")?X.slice(0,X.length-1):X+"/";if(Q=w1(Q,B),Q.tags)if(!Q.detail)Q.detail={tags:Q.tags};else Q.detail.tags=Q.tags;if(C1(this.config.detail))Q.detail=Z1(Object.assign({},this.config.detail),Q.detail);this.applyMacro(Q);const O=w1(this.event,Q);if(this.config.aot===!1){if(this.router.dynamic.add($,X,{validator:F,hooks:O,content:Q?.type,handle:Z}),this.config.strictPath===!1)this.router.dynamic.add($,M,{validator:F,hooks:O,content:Q?.type,handle:Z});this.router.history.push({method:$,path:X,composed:null,handler:Z,hooks:O});return}const C=this.config.precompile===!0||typeof this.config.precompile==="object"&&this.config.precompile.compose===!0,S=A8(this.inference),V=()=>vQ({app:this,path:X,method:$,localHook:w1(Q),hooks:O,validator:F,handler:Z,allowMeta:W,inference:S}),I=C?V():(a)=>{return V()(a)},T=this.router.history.length;if(this.routeTree.has($+X))for(let a=0;a<this.router.history.length;a++){const f0=this.router.history[a];if(f0.path===X&&f0.method===$){const J0=this.router.history.splice(a,1)[0];if(J0&&this.routeTree.has(J0?.method+J0?.path))this.routeTree.delete(J0.method+J0.path)}}else this.routeTree.set($+X,T);this.router.history.push({method:$,path:X,composed:I,handler:Z,hooks:O});const p=this.router.static.http,h={handler:C?I:void 0,compile:V};if($==="$INTERNALWS"){const a=this.config.strictPath?void 0:X.endsWith("/")?X.slice(0,X.length-1):X+"/";if(X.indexOf(":")===-1&&X.indexOf("*")===-1){const f0=p.handlers.length;if(p.handlers.push((J0)=>(p.handlers[f0]=V())(J0)),this.router.static.ws[X]=f0,a)this.router.static.ws[a]=f0}else if(this.router.ws.add("ws",X,h),a)this.router.ws.add("ws",a,h);return}if(X.indexOf(":")===-1&&X.indexOf("*")===-1){const a=p.handlers.length;if(p.handlers.push((f0)=>(p.handlers[a]=V())(f0)),!p.map[X])p.map[X]={code:""};if($==="ALL")p.map[X].all=`default: return st[${a}](ctx)\n`;else p.map[X].code=`case '${$}': return st[${a}](ctx)\n${p.map[X].code}`;if(!this.config.strictPath){if(!p.map[M])p.map[M]={code:""};if($==="ALL")p.map[M].all=`default: return st[${a}](ctx)\n`;else p.map[M].code=`case '${$}': return st[${a}](ctx)\n${p.map[M].code}`}}else if(this.router.http.add($,X,h),!this.config.strictPath)this.router.http.add($,X.endsWith("/")?X.slice(0,X.length-1):X+"/",h)}setHeaders;headers($){if(!$)return this;if(!this.setHeaders)this.setHeaders={};return this.setHeaders=Z1(this.setHeaders,$),this}onStart($){return this.on("start",$),this}onRequest($){return this.on("request",$),this}onParse($,X){if(!X)return this.on("parse",$);return this.on($,"parse",X)}onTransform($,X){if(!X)return this.on("transform",$);return this.on($,"transform",X)}resolve($,X){if(!X)X=$,$={as:"local"};const Z={subType:"resolve",fn:X};return this.onBeforeHandle($,Z)}mapResolve($,X){if(!X)X=$,$={as:"local"};const Z={subType:"mapResolve",fn:X};return this.onBeforeHandle($,Z)}onBeforeHandle($,X){if(!X)return this.on("beforeHandle",$);return this.on($,"beforeHandle",X)}onAfterHandle($,X){if(!X)return this.on("afterHandle",$);return this.on($,"afterHandle",X)}mapResponse($,X){if(!X)return this.on("mapResponse",$);return this.on($,"mapResponse",X)}onAfterResponse($,X){if(!X)return this.on("afterResponse",$);return this.on($,"afterResponse",X)}trace($,X){if(!X)X=$,$={as:"local"};if(!Array.isArray(X))X=[X];for(let Z of X)this.on($,"trace",fQ(Z));return this}error($,X){switch(typeof $){case"string":return X.prototype[$$]=$,this.definitions.error[$]=X,this;case"function":return this.definitions.error=$(this.definitions.error),this}for(let[Z,Q]of Object.entries($))Q.prototype[$$]=Z,this.definitions.error[Z]=Q;return this}onError($,X){if(!X)return this.on("error",$);return this.on($,"error",X)}onStop($){return this.on("stop",$),this}on($,X,Z){let Q;switch(typeof $){case"string":Q=$,Z=X;break;case"object":if(Q=X,!Array.isArray(X)&&typeof X==="object")Z=X;break}if(Array.isArray(Z))Z=K1(Z);else if(typeof Z==="function")Z=[{fn:Z}];else Z=[Z];const W=Z;for(let Y of W)Y.scope=typeof $==="string"?"local":$?.as??"local";if(Q!=="trace")_8({[Q]:W.map((Y)=>Y.fn)},this.inference);for(let Y of W){const J=EQ(Y,"global",{skipIfHasType:!0});switch(Q){case"start":this.event.start.push(J);break;case"request":this.event.request.push(J);break;case"parse":this.event.parse.push(J);break;case"transform":this.event.transform.push(J);break;case"beforeHandle":this.event.beforeHandle.push(J);break;case"afterHandle":this.event.afterHandle.push(J);break;case"mapResponse":this.event.mapResponse.push(J);break;case"afterResponse":this.event.afterResponse.push(J);break;case"trace":this.event.trace.push(J);break;case"error":this.event.error.push(J);break;case"stop":this.event.stop.push(J);break}}return this}propagate(){return i0(this.event.parse),i0(this.event.transform),i0(this.event.beforeHandle),i0(this.event.afterHandle),i0(this.event.mapResponse),i0(this.event.afterResponse),i0(this.event.trace),i0(this.event.error),this}as($){const X={plugin:"scoped",global:"global"}[$];if(i0(this.event.parse,X),i0(this.event.transform,X),i0(this.event.beforeHandle,X),i0(this.event.afterHandle,X),i0(this.event.mapResponse,X),i0(this.event.afterResponse,X),i0(this.event.trace,X),i0(this.event.error,X),$==="plugin")this.validator.scoped=O$(this.validator.scoped,this.validator.local),this.validator.local=null;else if($==="global")this.validator.global=O$(this.validator.global,O$(this.validator.scoped,this.validator.local)),this.validator.scoped=null,this.validator.local=null;return this}group($,X,Z){const Q=new b1({...this.config,prefix:""});Q.singleton={...this.singleton},Q.definitions={...this.definitions},Q.getServer=()=>this.getServer(),Q.inference=A8(this.inference),Q.extender={...this.extender};const W=typeof X==="object",Y=(W?Z:X)(Q);if(this.singleton=Z1(this.singleton,Q.singleton),this.definitions=Z1(this.definitions,Q.definitions),Y.event.request.length)this.event.request=[...this.event.request||[],...Y.event.request||[]];if(Y.event.mapResponse.length)this.event.mapResponse=[...this.event.mapResponse||[],...Y.event.mapResponse||[]];return this.model(Y.definitions.type),Object.values(Q.router.history).forEach(({method:J,path:z,handler:B,hooks:G})=>{if(z=(W?"":this.config.prefix)+$+z,W){const q=X,D=G;this.add(J,z,B,w1(q,{...D||{},error:!D.error?Y.event.error:Array.isArray(D.error)?[...D.error||{},...Y.event.error||{}]:[D.error,...Y.event.error||{}]}))}else this.add(J,z,B,w1(G,{error:Y.event.error}),{skipPrefix:!0})}),this}guard($,X){if(!X){if(typeof $==="object"){this.applyMacro($);const W=$.as??"local";if(this.validator[W]={body:$.body??this.validator[W]?.body,headers:$.headers??this.validator[W]?.headers,params:$.params??this.validator[W]?.params,query:$.query??this.validator[W]?.query,response:$.response??this.validator[W]?.response,cookie:$.cookie??this.validator[W]?.cookie},$.parse)this.on({as:W},"parse",$.parse);if($.transform)this.on({as:W},"transform",$.transform);if($.beforeHandle)this.on({as:W},"beforeHandle",$.beforeHandle);if($.afterHandle)this.on({as:W},"afterHandle",$.afterHandle);if($.mapResponse)this.on({as:W},"mapResponse",$.mapResponse);if($.afterResponse)this.on({as:W},"afterResponse",$.afterResponse);if($.error)this.on({as:W},"error",$.error);if($.detail)if(this.config.detail)this.config.detail=Z1(Object.assign({},this.config.detail),$.detail);else this.config.detail=$.detail;if($?.tags)if(!this.config.detail)this.config.detail={tags:$.tags};else this.config.detail.tags=$.tags;return this}return this.guard({},$)}const Z=new b1({...this.config,prefix:""});Z.singleton={...this.singleton},Z.definitions={...this.definitions},Z.inference=A8(this.inference),Z.extender={...this.extender};const Q=X(Z);if(this.singleton=Z1(this.singleton,Z.singleton),this.definitions=Z1(this.definitions,Z.definitions),Q.getServer=()=>this.server,Q.event.request.length)this.event.request=[...this.event.request||[],...Q.event.request||[]];if(Q.event.mapResponse.length)this.event.mapResponse=[...this.event.mapResponse||[],...Q.event.mapResponse||[]];return this.model(Q.definitions.type),Object.values(Z.router.history).forEach(({method:W,path:Y,handler:J,hooks:z})=>{this.add(W,Y,J,w1($,{...z||{},error:!z.error?Q.event.error:Array.isArray(z.error)?[...z.error||{},...Q.event.error||[]]:[z.error,...Q.event.error||[]]}))}),this}use($,X){if(X?.scoped)return this.guard({},(Z)=>Z.use($));if(Array.isArray($)){let Z=this;for(let Q of $)Z=this.use(Q);return Z}if($ instanceof Promise)return this.promisedModules.add($.then((Z)=>{if(typeof Z==="function")return Z(this);if(Z instanceof b1)return this._use(Z);if(typeof Z.default==="function")return Z.default(this);if(Z.default instanceof b1)return this._use(Z.default);throw new Error('Invalid plugin type. Expected Elysia instance, function, or module with "default" as Elysia instance or function that returns Elysia instance.')}).then((Z)=>Z.compile())),this;return this._use($)}_use($){if(typeof $==="function"){const W=$(this);if(W instanceof Promise)return this.promisedModules.add(W.then((Y)=>{if(Y instanceof b1){this.compile();for(let{method:J,path:z,handler:B,hooks:G}of Object.values(Y.router.history))this.add(J,z,B,w1(G,{error:Y.event.error}));return Y}if(typeof Y==="function")return Y(this);if(typeof Y.default==="function")return Y.default(this);return this._use(Y)}).then((Y)=>Y.compile())),this;return W}if($.promisedModules.size)return this.promisedModules.add($.modules.then(()=>this._use($)).then((W)=>W.compile())),this;const{name:X,seed:Z}=$.config;$.getServer=()=>this.getServer(),$.getGlobalRoutes=()=>this.getGlobalRoutes(),$.model(this.definitions.type),$.error(this.definitions.error);const Q=$.config.scoped;if(Q){if(X){if(!(X in this.dependencies))this.dependencies[X]=[];const Y=Z!==void 0?a2(X+JSON.stringify(Z)):0;if(this.dependencies[X].some(({checksum:J})=>Y===J))return this;this.dependencies[X].push(!this.config?.analytic?{name:$.config.name,seed:$.config.seed,checksum:Y,dependencies:$.dependencies}:{name:$.config.name,seed:$.config.seed,checksum:Y,dependencies:$.dependencies,stack:$.telemetry.stack,routes:$.router.history,decorators:$.singleton.decorator,store:$.singleton.store,type:$.definitions.type,error:$.definitions.error,derive:$.event.transform.filter((J)=>J.subType==="derive").map((J)=>({fn:J.fn.toString(),stack:new Error().stack??""})),resolve:$.event.transform.filter((J)=>J.subType==="derive").map((J)=>({fn:J.fn.toString(),stack:new Error().stack??""}))})}$.extender.macros=this.extender.macros.concat($.extender.macros);const W=[];for(let Y=0;Y<$.extender.macros.length;Y++){const J=this.extender.macros[Y];if(W.includes(J.checksum))$.extender.macros.splice(Y,1),Y--;W.push(J.checksum)}if($.onRequest((Y)=>{Object.assign(Y,this.singleton.decorator),Object.assign(Y.store,this.singleton.store)}),$.event.trace.length)$.event.trace.push(...$.event.trace);if(!$.config.prefix)console.warn("It's recommended to use scoped instance with a prefix to prevent collision routing with other instance.");if($.event.error.length)$.event.error.push(...this.event.error);if($.config.aot)$.compile();if(Q===!0&&$.config.prefix){this.mount($.config.prefix+"/",$.fetch);for(let Y of $.router.history)this.routeTree.set(Y.method+`${$.config.prefix}${Y.path}`,this.router.history.length),this.router.history.push({...Y,path:`${$.config.prefix}${Y.path}`,hooks:w1(Y.hooks,{error:this.event.error})})}else{this.mount($.fetch);for(let Y of $.router.history)this.routeTree.set(Y.method+`${$.config.prefix}${Y.path}`,this.router.history.length),this.router.history.push({...Y,path:`${$.config.prefix}${Y.path}`,hooks:w1(Y.hooks,{error:this.event.error})})}return this}else{if(this.headers($.setHeaders),X){if(!(X in this.dependencies))this.dependencies[X]=[];const Y=Z!==void 0?a2(X+JSON.stringify(Z)):0;if(!this.dependencies[X].some(({checksum:J})=>Y===J))this.extender.macros=this.extender.macros.concat($.extender.macros),this.extender.higherOrderFunctions=this.extender.higherOrderFunctions.concat($.extender.higherOrderFunctions)}else this.extender.macros=this.extender.macros.concat($.extender.macros),this.extender.higherOrderFunctions=this.extender.higherOrderFunctions.concat($.extender.higherOrderFunctions);e8(this.extender.macros),e8(this.extender.higherOrderFunctions);const W=[];for(let Y=0;Y<this.extender.higherOrderFunctions.length;Y++){const J=this.extender.higherOrderFunctions[Y];if(J.checksum){if(W.includes(J.checksum))this.extender.higherOrderFunctions.splice(Y,1),Y--;W.push(J.checksum)}}this.inference={body:this.inference.body||$.inference.body,cookie:this.inference.cookie||$.inference.cookie,headers:this.inference.headers||$.inference.headers,query:this.inference.query||$.inference.query,set:this.inference.set||$.inference.set,server:this.inference.server||$.inference.server}}this.decorate($.singleton.decorator),this.state($.singleton.store),this.model($.definitions.type),this.error($.definitions.error),$.extender.macros=this.extender.macros.concat($.extender.macros);for(let{method:W,path:Y,handler:J,hooks:z}of Object.values($.router.history))this.add(W,Y,J,w1(z,{error:$.event.error}));if(!Q)if(X){if(!(X in this.dependencies))this.dependencies[X]=[];const W=Z!==void 0?a2(X+JSON.stringify(Z)):0;if(this.dependencies[X].some(({checksum:Y})=>W===Y))return this;this.dependencies[X].push(!this.config?.analytic?{name:$.config.name,seed:$.config.seed,checksum:W,dependencies:$.dependencies}:{name:$.config.name,seed:$.config.seed,checksum:W,dependencies:$.dependencies,stack:$.telemetry.stack,routes:$.router.history,decorators:$.singleton,store:$.singleton.store,type:$.definitions.type,error:$.definitions.error,derive:$.event.transform.filter((Y)=>Y?.subType==="derive").map((Y)=>({fn:Y.toString(),stack:new Error().stack??""})),resolve:$.event.transform.filter((Y)=>Y?.subType==="resolve").map((Y)=>({fn:Y.toString(),stack:new Error().stack??""}))}),this.event=x4(this.event,k4($.event),W)}else this.event=x4(this.event,k4($.event));return this.validator.global=w1(this.validator.global,{...$.validator.global}),this.validator.local=w1(this.validator.local,{...$.validator.scoped}),this}macro($){const X={checksum:a2(JSON.stringify({name:this.config.name,seed:this.config.seed,content:$.toString()})),fn:$};return this.extender.macros.push(X),this}mount($,X){if($ instanceof b1||typeof $==="function"||$.length===0||$==="/"){const W=typeof $==="function"?$:$ instanceof b1?$.compile().fetch:X instanceof b1?X.compile().fetch:X,Y=async({request:J,path:z})=>W(new Request(o8(J.url,z||"/"),J));return this.all("/*",Y,{type:"none"}),this}const Z=$.length;if(X instanceof b1)X=X.compile().fetch;const Q=async({request:W,path:Y})=>X(new Request(o8(W.url,Y.slice(Z)||"/"),W));return this.all($,Q,{type:"none"}),this.all($+($.endsWith("/")?"*":"/*"),Q,{type:"none"}),this}get($,X,Z){return this.add("GET",$,X,Z),this}post($,X,Z){return this.add("POST",$,X,Z),this}put($,X,Z){return this.add("PUT",$,X,Z),this}patch($,X,Z){return this.add("PATCH",$,X,Z),this}delete($,X,Z){return this.add("DELETE",$,X,Z),this}options($,X,Z){return this.add("OPTIONS",$,X,Z),this}all($,X,Z){return this.add("ALL",$,X,Z),this}head($,X,Z){return this.add("HEAD",$,X,Z),this}connect($,X,Z){return this.add("CONNECT",$,X,Z),this}route($,X,Z,Q){return this.add($.toUpperCase(),X,Z,Q,Q?.config),this}ws($,X){const Z=X.transformMessage?Array.isArray(X.transformMessage)?X.transformMessage:[X.transformMessage]:void 0;let Q=null;const W=r0(X?.body,{models:this.definitions.type,normalize:this.config.normalize}),Y=r0(X?.response,{models:this.definitions.type,normalize:this.config.normalize}),J=(z)=>{if(typeof z==="string"){const B=z?.charCodeAt(0);if(B===47||B===123)try{z=JSON.parse(z)}catch{}else if(r8(z))z=+z}if(Z?.length)for(let B=0;B<Z.length;B++){const G=Z[B](z);if(G!==void 0)z=G}return z};return this.route("$INTERNALWS",$,(z)=>{const{set:B,path:G,qi:q,headers:D,query:F,params:M}=z;if(Q===null)Q=this.getServer();if(Q?.upgrade(z.request,{headers:typeof X.upgrade==="function"?X.upgrade(z):X.upgrade,data:{validator:Y,open(O){X.open?.(new _$(O,z))},message:(O,C)=>{const S=J(C);if(W?.Check(S)===!1)return void O.send(new s("message",W,S).message);X.message?.(new _$(O,z),S)},drain(O){X.drain?.(new _$(O,z))},close(O,C,S){X.close?.(new _$(O,z),C,S)}}}))return;return B.status=400,"Expected a websocket connection"},{beforeHandle:X.beforeHandle,transform:X.transform,headers:X.headers,params:X.params,query:X.query}),this}state($,X,Z){if(X===void 0)Z=$,$={as:"append"},X="";else if(Z===void 0){if(typeof $==="string")Z=X,X=$,$={as:"append"};else if(typeof $==="object")Z=X,X=""}const{as:Q}=$;if(typeof X!=="string")return this;switch(typeof Z){case"object":if(X){if(X in this.singleton.store)this.singleton.store[X]=Z1(this.singleton.store[X],Z,{override:Q==="override"});else this.singleton.store[X]=Z;return this}if(Z===null)return this;return this.singleton.store=Z1(this.singleton.store,Z,{override:Q==="override"}),this;case"function":if(X){if(Q==="override"||!(X in this.singleton.store))this.singleton.store[X]=Z}else this.singleton.store=Z(this.singleton.store);return this;default:if(Q==="override"||!(X in this.singleton.store))this.singleton.store[X]=Z;return this}}decorate($,X,Z){if(X===void 0)Z=$,$={as:"append"},X="";else if(Z===void 0){if(typeof $==="string")Z=X,X=$,$={as:"append"};else if(typeof $==="object")Z=X,X=""}const{as:Q}=$;if(typeof X!=="string")return this;switch(typeof Z){case"object":if(X){if(X in this.singleton.decorator)this.singleton.decorator[X]=Z1(this.singleton.decorator[X],Z,{override:Q==="override"});else this.singleton.decorator[X]=Z;return this}if(Z===null)return this;return this.singleton.decorator=Z1(this.singleton.decorator,Z,{override:Q==="override"}),this;case"function":if(X){if(Q==="override"||!(X in this.singleton.decorator))this.singleton.decorator[X]=Z}else this.singleton.decorator=Z(this.singleton.decorator);return this;default:if(Q==="override"||!(X in this.singleton.decorator))this.singleton.decorator[X]=Z;return this}}derive($,X){if(!X)X=$,$={as:"local"};const Z={subType:"derive",fn:X};return this.onTransform($,Z)}model($,X){switch(typeof $){case"object":return Object.entries($).forEach(([Z,Q])=>{if(!(Z in this.definitions.type))this.definitions.type[Z]=Q}),this;case"function":return this.definitions.type=$(this.definitions.type),this}return this.definitions.type[$]=X,this}mapDerive($,X){if(!X)X=$,$={as:"local"};const Z={subType:"mapDerive",fn:X};return this.onTransform($,Z)}affix($,X,Z){if(Z==="")return this;const Q=["_","-"," "],W=(B)=>B[0].toUpperCase()+B.slice(1),Y=$==="prefix"?(B,G)=>Q.includes(B.at(-1)??"")?B+G:B+W(G):Q.includes(Z.at(-1)??"")?(B,G)=>G+B:(B,G)=>G+W(B),J=(B)=>{const G={};switch(B){case"decorator":for(let q in this.singleton.decorator)G[Y(Z,q)]=this.singleton.decorator[q];this.singleton.decorator=G;break;case"state":for(let q in this.singleton.store)G[Y(Z,q)]=this.singleton.store[q];this.singleton.store=G;break;case"model":for(let q in this.definitions.type)G[Y(Z,q)]=this.definitions.type[q];this.definitions.type=G;break;case"error":for(let q in this.definitions.error)G[Y(Z,q)]=this.definitions.error[q];this.definitions.error=G;break}},z=Array.isArray(X)?X:[X];for(let B of z.some((G)=>G==="all")?["decorator","state","model","error"]:z)J(B);return this}prefix($,X){return this.affix("prefix",$,X)}suffix($,X){return this.affix("suffix",$,X)}compile(){if(this.fetch=this.config.aot?m4(this):c4(this),typeof this.server?.reload==="function")this.server.reload({...this.server||{},fetch:this.fetch});return this}handle=async($)=>this.fetch($);fetch=($)=>{return(this.fetch=this.config.aot?m4(this):c4(this))($)};handleError=async($,X)=>(this.handleError=this.config.aot?u4(this):pQ(this))($,X);outerErrorHandler=($)=>new Response($.message||$.name||"Error",{status:$?.status??500});listen=($,X)=>{if(typeof Bun==="undefined")throw new Error(".listen() is designed to run on Bun only. If you are running Elysia in other environment please use a dedicated plugin or export the handler via Elysia.fetch");if(this.compile(),typeof $==="string"){if(!r8($))throw new Error("Port must be a numeric value");$=parseInt($)}const Z=this.fetch,Q=typeof $==="object"?{development:!D8,reusePort:!0,...this.config.serve||{},...$||{},websocket:{...this.config.websocket||{},...y4||{}},fetch:Z,error:this.outerErrorHandler}:{development:!D8,reusePort:!0,...this.config.serve||{},websocket:{...this.config.websocket||{},...y4||{}},port:$,fetch:Z,error:this.outerErrorHandler};this.server=Bun?.serve(Q);for(let W=0;W<this.event.start.length;W++)this.event.start[W].fn(this);if(X)X(this.server);return process.on("beforeExit",()=>{if(this.server){this.server.stop(),this.server=null;for(let W=0;W<this.event.stop.length;W++)this.event.stop[W].fn(this)}}),this.promisedModules.then(()=>{Bun?.gc(!1)}),this};stop=async()=>{if(!this.server)throw new Error("Elysia isn't running. Call `app.listen` to start the server.");if(this.server){if(this.server.stop(),this.server=null,this.event.stop.length)for(let $=0;$<this.event.stop.length;$++)this.event.stop[$].fn(this)}};get modules(){return Promise.all(this.promisedModules.promises)}}var hQ=($,X)=>new Request(`http://localhost${$}`,X);var fq=new b1().get("/",({query:$})=>{return console.log("Query:",$),$});fq.handle(hQ("/?id=a")).then(($)=>$.json()).then(console.log);
